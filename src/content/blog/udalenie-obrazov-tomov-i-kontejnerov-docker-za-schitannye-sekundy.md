---
title: 'Удаление образов, томов и контейнеров Docker за считанные секунды'
meta_title: >-
  Удаление образов, томов и контейнеров Docker за считанные секунды - Igor
  Gorlov
description: >-
  Docker – это технология контейнеризации программного обеспечения, которая
  помогает разработчикам создавать и развертывать приложения на различных
  платформах – от настольных компьютеров до облачных вычислений.
date: 2023-03-04T17:41:18.000Z
author: Igor Gorlov
image: ../../assets/images/undefined-Mar-04-2023.avif
categories:
  - Как закодить
tags:
  - Docker
draft: false
lastmod: 2024-03-20T21:26:44.081Z
---

Docker - это технология контейнеризации программного обеспечения, которая помогает разработчикам создавать и развертывать приложения на различных платформах - от настольных компьютеров до облачных вычислений.

Снимок - или чертеж - исходного кода, зависимостей и инструментов, необходимых для создания приложения в контейнере Docker, называется образом. Приложения Docker, которым требуются постоянные данные, могут полагаться на хранилища, называемые томами, которые не зависят от базовой операционной системы.

Эффективная организация образов, томов и контейнеров очень важна при использовании Docker. Неиспользуемые воплощения этих активов могут накапливаться, занимая ценное дисковое пространство и в конечном итоге влияя на производительность системы.

В этой статье рассматриваются различные способы поддержания организации системы путем очистки образов (как по отдельности, так и всех сразу), томов и контейнеров. Для быстрого выполнения этих задач мы будем использовать интерфейс командной строки (CLI) docker.

<!-- wp:rank-math/toc-block {"title":"Оглавление","headings":[{"key":"a979269b-270e-44d4-b7bb-56aa3b178fed","content":"Как удалять образы Docker","level":2,"link":"#как-удалять-образы-docker","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"6c7e081a-0269-4e4f-883e-77561c3d7de9","content":"Удаление всех неиспользуемых образов","level":3,"link":"#удаление-всех-неиспользуемых-образов","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"c003e70a-92c5-4047-9a10-a68ad868eaba","content":" Удаление определенного образа по имени","level":3,"link":"#удаление-определенного-образа-по-имени","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"993d0145-8300-428c-89e2-e73271b4e964","content":"Использование сокращения rmi для удаления образов","level":3,"link":"#использование-сокращения-rmi-для-удаления-образов","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"36186327-5823-4ac7-9808-a26823d2c789","content":"Удаление всех неотмеченных изображений","level":3,"link":"#удаление-всех-неотмеченных-изображений","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"5e9e5fe7-e365-4fee-b615-a41c5c93533d","content":"Удаление определенного изображения по идентификатору","level":3,"link":"#удаление-определенного-изображения-по-идентификатору","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"9e1ea8ec-9497-40f1-bc15-51336009998e","content":"Удаление определенного образа по имени и тегу","level":3,"link":"#удаление-определенного-образа-по-имени-и-тегу","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"9c700093-d689-4ff5-985f-51d354d29134","content":"Удаление всех образов с тегом latest","level":3,"link":"#удаление-всех-образов-с-тегом-latest","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"6efcf9c3-f2fb-4f1b-89ca-3892a00b5def","content":"Удаление образов из удаленного хранилища","level":3,"link":"#удаление-образов-из-удаленного-хранилища","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"ffb4834c-8772-495d-beb5-8adb215e9915","content":"Удаление нескольких образов из удаленного хранилища","level":3,"link":"#удаление-нескольких-образов-из-удаленного-хранилища","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"077cbb18-a1be-484b-8676-c31b0935c1df","content":"Как удалить тома Docker","level":2,"link":"#как-удалить-тома-docker","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"0d29ca57-c3d4-49f9-85c7-88ad579b3fd8","content":"Удаление всех неиспользуемых томов","level":3,"link":"#удаление-всех-неиспользуемых-томов","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"acf447cd-fbfc-42ef-b8be-32786da05f3c","content":"Удаление определенного тома по имени","level":3,"link":"#удаление-определенного-тома-по-имени","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"559eb8b7-2af6-45a5-be17-596e9b7da9d0","content":"Как удалять контейнеры Docker","level":2,"link":"#как-удалять-контейнеры-docker","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"982addcd-6d05-453c-bfab-e6a542c7c56c","content":"Удалите все остановленные контейнеры","level":3,"link":"#удалите-все-остановленные-контейнеры","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"0d3dd6c7-54b3-4bcf-bb22-9bdaa3451e76","content":"Удаление определенного контейнера по идентификатору","level":3,"link":"#удаление-определенного-контейнера-по-идентификатору","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"b125c1f0-76c0-4be4-b798-fc3713ecbc36","content":"Удаление определенного контейнера по имени","level":3,"link":"#удаление-определенного-контейнера-по-имени","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"2778fec4-2b78-49f9-9793-1eb981ed9d35","content":"Удаление всех запущенных контейнеров","level":3,"link":"#удаление-всех-запущенных-контейнеров","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"b62e22dc-bc71-467b-9fe0-9f8fcc432106","content":"Резюме","level":2,"link":"#резюме","disable":false,"isUpdated":false,"isGeneratedLink":true}],"listStyle":"ul"} -->
<div class="wp-block-rank-math-toc-block" id="rank-math-toc"><h2>Оглавление</h2><nav><ul><li class=""><a href="#как-удалять-образы-docker">Как удалять образы Docker</a><ul><li class=""><a href="#удаление-всех-неиспользуемых-образов">Удаление всех неиспользуемых образов</a></li><li class=""><a href="#удаление-определенного-образа-по-имени"> Удаление определенного образа по имени</a></li><li class=""><a href="#использование-сокращения-rmi-для-удаления-образов">Использование сокращения rmi для удаления образов</a></li><li class=""><a href="#удаление-всех-неотмеченных-изображений">Удаление всех неотмеченных изображений</a></li><li class=""><a href="#удаление-определенного-изображения-по-идентификатору">Удаление определенного изображения по идентификатору</a></li><li class=""><a href="#удаление-определенного-образа-по-имени-и-тегу">Удаление определенного образа по имени и тегу</a></li><li class=""><a href="#удаление-всех-образов-с-тегом-latest">Удаление всех образов с тегом latest</a></li><li class=""><a href="#удаление-образов-из-удаленного-хранилища">Удаление образов из удаленного хранилища</a></li><li class=""><a href="#удаление-нескольких-образов-из-удаленного-хранилища">Удаление нескольких образов из удаленного хранилища</a></li></ul></li><li class=""><a href="#как-удалить-тома-docker">Как удалить тома Docker</a><ul><li class=""><a href="#удаление-всех-неиспользуемых-томов">Удаление всех неиспользуемых томов</a></li><li class=""><a href="#удаление-определенного-тома-по-имени">Удаление определенного тома по имени</a></li></ul></li><li class=""><a href="#как-удалять-контейнеры-docker">Как удалять контейнеры Docker</a><ul><li class=""><a href="#удалите-все-остановленные-контейнеры">Удалите все остановленные контейнеры</a></li><li class=""><a href="#удаление-определенного-контейнера-по-идентификатору">Удаление определенного контейнера по идентификатору</a></li><li class=""><a href="#удаление-определенного-контейнера-по-имени">Удаление определенного контейнера по имени</a></li><li class=""><a href="#удаление-всех-запущенных-контейнеров">Удаление всех запущенных контейнеров</a></li></ul></li><li class=""><a href="#резюме">Резюме</a></li></ul></nav></div>
<!-- /wp:rank-math/toc-block -->

<h2 class="wp-block-heading" id="как-удалять-образы-docker">Как удалять образы Docker</h2>

Удаление устаревших или ненужных образов из Docker необходимо для поддержания чистоты и организованности системы. Давайте рассмотрим, как с помощью CLI можно выбрать определенные образы для удаления.

Сначала посмотрим на образы в среде Docker с помощью команды docker image ls:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker image ls
REPOSITORY       TAG       IMAGE ID       CREATED              SIZE
my_image         latest    2cbc27836df4   60 seconds ago       7.05MB
&lt;none&gt;           &lt;none&gt;    85b412789704   2 days ago           7.05MB
demo             latest    26d80cd96d69   15 months ago        28.5MB</code></pre>
<!-- /wp:code -->

В списке изображений выше обнаружены изображения с именами my_image и demo, оба помечены тегом latest. Третье изображение не имеет ни имени, ни тега. В данном случае это ”висящий" образ: образ, который в настоящее время не используется контейнером. Этот висящий образ возник в результате перестройки my_image (обычный сценарий). Предыдущая версия образа все еще находится в файловой системе, но сейчас не используется.

В листинге также отображаются первые 12 символов 64-символьного идентификатора каждого образа, даты создания и занимаемое образами пространство для хранения.

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-всех-неиспользуемых-образов">Удаление всех неиспользуемых образов</h3>

В приведенном выше примере листинга у нас есть висящее изображение. Однако возможно, что изображение без имени или тега является активным. Например, оно могло быть использовано для запуска контейнера путем обращения к его ID.

Чтобы безопасно удалить все изображения, которые действительно являются висячими, можно использовать команду docker image prune:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker image prune

WARNING! This will remove all dangling images.
Are you sure you want to continue? [y/N] y

Deleted Images:
deleted: sha256:85b412789704c17e9c5e7edc97b2f64c748bbdae7eaa44d3fe2cc21a87acad3d

Total reclaimed space: 7.05MB</code></pre>
<!-- /wp:code -->

Мы еще раз перечислим наши изображения, чтобы увидеть результаты нашей работы:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker image ls
REPOSITORY       TAG       IMAGE ID       CREATED              SIZE
my_image         latest    2cbc27836df4   70 seconds ago       7.05MB
demo             latest    26d80cd96d69   15 months ago        28.5MB</code></pre>
<!-- /wp:code -->

После процесса обрезки образ без имени или тега исчез.

Не позволяйте Docker загромождать вашу систему! Узнайте, как эффективно очищать образы, тома и контейнеры с помощью этих удобных команд. 🙌 Нажмите для Твиттера

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-определенного-образа-по-имени"><br>Удаление определенного образа по имени</h3>

Вы можете выбрать образ для удаления, указав его имя:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker image rm &lt;image_name&gt;</code></pre>
<!-- /wp:code -->

Примечание: Вы не можете легко удалить используемые образы. Вы должны остановить или удалить запущенные контейнеры, использующие образы. Хотя это обычно не рекомендуется, вы можете принудительно удалить активный образ с помощью флага -f:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker image rm &lt;image_name&gt; -f</code></pre>
<!-- /wp:code -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="использование-сокращения-rmi-для-удаления-образов">Использование сокращения rmi для удаления образов</h3>

В Docker CLI есть сокращенный подход к удалению образов в виде псевдонима rmi. Его использование для удаления образа по имени выглядит следующим образом:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker rmi demo
Untagged: demo:latest
Deleted: sha256:2cbc27836df4a7707e746e28368f1fdecfefbfb813aae06611ca6913116b80b4</code></pre>
<!-- /wp:code -->

Мы будем использовать rmi для следующих примеров удаления изображений.

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-всех-неотмеченных-изображений">Удаление всех неотмеченных изображений</h3>

Неотмеченные образы по-прежнему занимают ценное дисковое пространство, что со временем все больше замедляет работу системы.

Чтобы удалить все неотмеченные образы в Docker, используйте команду docker rmi с фильтром. Вы можете задать фильтры на основе определенных критериев с помощью опции -f (не путать с флагом -f, доступным для image rm для принудительного выполнения действия).

Фильтр dangling=true используется для идентификации неотмеченных изображений:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker rmi $(docker images -f "dangling=true" -q)</code></pre>
<!-- /wp:code -->

Опция -q в приведенной выше команде отображает идентификаторы всех неотмеченных образов. Все эти идентификаторы затем передаются в качестве аргументов команде docker rmi для их удаления.

В этом фильтре используется ключевое слово ”висящий", но, как отмечалось выше, некоторые изображения без меток могут быть активными. Вы получите предупреждение, если изображение, выбранное этим фильтром, не является действительно висящим.

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-определенного-изображения-по-идентификатору">Удаление определенного изображения по идентификатору</h3>

Вы можете использовать команду docker rmi для удаления любого конкретного образа, указав его ID:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker rmi &lt;image_id&gt;</code></pre>
<!-- /wp:code -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-определенного-образа-по-имени-и-тегу">Удаление определенного образа по имени и тегу</h3>

Вы можете удалить определенный образ вместе с его именем и тегом с помощью команды docker rmi.

Например, если у вас есть несколько изображений с одинаковым именем, но разными тегами, вы можете удалить конкретное изображение, используя этот формат:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker rmi &lt;image_name&gt;:&lt;tag&gt;</code></pre>
<!-- /wp:code -->

Этот метод удобен, когда вы хотите удалить определенную версию изображения вместо удаления всех изображений, связанных с хранилищем.

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-всех-образов-с-тегом-latest">Удаление всех образов с тегом latest</h3>

В Docker тег “latest” относится к самой последней версии определенного образа Docker. Тег latest часто используется в качестве тега по умолчанию для образов Docker. Он автоматически присваивается самой последней сборке образа, если явно не указан другой тег.

Docker предоставляет команду для удаления всех образов с тегом “latest”:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker rmi $(docker images | grep "latest" | awk '{print $3}')</code></pre>
<!-- /wp:code -->

Приведенная выше команда состоит из двух частей. Сначала она получает список идентификаторов образов, а затем передает этот список в качестве аргумента команде docker rmi.

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-образов-из-удаленного-хранилища">Удаление образов из удаленного хранилища</h3>

Чтобы удалить образ из удаленного хранилища, такого как Docker Hub, вам сначала нужно войти в учетную запись с помощью Docker CLI.

Как только вы войдете в систему, вам нужно будет использовать команду docker rmi для удаления образа. Команда docker rmi может удалять как локальные, так и удаленные образы:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">docker rmi my_repo/my_image_tag</code></pre>
<!-- /wp:code -->

Примечательно, что удалять можно только те образы, которые были размещены в хранилище. Аналогичным образом нельзя удалить образы, используемые запущенными контейнерами.

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-нескольких-образов-из-удаленного-хранилища">Удаление нескольких образов из удаленного хранилища</h3>

Чтобы удалить несколько образов из удаленного хранилища, вы можете использовать команду docker rmi, за которой следуют идентификаторы или теги образов. Например:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">docker rmi my_repo/image_tag_1 my_repo/image_tag_2 my_repo/image_tag_3</code></pre>
<!-- /wp:code -->

Это удалит три образа с тегами image_tag_1, image_tag_2 и image_tag_3 из хранилища my_repo.

<h2 class="wp-block-heading" id="как-удалить-тома-docker">Как удалить тома Docker</h2>

Тома Docker могут занимать много места на диске, особенно если они содержат большие объемы данных или несколько резервных копий. Удаляя тома, которые больше не нужны, вы снижаете риск утечки данных и обеспечиваете недоступность конфиденциальных данных для неавторизованных пользователей. Регулярное удаление томов также позволяет поддерживать среду Docker в актуальном состоянии и предотвращать проблемы, вызванные устаревшими данными.

Эти команды навсегда уничтожают все данные, хранящиеся в томе, поэтому используйте их с осторожностью.

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-всех-неиспользуемых-томов">Удаление всех неиспользуемых томов</h3>

В Docker удаление неиспользуемых томов так же важно, как и удаление образов или контейнеров.

Чтобы освободить дисковое пространство, можно использовать команду docker volume prune.

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-определенного-тома-по-имени">Удаление определенного тома по имени</h3>

Удаление определенного тома в Docker полезно для удаления неиспользуемых томов. Вот команда для удаления тома:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">docker volume rm my_volume_name</code></pre>
<!-- /wp:code -->

С помощью приведенной выше команды том my_volume_name будет удален. Docker выдает ошибку, если вы пытаетесь удалить используемый том. Вы можете проверить доступные тома с помощью команды docker volume ls.

<h2 class="wp-block-heading" id="как-удалять-контейнеры-docker">Как удалять контейнеры Docker</h2>

По мере расширения работы с Docker у вас может накопиться много неиспользуемых контейнеров, которые занимают дисковые ресурсы. Если вы не удалите их, они могут накапливаться со временем и занимать ценные дисковые ресурсы, замедляя работу системы и подвергая вас потенциальному риску.

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удалите-все-остановленные-контейнеры">Удалите все остановленные контейнеры</h3>

Команда docker container prune может удалить все остановленные контейнеры в Docker. Здесь команда создает список всех остановленных контейнеров, которые будут удалены, и запрашивает подтверждение перед выполнением. Это помогает высвободить дисковое пространство и поддерживать чистоту и организованность среды Docker, а также позволяет вам дважды проверить, не потеряли ли вы что-нибудь важное:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker container prune

WARNING! This will remove all stopped containers.
Are you sure you want to continue? [y/N] y

Deleted Containers:
4df4c47c4df4
d35bcec20bce</code></pre>
<!-- /wp:code -->

Обратите внимание, что с помощью этой команды можно удалить только остановленные контейнеры. Если вам нужно удалить работающие контейнеры, вам нужно сначала остановить их или использовать другую команду.

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-определенного-контейнера-по-идентификатору">Удаление определенного контейнера по идентификатору</h3>

В Docker вы можете удалить определенный контейнер по ID, используя команду docker rm вместе с ID контейнера. Сначала получите все идентификаторы контейнеров с помощью команды docker ps:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker ps -a -q
1ce3cdeb4035
06b79541e25c
fa98f1804e3e

$ docker rm 1ce3cdeb4035</code></pre>
<!-- /wp:code -->

Приведенная выше команда работает только в том случае, если контейнер находится в остановленном состоянии. Если контейнер запущен, то необходимо принудительно удалить его с помощью флага -f:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker rm -f 1ce3cdeb4035</code></pre>
<!-- /wp:code -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-определенного-контейнера-по-имени">Удаление определенного контейнера по имени</h3>

Docker предоставляет многоцелевую команду docker rm для удаления контейнеров как по имени, так и по ID.

Например, если у вас есть контейнер с именем web_server, вы можете удалить его с помощью следующей команды:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker rm web_server</code></pre>
<!-- /wp:code -->

Сначала необходимо остановить контейнер. Docker предоставляет команду docker stop для остановки определенного контейнера.

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="удаление-всех-запущенных-контейнеров">Удаление всех запущенных контейнеров</h3>

Чтобы удалить все запущенные контейнеры, можно воспользоваться командой docker rm:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker rm $(docker ps -q)</code></pre>
<!-- /wp:code -->

С помощью команды docker ps -q можно получить список идентификаторов запущенных контейнеров. После этого идентификаторы передаются команде docker rm, которая удаляет все контейнеры.

Обратите внимание, что эта команда удаляет только запущенные контейнеры. Если вы хотите удалить все контейнеры, включая остановленные, вы можете использовать следующую команду:

<!-- wp:code -->
<pre class="wp-block-code"><code lang="bash" class="language-bash">$ docker rm $(docker ps -a -q)</code></pre>
<!-- /wp:code -->

Если вы хотите оптимизировать свою систему Docker, удаление ненужных образов, томов и контейнеров - отличное начало! 💪

<h2 class="wp-block-heading" id="резюме">Резюме</h2>

В этой статье мы объяснили, как удалять образы, тома и контейнеры Docker. Вы узнали о различных методах поддержания чистоты и организованности системы. Здесь были рассмотрены команды для удаления всех неиспользуемых, немаркированных или определенных образов по ID или имени. Вы также изучили команды для удаления всех остановленных контейнеров или определенного контейнера по идентификатору или имени.

Удаление образов, томов и контейнеров Docker - это простой процесс, который может помочь вам управлять неиспользуемыми компонентами, восстанавливая ценное дисковое пространство и зачастую повышая производительность системы.

Именно эта простота привлекает разработчиков к Docker, и нет более простого способа развернуть приложение, разработанное в Docker, чем платформа Application Hosting от Kinsta. Вы можете попробовать ее бесплатно прямо сейчас.
