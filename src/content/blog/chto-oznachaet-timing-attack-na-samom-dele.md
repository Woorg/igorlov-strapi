---
title: Что означает Timing Attack на самом деле?
meta_title: Что означает Timing Attack на самом деле? - Igor Gorlov
description: >-
  Атаки по времени — это класс вредоносных атак на продукт, при которых
  длительность времени, которое требуется вашему приложению для выполнения
  задачи, приводит к утечке некоторой информации. Возьмем, к примеру,
  приложение, которое принимает для проверки электронную почту и пароль.
date: 2023-04-21T07:10:21.000Z
image: ../../assets/images/undefined-Apr-21-2023.avif
categories:
  - Учебник
author: Igor Gorlov
tags:
  - Security
draft: false
lastmod: 2024-03-20T21:26:46.579Z
---

<!-- wp:rank-math/toc-block {"title":"Оглавление","headings":[{"key":"0e1888e1-5335-41a3-9186-ad6b03eea2d1","content":"Атаки по времени","level":2,"link":"#атаки-по-времени","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"14f3494f-ebc0-43b4-af36-038a7ced8da7","content":"Является ли это большой проблемой?","level":2,"link":"#является-ли-это-большой-проблемой","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"3b3e3c61-906b-46af-a928-9bee69fedb26","content":"Как мы можем это исправить?","level":2,"link":"#как-мы-можем-это-исправить","disable":false,"isUpdated":false,"isGeneratedLink":true}],"listStyle":"ul"} -->
<div class="wp-block-rank-math-toc-block" id="rank-math-toc"><h2>Оглавление</h2><nav><ul><li class=""><a href="#атаки-по-времени">Атаки по времени</a></li><li class=""><a href="#является-ли-это-большой-проблемой">Является ли это большой проблемой?</a></li><li class=""><a href="#как-мы-можем-это-исправить">Как мы можем это исправить?</a></li></ul></nav></div>
<!-- /wp:rank-math/toc-block -->

<h2 class="wp-block-heading" id="атаки-по-времени">Атаки по времени</h2>

Атаки по времени — это класс вредоносных атак на продукт, при которых длительность времени, которое требуется вашему приложению для выполнения задачи, приводит к утечке некоторой информации. Возьмем, к примеру, приложение, которое принимает для проверки электронную почту и пароль. Если нет пользователя с указанным адресом электронной почты, оно возвращает ошибку за 5 мс, но если указан действительный адрес электронной почты пользователя с неправильным паролем, оно возвращает ошибку за 500 мс.

<!-- wp:image -->
<figure class="wp-block-image"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--OmmEyoJ9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/b7rymvrpck9n559zeki7.png" alt="Разница во времени"/></figure>
<!-- /wp:image -->

Для злоумышленника разница во времени между этими двумя запросами может сделать относительно очевидным, есть ли действительное электронное письмо или нет. Если разница была более тонкой, злоумышленник может сделать много запросов в течение длительного времени и усреднить их, чтобы отличить разные случаи.

<h2 class="wp-block-heading" id="является-ли-это-большой-проблемой">Является ли это большой проблемой?</h2>

Может показаться, что это не так уж важно, но, допустим, я пытаюсь найти чей-то личный e-mail. У меня есть только его имя, и я знаю, что он подписался на ваш сайт. Я могу перебрать множество вариантов firstname.lastname@gmail.com или lastname{3digitnumber}@gmail.com и так далее, пока не найду их реальный адрес электронной почты.

<h2 class="wp-block-heading" id="как-мы-можем-это-исправить">Как мы можем это исправить?</h2>

Чтобы решить эту проблему, нам нужно убедиться, что все пути кода занимают одинаковое количество времени. Это означает, что мы должны избегать раннего возврата в чувствительных частях кодовой базы. В случае, когда мы проверяем электронную почту и пароль пользователя, вместо того, чтобы возвращаться раньше времени, если электронная почта не найдена, мы должны проверить пароль на соответствие жестко заданному значению, а затем вернуть false.

Так, в примере с проверкой электронной почты типичный поток будет выглядеть следующим образом:

<!-- wp:list -->
<ul><!-- wp:list-item -->
<li>Существует ли пользователь с таким адресом электронной почты? (1 мс)</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Если да, то каков хэш его пароля? (1 мс)</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Совпадает ли хэш пароля с предоставленным паролем? (400 мс)</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

Этот поток хорошо работает, когда предоставлены правильные email и пароль, но он становится уязвимым для атаки по времени в следующем сценарии:

<!-- wp:list -->
<ul><!-- wp:list-item -->
<li>Существует ли пользователь с таким адресом электронной почты? (1 мс)</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Если нет, возврат (1 мс)</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

Один из способов избежать этой уязвимости, как я уже упоминал выше, заключается в том, чтобы заставить и правильные, и неправильные потоки следовать одним и тем же процедурам для более тесного согласования по времени:

<!-- wp:list -->
<ul><!-- wp:list-item -->
<li>Существует ли пользователь с таким адресом электронной почты (1 мс)</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Если нет, сравнить предоставленный пароль с хэшем пароля (400 мс)</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Возврат false в любом случае (1 мс)</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

Это гарантирует, что функция занимает одинаковое количество времени для всех входов, что затрудняет злоумышленнику извлечение информации.

<!-- wp:image -->
<figure class="wp-block-image"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ysUkbmYr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/v5aaivrxd32m2xjcrph9.png" alt="Разница во времени 2"/></figure>
<!-- /wp:image -->

Хотя вы должны делать все возможное для защиты от временных атак, вы также можете добавить дополнительные средства защиты для обеспечения безопасности. Поскольку тонкие временные атаки основаны на выполнении большого количества запросов, еще одним средством защиты здесь является ограничение скорости. Ограничив количество запросов, мы можем сделать невозможным для злоумышленника различать разные случаи.

При создании потоков аутентификации в приложениях можно легко упустить из виду такие тонкие уязвимости, как временные атаки в коде. Хотя может показаться странным намеренное замедление работы кода, предотвращение потенциальной утечки личной информации стоит того.

<!-- wp:acf/acf-donate {"id":"block_64678dc93985f","name":"acf/acf-donate","data":{"title":"Задонатить на поддержку!","_title":"field_646b621e8617c","list_0_name":"Donatepay","_list_0_name":"field_646b623e8617e","list_0_url":"https://new.donatepay.ru/@1117856","_list_0_url":"field_646b62528617f","list_0_address":"","_list_0_address":"field_646b625d86180","list_1_name":"Donationalerts","_list_1_name":"field_646b623e8617e","list_1_url":"https://www.donationalerts.com/c/woorg_","_list_1_url":"field_646b62528617f","list_1_address":"","_list_1_address":"field_646b625d86180","list_2_name":"USDT (TRC20)","_list_2_name":"field_646b623e8617e","list_2_url":"","_list_2_url":"field_646b62528617f","list_2_address":"TR121HxpTDF71TMm9idZkBaZxnjSMcCPWj","_list_2_address":"field_646b625d86180","list_3_name":"ETH","_list_3_name":"field_646b623e8617e","list_3_url":"","_list_3_url":"field_646b62528617f","list_3_address":"0x442721192987047eDeEC69Ca1D4c706f9Adb16B3","_list_3_address":"field_646b625d86180","list_4_name":"BTC","_list_4_name":"field_646b623e8617e","list_4_url":"","_list_4_url":"field_646b62528617f","list_4_address":"36dLKv5uRozphSQa55w2XgsF42AugPu2QT","_list_4_address":"field_646b625d86180","list":5,"_list":"field_646b62308617d"},"align":"","mode":"edit"} /-->
