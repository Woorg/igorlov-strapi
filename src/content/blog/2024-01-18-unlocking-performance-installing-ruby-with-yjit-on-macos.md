---
title: 'Разблокировка производительности: Установка Ruby с помощью YJIT на MacOS'
meta_title: >-
  Разблокировка производительности: Установка Ruby с помощью YJIT на MacOS |
  Игорь Горлов - Фронтeндер
description: >-
  Фото Джошуа Фуллера на Unsplash


  YJIT, революционный компилятор JustInTime для Ruby, значительно повышает
  производительность ваших приложений. Однако важно о
date: 2024-01-18T00:00:00.000Z
categories:
  - Учебник
author: Игорь Горлов
type: blog
draft: false
slug: razblokyrovka-proyzvodytelnosty-ustanovka-ruby-s-pomoschiu-yjit-na-macos
tags:
  - Yjit
  - Ruby
image: >-
  ../../assets/images/razblokyrovka-proyzvodytelnosty-ustanovka-ruby-s-pomoschiu-yjit-na-macos-Jan-18-2024.avif
lastmod: 2024-03-20T21:26:46.305Z
---

YJIT, революционный компилятор Just-In-Time для Ruby, значительно повышает производительность ваших приложений. Однако важно отметить, что YJIT не включен в Ruby по умолчанию. Не бойтесь - с помощью нескольких простых шагов вы сможете использовать мощь YJIT в системе MacOS.

Для начала необходимо пересобрать Ruby с правильной конфигурацией. Для этого нужно использовать флаг `--enable-yjit` 1. Кроме того, убедитесь, что у вас установлен `rustc`, поскольку YJIT полагается на него.

Для пользователей, использующих `ruby-build`, включение опций компиляции не составит труда с помощью переменных окружения 2. Это позволяет легко интегрировать YJIT в среду Ruby, гарантируя, что ваши приложения будут работать с повышенной скоростью и эффективностью.

```bash
$ brew install rust
$ RUBY_CONFIGURE_OPTS="--enable-yjit" rbenv install 3.3.0
$ rbenv shell 3.3.0
$ ruby --yjit -v
ruby 3.3.0 (2023-12-25 revision 5124f9ac75) +YJIT [arm64-darwin23]
$ ruby --yjit -e "p RubyVM::YJIT.enabled?"
true
$ ruby -e "RubyVM::YJIT.enable; p RubyVM::YJIT.enabled?"
true
```

Эти инструкции содержат пошаговое руководство по установке additionaly Rust, настройке YJIT, установке Ruby 3.3.0 с поддержкой YJIT и проверке включения YJIT как из командной строки, так и внутри Ruby-скрипта.

С выходом Ruby 3.3.0 появились новые возможности для включения YJIT непосредственно из кода (времени выполнения) 3. Это дает разработчикам большую гибкость и контроль, позволяя им настраивать Ruby в соответствии с их конкретными потребностями.

`RubyVM::YJIT.enable if defined? RubyVM::YJIT.enable`

В заключение можно сказать, что улучшение работы с Ruby с помощью YJIT - это простой процесс, который приносит существенную пользу. Следуя этим шагам и следя за последними обновлениями Ruby, вы сможете открыть новый уровень производительности для своих приложений.
