---
title: '6 причин, почему JSON Schema стоит вашего времени'
meta_title: |
  6 Причин, Почему JSON Schema Стоит Вашего Времени - Фул...
description: >
  Сегодня мы погружаемся в удивительный мир JSON-схем, и я расскажу вам 6
  причин, почему я считаю, что это стоит вашего времени.
date: 2023-10-22T22:50:30.433Z
image: >-
  ../../assets/images/6-prichin-pochemu-json-schema-stoit-vashego-vremeni-Oct-23-2023.avif
categories:
  - Как закодить
author: Igor Gorlov
tags:
  - Json
draft: false
keywords:
  - JSON Schema
type: blog
slug: 6-prichin-pochemu-json-schema-stoit-vashego-vremeni
dateLastMod: 2024-03-09T13:08:00.095Z
lastmod: 2024-03-20T21:26:42.762Z
---

Сегодня мы погружаемся в удивительный мир JSON-схем, и я расскажу вам 6 причин, почему я считаю, что это стоит вашего времени.

Иногда, когда JSON-схема рассматривается в программных проектах, ее воспринимают как препятствие для быстрого продвижения. Я хотел бы возразить против этого, сказав, что да, создание схем для ваших данных может показаться замедляющим фактором в начале. Но как только у вас есть канонический источник правды для каждого ресурса, с которым вы работаете, последующие усилия могут значительно уменьшиться. Главным образом благодаря тому, что вы можете автоматически генерировать многое из своей схемы.

<!-- wp:rank-math/toc-block {"title":"Содержание","headings":[{"key":"f6f9ce79-65bc-4b95-8b3f-374a3b2f06b4","content":"Проверка данных","level":2,"link":"#проверка-данных","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"57c94451-2de5-4960-ab57-875a21f1b03f","content":"Автоматическая генерация пользовательского интерфейса","level":2,"link":"#автоматическая-генерация-пользовательского-интерфейса","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"cd47ce85-8399-4bfc-9247-55351359f6b0","content":"Генерация типов","level":2,"link":"#генерация-типов","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"5a9587ee-2d90-4088-8efd-9d10902fd0b3","content":"Генерация спецификации OpenAPI","level":2,"link":"#генерация-спецификации-open-api","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"d8eba540-7bb8-4c05-aefb-35d469050b10","content":"Генерация фиктивных данных","level":2,"link":"#генерация-фиктивных-данных","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"4ffe594f-bc9a-46b7-a408-cdf3dd1b2850","content":"JSON-схемы в вашей среде разработки","level":2,"link":"#json-схемы-в-вашей-среде-разработки","disable":false,"isUpdated":false,"isGeneratedLink":true}],"listStyle":"ul"} -->
<div class="wp-block-rank-math-toc-block" id="rank-math-toc"><h2>Содержание</h2><nav><ul><li class=""><a href="#проверка-данных">Проверка данных</a></li><li class=""><a href="#автоматическая-генерация-пользовательского-интерфейса">Автоматическая генерация пользовательского интерфейса</a></li><li class=""><a href="#генерация-типов">Генерация типов</a></li><li class=""><a href="#генерация-спецификации-open-api">Генерация спецификации OpenAPI</a></li><li class=""><a href="#генерация-фиктивных-данных">Генерация фиктивных данных</a></li><li class=""><a href="#json-схемы-в-вашей-среде-разработки">JSON-схемы в вашей среде разработки</a></li></ul></nav></div>
<!-- /wp:rank-math/toc-block -->

<h2 class="wp-block-heading" id="проверка-данных">Проверка данных</h2>

<!-- wp:image -->
<figure class="wp-block-image"><img src="https://i.giphy.com/media/66zVCJfiFCCX8bVUuc/giphy.gif" alt=""/></figure>
<!-- /wp:image -->

Это очевидно. Как и в случае любой схемы данных, вы можете использовать JSON-схему, чтобы удостовериться, что ваши данные соответствуют определенным структурам, используют правильные типы данных и следуют ограничениям, установленным в схеме.

В экосистеме JavaScript вы можете использовать отличный пакет AJV для проверки любого объекта JavaScript на соответствие JSON-схеме. Это особенно полезно для того, чтобы гарантировать соблюдение API-контрактов при общении с другими службами.

<h2 class="wp-block-heading" id="автоматическая-генерация-пользовательского-интерфейса">Автоматическая генерация пользовательского интерфейса</h2>

Иногда вам может потребоваться собирать данные, но вам нужно создать пользовательский интерфейс для их сбора. Начиная с JSON-схемы, вы можете использовать React JSON Schema Form (Rjsf) для автоматической генерации форм с предварительной клиентской и серверной проверкой по предоставленной схеме.

Rjsf позволяет легко создавать все необходимое для начала сбора данных. Вам нужно предоставить только схему. Он также позволяет настраивать пользовательский интерфейс на более высоком уровне для более сложных случаев.

Посмотрите их приложение-песочницу для примеров создания форм на основе схемы в короткие сроки.

<h2 class="wp-block-heading" id="генерация-типов">Генерация типов</h2>

Допустим, вы создали службу TypeScript, которая принимает некоторые входные данные. Вероятно, вы создадите типы, представляющие эти входные данные.

Имея JSON-схему, вы не только можете проверять входные данные, но и автоматически генерировать типы TypeScript из схемы.

JSON-схема может развиваться по мере изменения структуры данных. Когда вы обновляете JSON-схему, вы можете автоматически генерировать типы TypeScript, чтобы они отражали эти изменения, гарантируя, что ваш код всегда соответствует структурам данных и увеличивая обслуживаемость вашего приложения.

Вы также можете генерировать JSON-схему из ваших типов TypeScript. Это полезно, если у вас есть типы, но нет схемы, или если вы предпочли бы иметь типы как источник истины.

Вот некоторые пакеты, которые помогут вам с этим:

<h2 class="wp-block-heading" id="генерация-спецификации-open-api">Генерация спецификации OpenAPI</h2>

OpenAPI - это спецификация для HTTP API, которая позволяет нам определять, как должны вести себя наши API. Схема для API, так сказать.

Основное различие между JSON-схемой и OpenAPI заключается в том, что JSON-схема определяет данные JSON, тогда как OpenAPI описывает всее API (конечные точки, входные параметры), включая данные.

OpenAPI, как и JSON-схема, может показаться непростым для реализации, если вы его уже не используете. Однако, если вы начнете с JSON-схемы, вы можете использовать эту удобную библиотеку для генерации объекта схемы OpenAPI, который используется для определения типов данных на входе и выходе.

<h2 class="wp-block-heading" id="генерация-фиктивных-данных">Генерация фиктивных данных</h2>

Допустим, вы создали приложение, которое предоставляет доступ к некоторым данным через API, который вызывает другое приложение. Для тестирования интеграции между вашим приложением и внешним миром нам нужно предоставить образец выходных данных из нашего приложения. Часто это может быть образцом JSON, поддерживаемым нами, или, что хуже, образцом JSON, поддерживаемым владельцами другого приложения. Это не идеально, потому что оно зависит от нас (людей) информировать друг друга, когда меняется контракт.

С помощью инструментов, таких как JSON Schema Faker, мы можем генерировать фиктивные данные, которые всегда соответствуют нашей схеме. Это означает, что как только наша схема меняется, меняются и наши фиктивные данные. Это можно использовать с контрактами, зависящими от потребителя, чтобы обеспечить раннее выявление проблемных изменений в наших интеграциях с другими приложениями.

<!-- wp:image -->
<figure class="wp-block-image"><img src="https://i.giphy.com/media/eXOVOJLkK6G7S/giphy.gif" alt=""/></figure>
<!-- /wp:image -->

<h2 class="wp-block-heading" id="json-схемы-в-вашей-среде-разработки">JSON-схемы в вашей среде разработки</h2>

При наличии JSON-схемы VSCode может предоставлять автодополнение, подсветку ошибок и проверку для файлов JSON или YAML.

Это дополнительный аргумент, который побудил меня написать этот пост.

Недавно я работал над сложным приложением с низким/нулевым кодом, настроенным с использованием файлов YAML. Люди, которые писали конфигурацию, не были инженерами и полагались на все более сложный набор документации, чтобы правильно настроить систему.

Использование JSON-схем внутри VSCode позволило команде конфигурации использовать возможности автодополнения в IDE, чтобы помочь им совершать меньше ошибок при настройке системы.

Для настройки этого вам нужно указать файлы JSON-схемы и связать их с определенными шаблонами имен файлов.

Откройте вкладку “Settings”, найдите “JSON schemas” и выберите “Edit in settings.json”.

В settings.json вы можете добавить блок yaml.schemas или json.schemas в зависимости от типов файлов, которые вы хотите использовать.

Для YAML:

```yaml
  "yaml.schemas": {
    "/absolute/path/to/your/json/schema.json": "somefile.yaml" // a file pattern can be used here
}


```

Для JSON:

```json
"json.schemas": [
  {
    "fileMatch": [
      "somefile.json" // a file pattern can be used here
    ],
    "url": "file:/absolute/path/to/your/json/schema.json"
  }
]


```

Сохраните файл settings.json и перезагрузите VSCode. После этого, при открытии файла, соответствующего указанному шаблону в настройках, IDE будет использовать схему для проверки содержимого файла. 🎉

<!-- wp:image -->
<figure class="wp-block-image"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--WrpUjJlf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/83fwbjkdtoba824ca6cm.png" alt="Image description"/></figure>
<!-- /wp:image -->

Как вы можете видеть, создание и использование схем JSON при работе с данными JSON в ваших приложениях предоставляет множество преимуществ.

Спасибо за чтение!
