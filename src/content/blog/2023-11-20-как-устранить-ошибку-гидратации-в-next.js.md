---
title: –ö–∞–∫ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –æ—à–∏–±–∫—É –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏ –≤ Next.js
meta_title: –ö–∞–∫ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –æ—à–∏–±–∫—É –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏ –≤ Next.js - –§—É–ª –§—Ä–æ–Ω—Ç –î–µ–≤
description: >-
  –ï—Å–ª–∏ –≤—ã –Ω–µ–¥–∞–≤–Ω–æ –ø–µ—Ä–µ—à–ª–∏ —Å React –Ω–∞ Next.js, —Ç–æ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ —Å—Ç–∞–ª–∫–∏–≤–∞–ª–∏—Å—å —Å —Ç–∞–∫–æ–π
  –æ—à–∏–±–∫–æ–π: **–û—à–∏–±–∫–∞: Hydration failed because the initial UI does not match what
date: 2023-11-20T01:25:16.066Z
image: ../../assets/images/kak-ustranit-oshibku-gidratacii-v-js-Nov-20-2023.avif
categories:
  - –ö–∞–∫ –∑–∞–∫–æ–¥–∏—Ç—å
author: Igor Gorlov
tags:
  - Next.js
  - hydration
draft: false
type: blog
slug: kak-ustranit-oshibku-gidratacii-v-js
lastmod: 2024-03-20T21:26:43.229Z
---

–ï—Å–ª–∏ –≤—ã –Ω–µ–¥–∞–≤–Ω–æ –ø–µ—Ä–µ—à–ª–∏ —Å React –Ω–∞ Next.js, —Ç–æ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ —Å—Ç–∞–ª–∫–∏–≤–∞–ª–∏—Å—å —Å —Ç–∞–∫–æ–π –æ—à–∏–±–∫–æ–π: ‚Äù**–û—à–∏–±–∫–∞: Hydration failed because the initial UI does not match what was rendered on the server**‚Äù. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è, –ø–æ—á–µ–º—É –æ–±—ã—á–Ω–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —ç—Ç–∞ –æ—à–∏–±–∫–∞ –∏ –∫–∞–∫ –µ–µ —Ä–µ—à–∏—Ç—å.

### [](https://dev.to/chirag__dev/how-to-solve-hydration-error-in-nextjs-5e1b#what-is-hydration)–ß—Ç–æ —Ç–∞–∫–æ–µ Hydration?

–í Next.js –ø–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ó–∞—Ç–µ–º —ç—Ç–æ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–π HTML –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É. –ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ React –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–µ–π, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –µ–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π (–ø–æ —Å—É—Ç–∏, –æ–Ω –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –∫ —É–∑–ª–∞–º dom). –≠—Ç–æ –∏ –µ—Å—Ç—å Hydration.

### [](https://dev.to/chirag__dev/how-to-solve-hydration-error-in-nextjs-5e1b#why-does-this-error-occur)–ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —ç—Ç–∞ –æ—à–∏–±–∫–∞?

–í–æ –≤—Ä–µ–º—è —ç—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ React —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç –º–æ–¥–µ–ª—å —Ç–æ–≥–æ, –∫–∞–∫ –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–π HTML (—á—Ç–æ–±—ã –æ–Ω –º–æ–≥ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π Js-–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏), –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–µ—Ä—Å–∏—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–º HTML —Å —Å–µ—Ä–≤–µ—Ä–∞, –º—ã –ø–æ–ª—É—á–∞–µ–º —ç—Ç—É –æ—à–∏–±–∫—É.

### [](https://dev.to/chirag__dev/how-to-solve-hydration-error-in-nextjs-5e1b#some-scenarios-in-which-this-error-can-arise)–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å —ç—Ç–∞ –æ—à–∏–±–∫–∞:

- **–í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ API –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞/—Å—Ç—Ä–∞–Ω–∏—Ü—ã**: –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ, –ø–æ—Å–∫–æ–ª—å–∫—É API –±—Ä–∞—É–∑–µ—Ä–∞ (localStorage,sessionStorage) –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–π HTML –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ.

  ```js
  // –Ø –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∞—Ç–æ–º –≤ —Ä–∞–∑–¥–µ–ª–µ —Ä–µ—à–µ–Ω–∏–π :)
  const defaultState={
      –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:"",
      id:"",
      isLoggedIn:false
  }

  export const adminState=atom<IAdmin>({
      key: "currentAdmin",
      default: (typeof window !== 'undefined') ? (
          localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user') as string) : defaultState
      ) : defaultState
  })
  //–µ—Å–ª–∏ —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, —Ç–æ —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –æ—à–∏–±–∫–µ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏
  ```

  –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ç–¥–∞—á–∏ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –æ—à–∏–±–∫–∞ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏, —Ç–∞–∫ –∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ HTML –±—É–¥–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ HTML –±—É–¥–µ—Ç –¥—Ä—É–≥–∏–º –∏–∑-–∑–∞ localStorage.

- **–í–∞—à —Å–∏–Ω—Ç–∞–∫—Å–∏—Å HTML –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω**: –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ JSX –∫–∞–∫–∏–º-—Ç–æ —Å—Ç—Ä–∞–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–º–µ—Ä—ã :

  ```html
  <div>logout</div>

  –í–∞—à —Ç–µ–∫—Å—Ç
  ```

- **–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–æ–≤ –∏–∑–º–µ–Ω—è—é—Ç HTML –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞**.

### [](https://dev.to/chirag__dev/how-to-solve-hydration-error-in-nextjs-5e1b#solutions-for-this-error)–†–µ—à–µ–Ω–∏—è –¥–ª—è –¥–∞–Ω–Ω–æ–π –æ—à–∏–±–∫–∏:

- **–ü–µ—Ä–µ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏–∫—É —Å useEffect:**.
  –°–µ—Ä–≤–µ—Ä –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –±–ª–æ–∫–∏ useEffect –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ HTML –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞. useEffect —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º API –±—Ä–∞—É–∑–µ—Ä–∞.

  ```js
  // –Ø –∏—Å–ø–æ–ª—å–∑—É—é —É–ø–æ–º—è–Ω—É—Ç—ã–π –≤—ã—à–µ –∞—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è
  const RequireAuth: React.FC<{ children: ReactElement }> = ({ children }) => {
    const [loader, setLoader] = useState(true);
    const user = useRecoilValue(userState);
    const router = useRouter();
    useEffect(() => {
      if (user.isLoggedIn) {
        setLoader(false);
      } else router.replace('/login')
    }, []);

    return <>{!loader && children}</>;
  };
  // –ü–æ—Å–∫–æ–ª—å–∫—É user.isLoggedIn –∑–∞–≤–∏—Å–∏—Ç –æ—Ç localStorage,
  // –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º –µ–≥–æ –Ω–∞–ª–∏—á–∏–µ –≤ useEffect (–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞)
  ```

- **–û—Ç–∫–ª—é—á–∞–µ–º SSR –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞**:

  ```js
  import dynamic from 'next/dynamic';
  //–∫–æ–¥ –¥–ª—è YourComponent
  export default dynamic(() => Promise.resolve(YourComponent), { ssr: false });
  ```

- –í —Å–ª—É—á–∞–µ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–π HTML –±—É–¥–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –≤–µ—Ä—Å–∏–∏. –í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–Ω–æ –ø–æ–¥–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è –≤ —ç–ª–µ–º–µ–Ω—Ç–µ suppressHydrationWarning={true}.

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–æ–≤–µ—Ç**: –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –≤—Å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞, –ø–æ–¥—É–º–∞–π—Ç–µ –æ —Ç–æ–º, —á—Ç–æ–±—ã –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç–∏, —Ç—Ä–µ–±—É—é—â–∏–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞, –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. –î–ª—è –∏—Ö —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤—ã—à–µ –º–µ—Ç–æ–¥—ã, –≤–Ω–µ—Å—è –≤ –Ω–∏—Ö –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** –í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–π –≤—ã—à–µ —Å—Ç–∞—Ç—å–µ —è —Ö—Ä–∞–Ω—é —Ç–æ–∫–µ–Ω JWT –≤ localStorage, —á—Ç–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ö–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π. –õ—É—á—à–∏–º —Ä–µ—à–µ–Ω–∏–µ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é cookies. –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ cookies, —Ç–æ –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é getServerSideProps() –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞.

–°—á–∞—Å—Ç–ª–∏–≤–æ–≥–æ –∫–æ–¥–∏–Ω–≥–∞! üéàüéà
