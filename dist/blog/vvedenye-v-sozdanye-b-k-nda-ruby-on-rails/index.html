<!DOCTYPE html><html lang="ru"> <head><title>Введение в создание бэкэнда Ruby on Rails | Игорь Горлов - Фронтeндер</title><link rel="canonical" href="https://igorlov.ru/blog/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails"><meta name="description" content="Следуйте за моим примером в репо, в котором есть ветка решений.Итак, вы хотите стать бэкэнд инженером Ruby on Rails, да? Тогда вы пришли в нужное место."><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.5.1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ViewTransitions.astro_astro_type_script_index_0_lang.DqfSmqP7.js"></script><link rel="stylesheet" href="/_astro/_regular_.Dd2YhbvP.css" />
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw);padding-left:min(2rem,1.2125rem + 1.05vw);padding-right:min(2rem,1.2125rem + 1.05vw);padding-top:1rem;padding-bottom:1rem}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.breadcrumbs__link[data-astro-cid-vcbh62el]{border-radius:9999px;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover{--tw-bg-opacity: 1;background-color:#fce4e1;background-color:rgba(252,228,225,var(--tw-bg-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]{padding:.125rem .75rem}.breadcrumbs__link[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#6a6a6a;background-color:rgba(106,106,106,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#8a8a93;background-color:rgba(138,138,147,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}
</style>
<link rel="stylesheet" href="/_astro/_single_.CyWP_2Jq.css" />
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#020202;border-color:rgba(2,2,2,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.theme-toggle[data-v-8d8d9c54]{width:1.25rem;height:1.25rem}
.comments[data-v-533071ec]{margin:auto;margin-top:1.25rem;max-width:42rem;--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.comments:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame[data-v-533071ec]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
</style><script type="module" src="/_astro/page.CFW0rSNk.js"></script><style>[data-astro-transition-scope="astro-vgmtzcrq-1"] { view-transition-name: blog-image-vvedenye-v-sozdanye-b-k-nda-ruby-on-rails; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-14 font-inter text-white fluid:text-lg dark:bg-black"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ФCВР</a>  <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> </button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> </button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/projects" class="nav__link" data-astro-cid-7wkmezxd> Работы. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты. </a> </li> </ul> </nav> </div>  <script type="module">document.addEventListener("astro:page-load",()=>{const t=document.querySelector(".nav__open"),n=document.querySelector(".nav__close"),e=document.querySelector(".nav__container"),o=document.querySelectorAll(".nav__item");t?.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")}),n?.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")}),o.forEach(a=>{window.matchMedia("( max-width: 1024px)").matches&&a.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")})})});</script> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="IJ3dh" component-url="/_astro/ThemeToggle.kpN4JrWQ.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-rq644orq&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;ThemeToggle&quot;,&quot;value&quot;:true}"></astro-island> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <div class="blocks__container container"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <ol class="breadcrumbs__list" role="list" data-astro-cid-vcbh62el> <li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </nav>  </div> <div class="blocks__container container"> <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/учебник" class="categories__link" data-astro-cid-axzg2cw6> Учебник  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Введение в создание бэкэнда Ruby on Rails </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/rails" data-astro-cid-axzg2cw6> Rails </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 18 дек., 2023 by Игорь Горлов </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div>  <figure class="article__image" data-astro-cid-axzg2cw6> <picture> <source srcset="/_astro/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails-Dec-18-2023.VuguS4Y9_YimLd.avif" type="image/avif"><source srcset="/_astro/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails-Dec-18-2023.VuguS4Y9_Z1lYb3y.webp" type="image/webp"> <img src="/_astro/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails-Dec-18-2023.VuguS4Y9_14njb3.png" alt="Введение в создание бэкэнда Ruby on Rails" class="aspect-auto h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-vgmtzcrq-1" width="1200" height="500" decoding="async"> </picture> </figure>  <div class="article__content prose prose-zinc max-w-full dark:prose-invert prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:-mx-12 prose-figure:w-screen prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <div id="adfox_17062261612859555"></div> <script>(function(){const blockId = "adfox_17062261612859555";

	window.yaContextCb = window.yaContextCb || [];
	window.yaContextCb.push(() => {
		Ya.adfoxCode.createAdaptive(
			{
				ownerId: 1493338,
				containerId: blockId,
				params: {
					p1: 'dawgg',
					p2: 'p',
				},
			},
			['desktop', 'tablet', 'phone'],
			{
				tabletWidth: 830,
				phoneWidth: 480,
				isAutoReloads: true,
			},
		);
	});
})();</script> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Введение в создание бэкэнда Ruby on Rails&#38;url=https://igorlov.ru/blog/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails&#38;title=Введение в создание бэкэнда Ruby on Rails&#38;summary=Следуйте за моим примером в репо, в котором есть ветка решений.Итак, вы хотите стать бэкэнд инженером Ruby on Rails, да? Тогда вы пришли в нужное место.&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails&#38;media=&#38;description=Следуйте за моим примером в репо, в котором есть ветка решений.Итак, вы хотите стать бэкэнд инженером Ruby on Rails, да? Тогда вы пришли в нужное место." target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <details class="toc px-5 border border-gray-light lg:px-10 py-2 cursor-pointer"><summary class="title">Оглавление</summary><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#гемфайл">Гемфайл</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#папка-с-базой-данных---db">Папка с базой данных - db/</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#3-seedsrb-наши-посевные-данные">3. seeds.rb (наши посевные данные)</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#4-dbsqlite3---отрендеренная-база-данных">4. db.sqlite3 - (отрендеренная база данных)</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#папка-конфигураций---config">Папка конфигураций - config/</a></li></ol></details><p>Итак, вы хотите стать бэк-энд инженером Ruby on Rails, да? Тогда вы пришли в нужное место. 👊🙂</p>
<p>На момент публикации этой статьи я завершаю четвертый этап буткемпа Flatiron School по полнофункциональной разработке программного обеспечения. Четвертая фаза была посвящена теме этой статьи: Ruby on Rails. Являясь абстракцией Ruby, Rails ускоряет многие задачи, необходимые для создания базы данных на Ruby. Как лучше всего это сделать, спросите вы? Что ж, давайте узнаем! Но сначала позвольте мне вкратце рассказать о примерах данных, чтобы лучше проиллюстрировать, как устроен наш бэк-энд.</p>
<p>Я большой поклонник музыки, причем слушатель всех альбомов, поэтому я хотел бы использовать пример, когда поклонники музыки выставляют оценки определенным альбомам. Каждый любитель музыки может оценивать множество разных альбомов, и каждый альбом может быть оценен множеством разных любителей музыки. Логично, что каждый поклонник музыки может оценить каждый альбом только один раз, потому что иначе все запутается. И наконец, каждый рейтинг будет принадлежать одному поклоннику музыки и одному альбому, поэтому рейтинги будут выступать в качестве нашей объединяющей таблицы с внешним ключом для каждой из других таблиц с названиями ”поклонники музыки” и “альбомы”.</p>
<p>Таким образом, каждая из наших таблиц будет иметь такие атрибуты/столбцы:</p>
<p>Music Fans - :name</p>
<p>Альбомы - :название, :исполнитель, :год_выпуска</p>
<p>Рейтинги - :оценка, :music_fan_id, :album_id</p>
<p>Создание ассоциаций будет рассмотрено позже, а сейчас, когда мы знаем, с какими данными будем работать, давайте рассмотрим наши ресурсы Rails…</p>
<p>В приложении Ruby on Rails есть несколько важных вещей, за которыми нужно следить на самом верхнем уровне файловой иерархии:</p>
<p>Gemfile (список гемов для установки)</p>
<p>db/ (папка с базой данных)</p>
<p>config/ (папка с конфигурациями)</p>
<p>app/ (папка с приложениями)</p>
<p>Если у вас есть привычка обращать внимание на эти файлы и папки, то вас не застанут врасплох ни одна из основных проблем, связанных с созданием бэкэнда Rails!</p>
<p>У нас есть единственная команда терминала, которая создаст все вышеупомянутые ресурсы для нас, в виде:</p>
<p><code>rails g resource class_name attribute_name:attribute_type</code>.</p>
<p>…Но очень важно понимать все, что делает эта команда, и как правильно написать команду, основываясь на вашем конкретном наборе данных. Итак, давайте начнем с самого начала.</p>
<p>Давайте разделим ее по каждому ресурсу…</p>
<h2 id="гемфайл">Гемфайл<a aria-hidden="true" tabindex="-1" href="#гемфайл"><span class="icon icon-link"></span></a></h2>
<p>Как уже говорилось выше, здесь мы указываем список наших гемов, которые необходимо установить - это наши инструменты Ruby, которые облегчают нам жизнь при создании кода. Для наших целей мы хотим убедиться, что наш gemfile включает:</p>
<p><code>gem "active_model_serializers", "~> 0.10.12"</code>.</p>
<p>…А чтобы установить эти самоцветы для использования в разработке и тестировании, вводим в терминале следующее:</p>
<p><code>bundle install</code></p>
<p>ПРИМЕЧАНИЕ: Все остальные необходимые гемы должны быть включены, если вы правильно создали ваше приложение на рельсах:</p>
<p><code>rails my_music_app</code>.</p>
<p>После создания файловой структуры приложения и установки гемов мы можем приступить к созданию структуры данных.</p>
<h2 id="папка-с-базой-данных---db">Папка с базой данных - db/<a aria-hidden="true" tabindex="-1" href="#папка-с-базой-данных---db"><span class="icon icon-link"></span></a></h2>
<p>Теперь начинается самое интересное. Наша папка с базой данных будет содержать ЧЕТЫРЕ важные вещи:</p>
<p>db/migrate (папка миграций)</p>
<p>schema.rb (файл структуры базы данных, основанный на миграциях)</p>
<p>seeds.rb (посевные данные, отформатированные для schema.rb)</p>
<p>development.sqlite3 (окончательный файл базы данных с рендерингом)</p>
<p>Давайте разделим это на части…</p>
<ol>
<li>db/migrate - (миграции)</li>
</ol>
<p>С этой папки все и начинается. Наши файлы миграции устанавливают структуру данных для каждой из наших таблиц, включая название самой таблицы и метки для каждого атрибута столбца. Для каждой таблицы будут свои миграции. Для нашей таблицы Ratings (таблица join с внешними ключами) вот как выглядел бы наш начальный файл миграции, если бы мы создавали его вручную (но отложим это на минуту):</p>
<p><code>class CreateRatings &#x3C; ActiveRecord::Migration[6.1] def change create_table :ratings do |t| t.integer :score t.integer :music_fan_id t.integer :album_id end end end</code>.</p>
<ol start="2">
<li>schema.rb - (структура базы данных)</li>
</ol>
<p>Наш файл schema будет представлять собой структуру данных, полученную в результате миграций для всех наших таблиц, выступая в качестве фильтра для входящих данных. Этот файл будет выглядеть так же, как и наши миграции, но будет включать все таблицы. Чтобы создать наш файл схемы вручную (опять же, воздержитесь от этого, если не хотите попрактиковаться), нам нужно выполнить следующее в терминале:</p>
<p><code>rails db:migrate</code></p>
<p>Наш результирующий файл должен выглядеть примерно так, включая все три структуры миграции таблиц:</p>
<p><code>ActiveRecord::Schema.define(version: 2023_01_20_164246) do create_table "albums", force: :cascade do |t| t.string "title" t.string "artist" t.integer "release_year" t.datetime "created_at", precision: 6, null: false t.datetime "updated_at", precision: 6, null: false end create_table "music_fans", force: :cascade do |t| t.string "name" t.datetime "created_at", precision: 6, null: false t.datetime "updated_at", precision: 6, null: false end create_table "ratings", force: :cascade do |t| t.integer "score" t.integer "music_fan_id", null: false t.integer "album_id", null: false t.datetime "created_at", precision: 6, null: false t.datetime "updated_at", precision: 6, null: false end end</code></p>
<p>Всегда полезно дважды проверить файл схемы после выполнения rails db:migrate, чтобы убедиться, что все выглядит точно. Итак, теперь наша структура данных на месте, и мы можем засеять ею наши таблицы данных. Но мы не можем засеять наши данные без…</p>
<h2 id="3-seedsrb-наши-посевные-данные">3. seeds.rb (наши посевные данные)<a aria-hidden="true" tabindex="-1" href="#3-seedsrb-наши-посевные-данные"><span class="icon icon-link"></span></a></h2>
<p>Это файл, в котором мы устанавливаем фактические значения данных для заполнения нашей таблицы. Без файла seed мы не сможем использовать нашу схему, потому что ей не с чем будет работать. По сути, без работающего файла семян наша результирующая база данных будет состоять из пустых таблиц. Мы этого не хотим, поэтому давайте посмотрим, что нам нужно сделать, чтобы создать наши посевные данные.</p>
<p>Существует множество методов Ruby, которые мы можем использовать для создания файла посевного материала, но в этот раз мы будем придерживаться простого подхода. Если мы хотим создать посевной файл, содержащий по 3 экземпляра music_fan и album, а также 6 уникальных экземпляров рейтинга, вот как это может выглядеть:</p>
<p><code>puts "🎵 Seeding music fans..." MusicFan.create(name: "Vizmund Cygnus") MusicFan.create(name: "Cassandra Gemini") MusicFan.create(name: "Cerpin Taxt") puts "🎵 Посевная альбомов..." Album.create( title: "DAMN. COLLECTORS EDITION.", artist: "Kendrick Lamar", release_year: 2017 ) Album.create( название: "In Rainbows", исполнитель: "Radiohead", год_выпуска: 2007 ) Album.create( название: "Monsters Are People", артист: "Chess at Breakfast", release_year: 2021 ) puts "🎵 Посевные рейтинги..." Rating.create(score: 10, music_fan_id: 1, album_id: 2) Rating.create(score: 9, music_fan_id: 3, album_id: 1) Rating.create(score: 8, music_fan_id: 2, album_id: 3) Rating.create(score: 7, music_fan_id: 3, album_id: 3) Rating.create(score: 6, music_fan_id: 2, album_id: 2) Rating.create(score: 5, music_fan_id: 1, album_id: 1) puts "Done seeding!"</code>.</p>
<p>_PRO TIP: Если вы хотите попрактиковаться в использовании Faker Gem для автоматизации некоторых деталей вашего файла семян, _</p>
<p>Как вы можете видеть, наши данные семян построены с использованием довольно базового формата объектов Ruby, с ключами, соответствующими атрибутам нашей таблицы, и уникальными значениями для этих ключей при каждом новом создании экземпляра. И, к счастью, нам не нужно задерживаться с созданием этого файла семян, поскольку нам всегда придется создавать его вручную.</p>
<p>ПРИМЕЧАНИЕ: При каждом создании экземпляру присваивается id в соответствии с порядком его создания, поэтому первый MusicFan (Vizmund Cygnus) будет иметь id 1, а второй (Cassandra Gemini) - id 2 и так далее…</p>
<p>Теперь, когда мы создали подробные исходные данные, можно приступать к посеву и рендерингу нашей базы данных.</p>
<h2 id="4-dbsqlite3---отрендеренная-база-данных">4. db.sqlite3 - (отрендеренная база данных)<a aria-hidden="true" tabindex="-1" href="#4-dbsqlite3---отрендеренная-база-данных"><span class="icon icon-link"></span></a></h2>
<p>Предполагая, что наши посевные данные и миграции отформатированы правильно, мы можем запустить эту команду в терминале:</p>
<p><code>rails db:seed</code></p>
<p>После запуска у нас должен появиться файл development.sqlite3 в папке db/. Щелкните на нем правой кнопкой мыши и выберите ”Открыть базу данных”. Это откроет проводник SQLite Explorer в левом нижнем углу окна VS Code. ПРИМЕЧАНИЕ: Убедитесь, что вы установили SQLite как расширение в VS Code, иначе это не сработает!</p>
<p>Если вы все сделали правильно до этого момента, у вас должно быть три таблицы. Например, таблица альбомов должна выглядеть следующим образом:</p>
<figure class="igorlov-figure"><img  src="/_astro/kt7jqjz3alpe6sdu4fne.OX0oAXUe_1Kcw6c.webp" alt="kt7jqjz3alpe6sdu4fne.PNG" width="880" height="111" loading="lazy" decoding="async"><figcaption>kt7jqjz3alpe6sdu4fne.PNG</figcaption></figure>
<p>Если в процессе разработки возникнут какие-либо странные проблемы с базой данных, вы всегда можете попробовать выполнить эту команду:</p>
<p><code>rails db:reset</code>.</p>
<p>…что приведет к сбросу базы данных (убедитесь, что вы действительно хотите сбросить ее, прежде чем делать это!) и повторной загрузке.</p>
<p>Теперь, когда у нас есть отрендеренная база данных, мы можем перейти к использованию наших данных!</p>
<h2 id="папка-конфигураций---config">Папка конфигураций - config/<a aria-hidden="true" tabindex="-1" href="#папка-конфигураций---config"><span class="icon icon-link"></span></a></h2>
<p>В нашей папке config, к счастью, есть только один файл, за которым нам нужно внимательно следить: routes.rb</p>
<p>В этом файле мы можем определить, какие CRUD-действия должны быть разрешены для наших различных контроллеров, а также настроить пользовательские маршруты для таких вещей, как аутентификация пользователей. Мы не будем рассматривать это очень подробно, но вот как будет выглядеть наш базовый файл routes, если у нас будет полный CRUD для альбомов и музыкальных фанатов, но только индексирование, показ, создание и уничтожение (за исключением обновления) для наших рейтингов:</p>
<p><code>Rails.application.routes.draw do resources :ratings, only: [:index, :show, :create, :destroy] resources :music_fans resources :albums end</code>.</p>
<p>Это гарантирует, что у нас не будет неиспользуемых маршрутов на заднеundefinedute_name:attribute_type —no-test-framework`.</p>
<p>ПРИМЕЧАНИЕ: Включите —no-test-framework, если у вас уже есть testing файлов и хотите избежать их перезаписи.</p>
<p>А теперь наши конкретные примеры классов:</p>
<p>Рейтинг</p>
<p><code>rails g resource rating score:integer music_fan:belongs_to</code></p>
<p>MusicFan</p>
<p><code>rails g resource music_fan name</code></p>
<p>Альбом</p>
<p><code>rails g resource album title artist</code></p>
<p>ПРИМЕЧАНИЕ: По умолчанию тип_атрибута - строка, поэтому, если атрибут не является чем-то другим, например, целым числом, вам не нужно включать тип в генератор ресурсов.</p>
<p>ДРУГОЕ ПРИМЕЧАНИЕ: Что касается ассоциаций, мы можем включить belongs_to только в генератор ресурсов, а ассоциации has_many нам придется создавать вручную в отдельных моделях.</p>
<p>Как вы увидите после выполнения в терминале, эта команда создает ВСЕ ресурсы, которые мы рассмотрели в этой статье. Очень круто! Если вы выполнили эту команду правильно, то вы уже на пути к кастомизации вашего бэкэнда.</p>
<p>Надеюсь, эта статья была полезной, и как всегда…</p>
<p>Счастливого кодинга!</p>
<p><a href="https://dev.to/mikedavissoftware/intro-to-building-a-ruby-on-rails-back-end-3nlk" rel="noopener noreferrer nofollow" target="_blank">Источник</a></p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Введение в создание бэкэнда Ruby on Rails&#38;url=https://igorlov.ru/blog/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails&#38;title=Введение в создание бэкэнда Ruby on Rails&#38;summary=Следуйте за моим примером в репо, в котором есть ветка решений.Итак, вы хотите стать бэкэнд инженером Ruby on Rails, да? Тогда вы пришли в нужное место.&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/vvedenye-v-sozdanye-b-k-nda-ruby-on-rails&#38;media=&#38;description=Следуйте за моим примером в репо, в котором есть ветка решений.Итак, вы хотите стать бэкэнд инженером Ruby on Rails, да? Тогда вы пришли в нужное место." target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/yzuchaem-godot-4-delaia-rolevuiu-yhru-chast-24-yspravlenye-oshybok" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> Изучаем Godot 4, делая ролевую игру - часть 24: Исправление ошибок </a> <a href="/blog/yntehratsyia-bun-s-vite-ruby-dlia-molnyenosnoi-sborky-frontendov" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> Интеграция Bun с Vite Ruby для молниеносной сборки фронтендов </a> </nav>  </div> </article> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.svLg6TOn.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> <astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.BwogX8bT.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  </div> <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ФCВР</a>  <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>