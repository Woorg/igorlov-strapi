<!DOCTYPE html><html lang="ru"> <head><title>Создание чатбота с искусственным интеллектом с помощью FastChat и JavaScript | Игорь Горлов - Фронтeндер</title><link rel="canonical" href="https://igorlov.ru/blog/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript"><meta name="description" content="Согласно недавнему исследованию Salesforce, 23 % сервисных компаний в настоящее время используют чатботы, и ожидается, что в ближайшие восемнадцать месяцев эт"><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.5.1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_regular_.uIaUWrkB.css" />
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw);padding-left:min(2rem,1.2125rem + 1.05vw);padding-right:min(2rem,1.2125rem + 1.05vw);padding-top:1rem;padding-bottom:1rem}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.breadcrumbs__link[data-astro-cid-vcbh62el]{border-radius:9999px;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover{--tw-bg-opacity: 1;background-color:#fce4e1;background-color:rgba(252,228,225,var(--tw-bg-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]{padding:.125rem .75rem}.breadcrumbs__link[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#6a6a6a;background-color:rgba(106,106,106,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#8a8a93;background-color:rgba(138,138,147,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}
</style>
<link rel="stylesheet" href="/_astro/_single_.CyWP_2Jq.css" />
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#020202;border-color:rgba(2,2,2,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.comments[data-v-533071ec]{margin:auto;margin-top:1.25rem;max-width:42rem;--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.comments:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame[data-v-533071ec]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
.theme-toggle[data-v-8d8d9c54]{width:1.25rem;height:1.25rem}
</style><script type="module" src="/_astro/hoisted.DYPnEDpO.js"></script><style>[data-astro-transition-scope="astro-vgmtzcrq-1"] { view-transition-name: blog-image-sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-14 font-inter text-dark fluid:text-lg dark:bg-black dark:text-white"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ИГ ФCВР</a>  <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> </button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> </button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/projects" class="nav__link" data-astro-cid-7wkmezxd> Работы. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты. </a> </li> </ul> </nav> </div>   <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="IJ3dh" component-url="/_astro/ThemeToggle.kpN4JrWQ.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-rq644orq&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;ThemeToggle&quot;,&quot;value&quot;:true}"></astro-island> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <div class="blocks__container container"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <ol class="breadcrumbs__list" role="list" data-astro-cid-vcbh62el> <li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </nav>  </div> <div class="blocks__container container"> <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/учебник" class="categories__link" data-astro-cid-axzg2cw6> Учебник  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Создание чатбота с искусственным интеллектом с помощью FastChat и JavaScript </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/python" data-astro-cid-axzg2cw6> Python </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 18 дек., 2023 by Игорь Горлов </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div>  <figure class="article__image" data-astro-cid-axzg2cw6> <picture> <source srcset="/_astro/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript-Dec-18-2023.DcVU-fCR_Z1zfoEz.avif" type="image/avif"><source srcset="/_astro/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript-Dec-18-2023.DcVU-fCR_1MPYl3.webp" type="image/webp"> <img src="/_astro/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript-Dec-18-2023.DcVU-fCR_1TC40N.png" alt="Создание чатбота с искусственным интеллектом с помощью FastChat и JavaScript" class="aspect-auto h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-vgmtzcrq-1" width="1200" height="500" decoding="async"> </picture> </figure>  <div class="article__content prose prose-zinc max-w-full dark:prose-invert prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:-mx-12 prose-figure:w-screen prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <div id="adfox_17062261612859555"></div> <script>(function(){const blockId = "adfox_17062261612859555";

	window.yaContextCb = window.yaContextCb || [];
	window.yaContextCb.push(() => {
		Ya.adfoxCode.createAdaptive(
			{
				ownerId: 1493338,
				containerId: blockId,
				params: {
					p1: 'dawgg',
					p2: 'p',
				},
			},
			['desktop', 'tablet', 'phone'],
			{
				tabletWidth: 830,
				phoneWidth: 480,
				isAutoReloads: true,
			},
		);
	});
})();</script> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Создание чатбота с искусственным интеллектом с помощью FastChat и JavaScript&#38;url=https://igorlov.ru/blog/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript&#38;title=Создание чатбота с искусственным интеллектом с помощью FastChat и JavaScript&#38;summary=Согласно недавнему исследованию Salesforce, 23 % сервисных компаний в настоящее время используют чатботы, и ожидается, что в ближайшие восемнадцать месяцев эт&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript&#38;media=&#38;description=Согласно недавнему исследованию Salesforce, 23 % сервисных компаний в настоящее время используют чатботы, и ожидается, что в ближайшие восемнадцать месяцев эт" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <details class="toc px-5 border border-gray-light lg:px-10 py-2 cursor-pointer"><summary class="title">Содержание</summary><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#настройка-fastchat">Настройка FastChat</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#выбор-подходящей-языковой-модели">Выбор подходящей языковой модели</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#вот-сравнение-некоторых-коммерчески-доступных-llm">Вот сравнение некоторых коммерчески доступных LLM:</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#запуск-контроллера-fastchat">Запуск контроллера FastChat</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#создание-пользовательского-интерфейса">Создание пользовательского интерфейса</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#создание-простого-веб-приложения-для-чат-бота">Создание простого веб-приложения для чат-бота</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#заключение">Заключение</a></li></ol></details><p>Согласно недавнему исследованию Salesforce, 23 % сервисных компаний в настоящее время используют чат-боты, и ожидается, что в ближайшие восемнадцать месяцев этот процент более чем удвоится. FastChat - это платформа для обучения, обслуживания и оценки больших языковых моделей, которые стоят за многими из этих чат-ботов.</p>
<p>В этой статье мы рассмотрим, как использовать FastChat для реализации простого чат-бота с искусственным интеллектом в веб-приложении на JavaScript, что является лишь одной из функциональных возможностей, которые FastChat предоставляет в рамках своей уникальной архитектуры.</p>
<h2 id="настройка-fastchat">Настройка FastChat<a aria-hidden="true" tabindex="-1" href="#настройка-fastchat"><span class="icon icon-link"></span></a></h2>
<p>FastChat доступен как библиотека Python с открытым исходным кодом и может быть установлен с помощью <code>pip</code>:</p>
<p><code>pip3 install "fschat[model_worker,webui]"</code></p>
<p>Приведенная выше команда устанавливает <code>fschat</code> вместе с двумя дополнительными модулями: <code>model_worker</code> для работы с различными моделями, которые может обслуживать FastChat, и <code>webui</code> для размещения веб-интерфейса для взаимодействия с моделью чатбота.</p>
<p>Платформа FastChat предоставляет доступ к нескольким моделям чатботов, и каждая модель назначается работнику (отсюда и название <code>model_worker</code>). Доступ к моделям чатботов осуществляется через полностью совместимый с OpenAI API-сервер и может быть использован непосредственно с библиотекой openai-python.</p>
<p>Это довольно продуманный дизайн; вы можете протестировать различные модели в своем чатботе, просто изменив URL, который вы используете для обращения к различным работникам. Самое главное, что любое существующее приложение, использующее API OpenAI, может легко использовать сервер FastChat без каких-либо изменений в исходном коде.</p>
<h2 id="выбор-подходящей-языковой-модели">Выбор подходящей языковой модели<a aria-hidden="true" tabindex="-1" href="#выбор-подходящей-языковой-модели"><span class="icon icon-link"></span></a></h2>
<p>Слово “large” в слове large language model (LLM) - это намек на то, что нам потребуется большой объем памяти и вычислительной мощности для обучения новой модели для генеративного вывода. К счастью, существует довольно обширный список языковых моделей, совместимых с FastChat.</p>
<p>Чтобы выбрать модель, наиболее подходящую под требования вашего проекта, учитывайте наличие аппаратных ресурсов (GPU, память GPU и/или память CPU) и то, сколько денег вы хотите вложить в облачный сервис.</p>
<p>При выборе модели также учитывайте требования к системе, которую вы собираетесь разрабатывать, с точки зрения поколения, на которое вы нацелены.</p>
<h2 id="вот-сравнение-некоторых-коммерчески-доступных-llm">Вот сравнение некоторых коммерчески доступных LLM:<a aria-hidden="true" tabindex="-1" href="#вот-сравнение-некоторых-коммерчески-доступных-llm"><span class="icon icon-link"></span></a></h2>
<p>GPT-3: Эта универсальная языковая модель от OpenAI отлично справляется с широким спектром задач по обработке естественного языка. Ее сильной стороной является генерация связного и контекстуально релевантного текста, что делает ее подходящей для таких задач, как создание контента, заполнение текста, создание чат-ботов и творческих текстов. Обширная база знаний позволяет ему отвечать на вопросы и давать объяснения в различных областях BERT (Bidirectional Encoder Representations from Transformers): Эта модель, разработанная компанией Google, известна своим пониманием контекста и контекстно-зависимых значений слов. Двунаправленное обучение позволяет ей улавливать нюансы языка, что делает ее отличным выбором для задач, требующих глубокого понимания. Эта модель особенно эффективна для таких задач, как анализ настроения, распознавание именованных сущностей, классификация текстов и генерация ответов T5 (Text-to-Text Transfer Transformer): Эта модель, также разработанная Google, предназначена для решения широкого спектра задач обработки естественного языка с помощью единой схемы преобразования ”текст в текст”. Она рассматривает каждую задачу как проблему генерации текста, включая резюмирование, перевод, классификацию и многое другое. Такой подход упрощает архитектуру модели и делает ее адаптируемой для решения различных задач</p>
<p>Для обучающей части этой статьи мы будем использовать модель <code>google/flan-t5-large</code>. Она комфортно работает на среднем ноутбуке, но достаточно мощная для плодотворного взаимодействия. Она вдохновлена моделью T5 от Google, но я могу запустить ее на среднем ноутбуке (так что она не такая уж и большая 🙂 ).</p>
<p>Для начала установите модель с помощью следующей команды:</p>
<p><code>python3 -m fastchat.serve.model_worker --model-path google/flan-t5-large</code></p>
<p>Эта команда устанавливает <code>model_worker</code>, который будет загружать веса модели и развертывать подходящий API для взаимодействия с указанной моделью. Приведенная выше командная строка принимает <code>--device cpu</code> в качестве дополнительного параметра, позволяя модели работать на CPU и полагаться только на оперативную память, а не на VRAM вашего GPU.</p>
<p>Далее используйте следующую команду, чтобы запустить модель в интерактивном режиме прямо в командной строке:</p>
<p><code>python3 -m fastchat.serve.cli --model-path google/flan-t5-large --device cpu </code></p>
<h2 id="запуск-контроллера-fastchat">Запуск контроллера FastChat<a aria-hidden="true" tabindex="-1" href="#запуск-контроллера-fastchat"><span class="icon icon-link"></span></a></h2>
<p>Контроллер является центральным элементом архитектуры FastChat. Он организует обращения к экземплярам любой запущенной вами <code>model_worker</code> и проверяет состояние этих экземпляров с помощью периодического сердцебиения.</p>
<p>Этот механизм хорошо показан на следующей диаграмме из репозитория FastChat GitHub:</p>
<p>Веб-интерфейс для рабочих FastChat представляет собой определенный сервер Gradio, на котором размещены все компоненты пользовательского интерфейса, необходимые для взаимодействия с моделями. Контроллерr - это компонент, который отображает интерфейс OpenAI API и взаимодействует с различными рабочими, как показано на схеме выше.</p>
<p>Механизм контроллера не зависит от типа используемого вами рабочего: допустимы как локальные, так и облачные рабочие. Используйте следующую команду для запуска контроллера, который будет слушать подключение <code>model_worker</code>:</p>
<p><code>python3 -m fastchat.serve.controller</code></p>
<p>Контроллер будет использовать виртуальный сервер <code>http://localhost:21001/</code> для обработки соединения до тех пор, пока будет доступен новый <code>модель_работника</code>.</p>
<h2 id="создание-пользовательского-интерфейса">Создание пользовательского интерфейса<a aria-hidden="true" tabindex="-1" href="#создание-пользовательского-интерфейса"><span class="icon icon-link"></span></a></h2>
<p>Самый быстрый способ создать пользовательский интерфейс чатбота - использовать модуль <code>webui</code>. Этот модуль использует Gradio, библиотеку веб-компонентов, разработанную для упрощения развертывания пользовательского интерфейса для взаимодействия с конвейерами искусственного интеллекта и общения с чатботами.</p>
<p>Модуль <code>webui</code>, доступный в файле <code>gradio_web_server.py</code> в репозитории FastChat, предоставляет простой пользовательский интерфейс, который будет обращаться к правильной <code>model_worker</code>:</p>
<p>Веб-приложение будет доступно на <code>http://localhost:7860/</code> и будет обрабатывать взаимодействие с моделью.</p>
<h2 id="создание-простого-веб-приложения-для-чат-бота">Создание простого веб-приложения для чат-бота<a aria-hidden="true" tabindex="-1" href="#создание-простого-веб-приложения-для-чат-бота"><span class="icon icon-link"></span></a></h2>
<p>Давайте создадим простое веб-приложение, написанное на JavaScript, которое использует OpenAI API, размещенный на FastChat.</p>
<p>Как и следовало ожидать, нам понадобится <code>model_worker</code>, а также контроллер для работы с ним. На этот раз мы будем использовать <code>openai_api_server</code> для размещения OpenAI API. Это будет полноценный OpenAI API, но, поскольку мы разместим его на нашем оборудовании с предварительно обученной моделью, он не потребует ключа API.</p>
<p>Код для этого примера доступен на GitHub. Три Python-скрипта должны быть запущены каждый в своем окне оболочки.</p>
<p>Сначала запустите контроллер:</p>
<p><code>python3 -m fastchat.serve.controller</code></p>
<p>Затем запустите рабочий(ые) модуль(ы):</p>
<p><code>python3 -m fastchat.serve.model_worker --model-path google/flan-t5-large</code></p>
<p>Наконец, запустите сервер RESTful API:</p>
<p><code>python3 -m fastchat.serve.openai_api_server --host localhost --port 8000</code></p>
<p>Теперь давайте протестируем сервер API. После запуска сервера API OpenAI вы сможете взаимодействовать с ним по адресу <code>http://localhost:8000</code>.</p>
<p>Для проверки достаточно выполнить быстрый <code>curl</code>:</p>
<p><code>curl http://localhost:8000/v1/chat/completions -H "Content-Type: application/json" -d '{"model": "google/flan-t5-large", "messages": [{ "role": "user", "content": "Hello! What is your name?"}] }''</code></p>
<p>В директории <code>/node-webui</code> вы найдете единственный файл <code>index.html</code>, содержащий минимальное количество кода, необходимого для взаимодействия с OpenAI API через пользовательский интерфейс с помощью простого JavaScript:</p>
<p>Вот соответствующий код:</p>
<p><code>const apiKey = "YOUR_OPENAI_API_KEY"; ... try { const response = await fetch('http://localhost:8000/v1/completions', { method: 'POST', headers: { 'Content-Type': 'application/json', 'Authorization': </code>Bearer ${apiKey}<code> }, body: JSON.stringify({ model: "flan-t5-large", prompt: input, max_tokens: 50 }) });</code></p>
<p>Интерфейс может быть не очень интересным, но главное здесь - взаимодействие с API OpenAI. Как вы можете видеть, здесь есть простой вызов API с передачей стандартных параметров API.</p>
<p>В частности, параметр model должен содержать имя модели, к которой мы хотим обратиться. Оно будет передано контроллеру, чтобы передать вызов соответствующей <code>worker_model</code>.</p>
<p>В заголовке есть еще один параметр, поле <code>Authorization</code>, которое в стандартном OpenAI содержит ключ API, который нам придется купить. В случае с этим демо этот API-ключ - просто строка, которая никак не будет использоваться, поскольку модель работает только на нашей инфраструктуре (в моем случае это мой ноутбук).</p>
<h2 id="заключение">Заключение<a aria-hidden="true" tabindex="-1" href="#заключение"><span class="icon icon-link"></span></a></h2>
<p>FastChat - это замечательный пакет, предназначенный для бенчмаркинга, взаимодействия и экспериментов с множеством LLM. Он предлагает быстрый способ создания веб-интерфейса чата с помощью Gradio, стандартного фреймворка для создания веб-приложений машинного обучения.</p>
<p>FastChat полезен для тестирования модели, но в самом общем случае, когда вы размещаете собственное приложение, вы также можете получить соответствующий OpenAI API, который будет поддерживать любой уже существующий код, совместимый с ним.</p>
<p>Архитектура FastChat также особенно эффективна с точки зрения расширения: можно разместить больше LLM, чтобы тестировать их бок о бок на одних и тех же входных данных, или, например, иметь специализированные LLM, которые можно оркестровать для выполнения определенной задачи.</p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Создание чатбота с искусственным интеллектом с помощью FastChat и JavaScript&#38;url=https://igorlov.ru/blog/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript&#38;title=Создание чатбота с искусственным интеллектом с помощью FastChat и JavaScript&#38;summary=Согласно недавнему исследованию Salesforce, 23 % сервисных компаний в настоящее время используют чатботы, и ожидается, что в ближайшие восемнадцать месяцев эт&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/sozdanye-chatbota-s-yskusstvenn-m-yntellektom-s-pomoschiu-fastchat-y-javascript&#38;media=&#38;description=Согласно недавнему исследованию Salesforce, 23 % сервисных компаний в настоящее время используют чатботы, и ожидается, что в ближайшие восемнадцать месяцев эт" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/sozdanye-prylozhenyia-ocr-s-pomoschiu-polnofunktsyonalnoho-python-framework-reflex" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> Создание приложения OCR с помощью полнофункционального Python Framework Reflex </a> <a href="/blog/sozdanye-veb-prylozhenyia-s-pomoschiu-django" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> Создание веб-приложения с помощью Django </a> </nav>  </div> </article> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.svLg6TOn.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> <astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.BwogX8bT.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  </div> <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ИГ ФCВР</a>  <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>