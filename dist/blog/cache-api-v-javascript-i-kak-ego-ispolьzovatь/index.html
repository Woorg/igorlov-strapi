<!DOCTYPE html><html lang="ru"> <head><title>Cache API В JavaScript И Как Его Использовать - Фул Фронт...
</title><link rel="canonical" href="https://igorlov.ru/blog/cache-api-v-javascript-i-kak-ego-ispol%D1%8Czovat%D1%8C"><meta name="description" content="Кэширование подразумевает хранение часто используемых данных на быстро доступном носителе, например в памяти, чтобы последующие запросы на те же данные...
"><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.10.0"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_regular_.Dg72Zwgc.css">
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#0d52a1;color:rgba(13,82,161,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw)}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.container[data-astro-cid-vcbh62el]{padding:min(2rem,1.2125rem + 1.05vw)}.list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.link[data-astro-cid-vcbh62el]{font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;padding:.125rem .75rem;font-size:min(1.5rem,1.1625rem + .45vw);line-height:var(--tw-lh)}
</style>
<link rel="stylesheet" href="/_astro/_single_.CzD8Xhhr.css">
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#27292d;border-color:rgba(39,41,45,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.comments[data-v-f9c4118f]{margin:auto;margin-top:1.25rem;width:100%;--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.comments:where([class=dark][data-v-f9c4118f],[class=dark] *[data-v-f9c4118f]){--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.giscus-frame[data-v-f9c4118f]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-f9c4118f],[class=dark] *[data-v-f9c4118f]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
</style><script type="module" src="/_astro/hoisted.CUFolni_.js"></script><style>[data-astro-transition-scope="astro-xdjatz7t-1"] { view-transition-name: blog-image-cache-api-v-javascript-i-kak-ego-ispol\44Czovat\44C; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-16 font-inter text-blue fluid:text-lg lg:pt-24 dark:bg-black dark:text-white"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-medium lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-blue dark:text-white" aria-label="logo" data-astro-cid-ijoll5s5> <svg width="1.44em" height="1em" viewBox="0 0 5660 3931" class="icon" data-astro-cid-ijoll5s5 data-icon="logo-one">  <symbol id="ai:local:logo-one"><g fill="currentColor"><path d="M1198.57 596.749c0 329.575-267.171 596.751-596.747 596.751-329.575 0-596.749-267.176-596.749-596.751S272.248 0 601.823 0c329.576 0 596.747 267.174 596.747 596.749Z"/><circle cx="3035.75" cy="617.751" r="596.749" transform="rotate(-90 3035.75 617.751)"/><path d="M3035.75 2736.81c329.57 0 596.75 267.18 596.75 596.75 0 329.58-267.18 596.75-596.75 596.75-329.58 0-596.75-267.17-596.75-596.75 0-329.57 267.17-596.75 596.75-596.75Z"/><circle cx="596.749" cy="1964.8" r="596.749"/><path d="M1193.5 3332.87c0 329.57-267.176 596.75-596.751 596.75S0 3662.44 0 3332.87c0-329.58 267.174-596.75 596.749-596.75 329.575 0 596.751 267.17 596.751 596.75Z"/><circle cx="5062.46" cy="617.751" r="596.749" transform="rotate(-90 5062.46 617.751)"/><circle cx="5062.46" cy="3333.56" r="596.749" transform="rotate(-90 5062.46 3333.56)"/></g></symbol><use xlink:href="#ai:local:logo-one"></use>  </svg>  </a> <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> Меню</button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> Закрыть</button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты </a> </li> </ul> </nav> </div>   <!-- <ThemeToggle client:only /> --> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <div class="container" data-astro-cid-vcbh62el> <ol class="list" role="list" data-astro-cid-vcbh62el> <li class="item" role="listitem" data-astro-cid-vcbh62el> <a class="link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="item" role="listitem" data-astro-cid-vcbh62el> <a class="link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </div> </nav>  <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <article data-astro-cid-axzg2cw6> <figure class="article__image" data-astro-cid-axzg2cw6> <picture data-astro-cid-axzg2cw6> <source srcset="/_astro/cache-api-v-javascript-i-kak-ego-ispol%D1%8Czovat%D1%8C-Oct-29-2023.CrkeBt4-_ZSTXKv.avif" type="image/avif"><source srcset="/_astro/cache-api-v-javascript-i-kak-ego-ispol%D1%8Czovat%D1%8C-Oct-29-2023.CrkeBt4-_Z1wm0oE.webp" type="image/webp"> <img src="/_astro/cache-api-v-javascript-i-kak-ego-ispol%D1%8Czovat%D1%8C-Oct-29-2023.CrkeBt4-_509IU.png" alt="Cache API в JavaScript и как его использовать" class="aspect-video h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-xdjatz7t-1" width="1120" height="580" decoding="async"> </picture> </figure> </article> <div class="container" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/учебник" class="categories__link" data-astro-cid-axzg2cw6> Учебник  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Cache API в JavaScript и как его использовать </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/cache-api" data-astro-cid-axzg2cw6> Cache Api </a> </li><li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/javascript" data-astro-cid-axzg2cw6> JavaScript </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 29 окт., 2023 by Igor Gorlov </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div> <div class="article__content prose prose-zinc max-w-full break-words text-blue dark:prose-invert prose-headings:text-blue prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <!-- <TextAds /> --> <!-- <AdfoxTocAds blockId="adfox_17062261612859555" /> --> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/cache-api-v-javascript-i-kak-ego-ispolьzovatь" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/cache-api-v-javascript-i-kak-ego-ispolьzovatь" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Cache API в JavaScript и как его использовать&url=https://igorlov.ru/blog/cache-api-v-javascript-i-kak-ego-ispolьzovatь" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&url=https://igorlov.ru/blog/cache-api-v-javascript-i-kak-ego-ispolьzovatь&title=Cache API в JavaScript и как его использовать&summary=Кэширование подразумевает хранение часто используемых данных на быстро доступном носителе, например в памяти, чтобы последующие запросы на те же данные...
&source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/cache-api-v-javascript-i-kak-ego-ispolьzovatь&media=&description=Кэширование подразумевает хранение часто используемых данных на быстро доступном носителе, например в памяти, чтобы последующие запросы на те же данные...
" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <details open class="toc border-b border-blue text-blue fluid:p-8 overflow-auto cursor-pointer bg-box"><summary class="toc__title text-xl font-medium">Содержание</summary><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#проверка-поддержки-cache-api">Проверка поддержки Cache API</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#открытие-кэша">Открытие кэша</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#добавление-ресурсов-в-кэш">Добавление ресурсов в кэш</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="text-blue text-blue-h3" href="#cacheadd">Cache.add()</a></li><li class="toc-item toc-item-h3"><a class="text-blue text-blue-h3" href="#cacheaddall">Cache.addAll()</a></li><li class="toc-item toc-item-h3"><a class="text-blue text-blue-h3" href="#cacheput">Cache.put()</a></li></ol></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#извлечение-ресурсов-из-кэша">Извлечение ресурсов из кэша</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#удаление-ресурсов-из-кэша">Удаление ресурсов из кэша</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#заключение">Заключение</a></li></ol></details open><p>Кэширование подразумевает хранение часто используемых данных на быстро доступном носителе, например в памяти, чтобы последующие запросы на те же данные обслуживались быстро и не требовали полного извлечения их из источника. В этой статье рассказывается о Cache API JavaScript, с помощью которого можно повысить производительность своих сайтов.</p>
<p>Cache API - это API браузера, который предоставляет разработчикам возможность хранить и извлекать данные в кэше. Впервые он был представлен в 2015 году как часть API Service Worker, который позволяет веб-разработчикам писать сценарии, выполняющиеся в фоновом режиме на веб-странице и взаимодействующие с сетевыми запросами браузера.</p>
<p>Cache API позволяет разработчикам кэшировать веб-ресурсы, такие как HTML-страницы, файлы JavaScript, изображения и другие активы, чтобы обеспечить быстрый и эффективный доступ к ним. Это полезно для прогрессивных веб-приложений (PWA), которые в значительной степени полагаются на кэширование для обеспечения быстрого и отзывчивого пользовательского опыта.</p>
<p>В веб-разработке производительность является важным аспектом положительного пользовательского опыта. Одним из способов повышения производительности является использование Cache API в JavaScript. Этот API позволяет разработчикам хранить веб-ресурсы, такие как изображения, шрифты и скрипты, в кэше браузера пользователя, сокращая количество запросов к серверу и улучшая время загрузки. Он предоставляет простой интерфейс для хранения и извлечения сетевых ресурсов, а также возможность управления и удаления ресурсов из кэша. В этой статье вы узнаете, как использовать Cache API для хранения и извлечения ресурсов из кэша.</p>
<h2 id="проверка-поддержки-cache-api">Проверка поддержки Cache API<a aria-hidden="true" tabindex="-1" href="#проверка-поддержки-cache-api"><span class="icon icon-link"></span></a></h2>
<p>Cache API поддерживается в большинстве современных браузеров, включая Chrome, Firefox, Safari и Edge. Перед использованием Cache API необходимо проверить, поддерживает ли его браузер. Чтобы проверить, поддерживает ли браузер Cache API, можно воспользоваться приведенным ниже кодом:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#A6ACCD">if (</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">caches</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> in</span><span style="color:#E4F0FB"> window</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	// Cache API is supported</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	//You can add your code here</span></span>
<span class="line"><span style="color:#A6ACCD">} else {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	// Cache API is not supported</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Приведенный выше код проверяет, доступен ли объект caches в глобальном объекте окна. Если он есть, то браузер поддерживает Cache API.</p>
<p>Примечание: Cache API не всегда доступен в каждом браузере или среде. Причины, по которым Cache API может быть недоступен, следующие:</p>
<ul>
<li>Настройки браузера</li>
<li>Ограничения безопасности</li>
<li>Поддержка браузера</li>
</ul>
<p>В тех случаях, когда Cache API недоступен, разработчики могут использовать другие механизмы кэширования, например локальное хранилище, для хранения данных на стороне клиента. Также для хранения данных на стороне сервера можно использовать серверные решения для кэширования, например Redis. Другой вариант — использование сторонних библиотек, обеспечивающих подобный механизм кэширования и совместимых с широким спектром браузеров. Такие библиотеки помогают преодолеть разрыв между различными браузерами и средами. Для пользователей, не имеющих доступа к Cache API или другим механизмам кэширования, всегда стоит предусмотреть отличные варианты отката. Это может быть использование значений по умолчанию или получение данных с сервера, если кэш недоступен. Также следует использовать правильные методы обработки ошибок, например, записывать их в консоль.</p>
<h2 id="открытие-кэша">Открытие кэша<a aria-hidden="true" tabindex="-1" href="#открытие-кэша"><span class="icon icon-link"></span></a></h2>
<p>Для открытия кэша мы используем метод caches.open(). Этот метод принимает в качестве параметра строку, представляющую собой имя кэша, который мы хотим открыть. Если кэш не существует, то он будет создан. Приведем пример:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#E4F0FB">caches</span></span>
<span class="line"><span style="color:#A6ACCD">	.</span><span style="color:#E4F0FBD0">open</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">my-cache</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">	.</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">(</span><span style="color:#91B4D5">function</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">cache</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">		// Cache opened successfully</span></span>
<span class="line"><span style="color:#A6ACCD">	})</span></span>
<span class="line"><span style="color:#A6ACCD">	.</span><span style="color:#E4F0FBD0">catch</span><span style="color:#A6ACCD">(</span><span style="color:#91B4D5">function</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">		// Failed to open cache</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"></span></code></pre>
<p>Здесь код открывает кэш с именем my-cache и возвращает обещание, которое в случае успеха разрешается с объектом кэша. При возникновении ошибки обещание отклоняется с объектом error.</p>
<h2 id="добавление-ресурсов-в-кэш">Добавление ресурсов в кэш<a aria-hidden="true" tabindex="-1" href="#добавление-ресурсов-в-кэш"><span class="icon icon-link"></span></a></h2>
<p>Рассмотрим каждый из этих методов.</p>
<h3 id="cacheadd">Cache.add()<a aria-hidden="true" tabindex="-1" href="#cacheadd"><span class="icon icon-link"></span></a></h3>
<p>В этом методе Cache.add() в качестве аргумента принимается URL и добавляется в кэш ответ с этого URL. Если ответ уже находится в кэше, то метод ничего не делает. Например:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#E4F0FB">caches</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">open</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">my-cache</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">cache</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">	cache</span></span>
<span class="line"><span style="color:#A6ACCD">		.</span><span style="color:#E4F0FBD0">add</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">/api/data</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">		.</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Data added to cache.</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">))</span></span>
<span class="line"><span style="color:#A6ACCD">		.</span><span style="color:#E4F0FBD0">catch</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">error</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Error adding data to cache:</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">));</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span></code></pre>
<p>В приведенном выше коде вы открываете кэш с именем my-cache, а затем добавляете в него ответ от URL /api/data. При успешном выполнении операции в консоль выводится сообщение. Если произошла ошибка, то в консоль выводится сообщение об ошибке.</p>
<h3 id="cacheaddall">Cache.addAll()<a aria-hidden="true" tabindex="-1" href="#cacheaddall"><span class="icon icon-link"></span></a></h3>
<p>Этот метод принимает в качестве аргумента массив URL-адресов и добавляет ответы с этих URL-адресов в кэш. Если какие-либо ответы уже находятся в кэше, метод пропускает их.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> urls</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> [</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">/api/data1</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">/api/data2</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">/api/data3</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">caches</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">open</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">my-cache</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">cache</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">	cache</span></span>
<span class="line"><span style="color:#A6ACCD">		.</span><span style="color:#E4F0FBD0">addAll</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">urls</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">		.</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Data added to cache.</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">))</span></span>
<span class="line"><span style="color:#A6ACCD">		.</span><span style="color:#E4F0FBD0">catch</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">error</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Error adding data to cache:</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">));</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span></code></pre>
<p>В приведенном выше примере задается массив URL-адресов, а затем открывается кэш с именем my-cache. Теперь можно использовать метод Cache.addALL() для добавления в кэш ответов от URL-адресов из массива. При успешном выполнении операции в консоль выводится сообщение. Если произошла ошибка, то в консоль выводится сообщение об ошибке.</p>
<h3 id="cacheput">Cache.put()<a aria-hidden="true" tabindex="-1" href="#cacheput"><span class="icon icon-link"></span></a></h3>
<p>Метод Cache.put() работает иначе, чем другие методы: он принимает в качестве аргумента объект запроса и добавляет в кэш ответ от этого запроса. Если ответ уже находится в кэше, то метод перезаписывает его. Приведем пример:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> request</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7"> new</span><span style="color:#E4F0FBD0"> Request</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">/api/data</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">caches</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">open</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">my-cache</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">cache</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">	fetch</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">request</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">		.</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">response</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">			cache</span></span>
<span class="line"><span style="color:#A6ACCD">				.</span><span style="color:#E4F0FBD0">put</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">request</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">response</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">				.</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Data added to cache.</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">))</span></span>
<span class="line"><span style="color:#A6ACCD">				.</span><span style="color:#E4F0FBD0">catch</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">error</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Error adding data to cache:</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">));</span></span>
<span class="line"><span style="color:#A6ACCD">		})</span></span>
<span class="line"><span style="color:#A6ACCD">		.</span><span style="color:#E4F0FBD0">catch</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">error</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Error fetching data:</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">));</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span></code></pre>
<p>В приведенном выше коде вы создаете новый объект запроса для URL /api/data, а затем открываете кэш с именем my-cache. Теперь вы получаете запрос с помощью метода fetch() и добавляете ответ в кэш с помощью метода Cache.put().</p>
<h2 id="извлечение-ресурсов-из-кэша">Извлечение ресурсов из кэша<a aria-hidden="true" tabindex="-1" href="#извлечение-ресурсов-из-кэша"><span class="icon icon-link"></span></a></h2>
<p>Cache API предоставляет два основных метода для извлечения ресурсов из кэша: match() и matchAll(). Метод match() используется для извлечения из кэша одного ресурса, а метод matchAll() - для извлечения всех ресурсов, соответствующих заданному запросу.
Приведем пример использования метода match() для получения одного ресурса из кэша:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#E4F0FB">caches</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">open</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">my-cache</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">(</span><span style="color:#91B4D5">function</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">cache</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FB">  cache</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">match</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">/path/to/resource</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">(</span><span style="color:#91B4D5">function</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">response</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#A6ACCD">    if (</span><span style="color:#E4F0FB">response</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">      // Resource found in cache</span></span>
<span class="line"><span style="color:#E4F0FB">      console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">response</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">    } else {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">      // Resource not found in cache</span></span>
<span class="line"><span style="color:#A6ACCD">    }</span></span>
<span class="line"><span style="color:#A6ACCD">  });</span></span>
<span class="line"></span></code></pre>
<p>Здесь сначала открывается кэш с помощью метода caches.open()который возвращает обещание, разрешающее объект кэша. Затем используется метод match() объекта кэша для получения ресурса по указанному пути. Если ресурс найден в кэше, метод match() возвращает объект response, который может быть использован для доступа к ресурсу. Если ресурс не найден в кэше, метод match() возвращает null.</p>
<p>Ниже приведен пример использования метода matchAll() для получения всех ресурсов, соответствующих заданному запросу:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#E4F0FB">caches</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">open</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">my-cache</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">(</span><span style="color:#91B4D5">function</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">cache</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FB">  cache</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">matchAll</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">/path/to/*</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">(</span><span style="color:#91B4D5">function</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">responses</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#A6ACCD">    if (</span><span style="color:#E4F0FB">responses</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">length</span><span style="color:#91B4D5"> ></span><span style="color:#5DE4C7"> 0</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">      // Resources found in cache</span></span>
<span class="line"><span style="color:#E4F0FB">      console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">responses</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">    } else {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">      // No resources found in cache</span></span>
<span class="line"><span style="color:#A6ACCD">    }</span></span>
<span class="line"><span style="color:#A6ACCD">  });</span></span>
<span class="line"></span></code></pre>
<p>В данном примере с помощью метода matchAll() из кэша извлекаются все ресурсы, соответствующие шаблону /path/to/*. Метод возвращает массив объектов ответа, которые могут быть использованы для доступа к ресурсам. Если в кэше не найдено ни одного ресурса, то метод matchAll() возвращает пустой массив.</p>
<h2 id="удаление-ресурсов-из-кэша">Удаление ресурсов из кэша<a aria-hidden="true" tabindex="-1" href="#удаление-ресурсов-из-кэша"><span class="icon icon-link"></span></a></h2>
<p>При удалении ресурсов из кэша используется метод cache.delete(). Этот метод принимает в качестве параметра объект запроса, который представляет собой URL-адрес ресурса, который мы хотим удалить. Если ресурс найден в кэше, то он удаляется, а метод возвращает обещание, которое разрешается в true. Если ресурс не найден в кэше, то метод возвращает обещание, которое разрешается в false.
Приведем пример:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#E4F0FB">caches</span></span>
<span class="line"><span style="color:#A6ACCD">  .</span><span style="color:#E4F0FBD0">open</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">my-cache</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">  .</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">(</span><span style="color:#91B4D5">function</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">cache</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FB">    cache</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">delete</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">/path/to/resource</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">(</span><span style="color:#91B4D5">function</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">isDeleted</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#A6ACCD">      if (</span><span style="color:#E4F0FB">isDeleted</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">        // Resource deleted successfully</span></span>
<span class="line"><span style="color:#A6ACCD">      } else {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">        // Resource not found in cache</span></span>
<span class="line"><span style="color:#A6ACCD">      }</span></span>
<span class="line"><span style="color:#A6ACCD">  .</span><span style="color:#E4F0FBD0">catch</span><span style="color:#A6ACCD">(</span><span style="color:#91B4D5">function</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">    // Failed to delete resource from cache</span></span>
<span class="line"><span style="color:#A6ACCD">  });</span></span>
<span class="line"></span></code></pre>
<p>Данный код удаляет ресурс по URL /path/to/resource из кэша my-cache. Если ресурс найден в кэше, то он удаляется, а параметр isDeleted принимает значение true.</p>
<h2 id="заключение">Заключение<a aria-hidden="true" tabindex="-1" href="#заключение"><span class="icon icon-link"></span></a></h2>
<p>Использование Cache API позволяет сократить время получения ресурсов с сервера и улучшить общее качество работы пользователей с сайтом. Однако важно отметить, что кэширование следует использовать осторожно и выборочно, чтобы избежать кэширования ресурсов, которые могут часто меняться. При правильном использовании Cache API может помочь создать быстрые и отзывчивые сайты.</p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/cache-api-v-javascript-i-kak-ego-ispolьzovatь" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/cache-api-v-javascript-i-kak-ego-ispolьzovatь" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Cache API в JavaScript и как его использовать&url=https://igorlov.ru/blog/cache-api-v-javascript-i-kak-ego-ispolьzovatь" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&url=https://igorlov.ru/blog/cache-api-v-javascript-i-kak-ego-ispolьzovatь&title=Cache API в JavaScript и как его использовать&summary=Кэширование подразумевает хранение часто используемых данных на быстро доступном носителе, например в памяти, чтобы последующие запросы на те же данные...
&source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/cache-api-v-javascript-i-kak-ego-ispolьzovatь&media=&description=Кэширование подразумевает хранение часто используемых данных на быстро доступном носителе, например в памяти, чтобы последующие запросы на те же данные...
" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/kak-dobavitь-hlebnye-kroshki-na-svoj-sajt" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> Как добавить хлебные крошки на свой сайт </a> <a href="/blog/kak-ustanovitь-python-pyenv" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> Как установить Python Pyenv </a> </nav>  </div> </div> </article> <div class="container" data-astro-cid-axzg2cw6> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.D-6fTqBY.js" component-export="default" renderer-url="/_astro/client.Bd2Qst3j.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> </div> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><astro-island uid="Zs59T3" component-url="/_astro/CommentBlock.ChJFdf82.js" component-export="default" renderer-url="/_astro/client.44T8euMP.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-medium lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-blue dark:text-white" aria-label="logo" data-astro-cid-ijoll5s5> <svg width="1.44em" height="1em" viewBox="0 0 5660 3931" class="icon" data-astro-cid-ijoll5s5 data-icon="logo-one">  <use xlink:href="#ai:local:logo-one"></use>  </svg>  </a> <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>