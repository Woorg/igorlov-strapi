<!DOCTYPE html><html lang="ru"> <head><title>Раскройте новые возможности с помощью гибридного рендеринга - Igor Gorlov</title><link rel="canonical" href="https://igorlov.ru/blog/raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga"><meta name="description" content="С момента запуска Astro 1.0 разработчикам приходилось выбирать между статическим (SSG) и серверным (SSR) выводом. Статические веб-сайты обеспечивают..."><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.5.1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ViewTransitions.astro_astro_type_script_index_0_lang.DqfSmqP7.js"></script><link rel="stylesheet" href="/_astro/_regular_.Dd2YhbvP.css" />
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw);padding-left:min(2rem,1.2125rem + 1.05vw);padding-right:min(2rem,1.2125rem + 1.05vw);padding-top:1rem;padding-bottom:1rem}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.breadcrumbs__link[data-astro-cid-vcbh62el]{border-radius:9999px;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover{--tw-bg-opacity: 1;background-color:#fce4e1;background-color:rgba(252,228,225,var(--tw-bg-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]{padding:.125rem .75rem}.breadcrumbs__link[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#6a6a6a;background-color:rgba(106,106,106,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#8a8a93;background-color:rgba(138,138,147,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}
</style>
<link rel="stylesheet" href="/_astro/_single_.CyWP_2Jq.css" />
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#020202;border-color:rgba(2,2,2,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.theme-toggle[data-v-8d8d9c54]{width:1.25rem;height:1.25rem}
.comments[data-v-533071ec]{margin:auto;margin-top:1.25rem;max-width:42rem;--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.comments:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame[data-v-533071ec]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
</style><script type="module" src="/_astro/page.CFW0rSNk.js"></script><style>[data-astro-transition-scope="astro-vgmtzcrq-1"] { view-transition-name: blog-image-raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-14 font-inter text-white fluid:text-lg dark:bg-black"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ФCВР</a>  <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> </button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> </button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/projects" class="nav__link" data-astro-cid-7wkmezxd> Работы. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты. </a> </li> </ul> </nav> </div>  <script type="module">document.addEventListener("astro:page-load",()=>{const t=document.querySelector(".nav__open"),n=document.querySelector(".nav__close"),e=document.querySelector(".nav__container"),o=document.querySelectorAll(".nav__item");t?.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")}),n?.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")}),o.forEach(a=>{window.matchMedia("( max-width: 1024px)").matches&&a.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")})})});</script> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="IJ3dh" component-url="/_astro/ThemeToggle.kpN4JrWQ.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-rq644orq&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;ThemeToggle&quot;,&quot;value&quot;:true}"></astro-island> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <div class="blocks__container container"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <ol class="breadcrumbs__list" role="list" data-astro-cid-vcbh62el> <li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </nav>  </div> <div class="blocks__container container"> <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/учебник" class="categories__link" data-astro-cid-axzg2cw6> Учебник  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Раскройте новые возможности с помощью гибридного рендеринга </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/astro" data-astro-cid-axzg2cw6> Astro </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 06 фев., 2023 by John Doe </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div>  <figure class="article__image" data-astro-cid-axzg2cw6> <picture> <source srcset="/_astro/undefined-Feb-06-2023.Bn4aQ3CD_1iHtGr.avif" type="image/avif"><source srcset="/_astro/undefined-Feb-06-2023.Bn4aQ3CD_ZYHi5o.webp" type="image/webp"> <img src="/_astro/undefined-Feb-06-2023.Bn4aQ3CD_ZK2hpJ.png" alt="Раскройте новые возможности с помощью гибридного рендеринга" class="aspect-auto h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-vgmtzcrq-1" width="1200" height="500" decoding="async"> </picture> </figure>  <div class="article__content prose prose-zinc max-w-full dark:prose-invert prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:-mx-12 prose-figure:w-screen prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <div id="adfox_17062261612859555"></div> <script>(function(){const blockId = "adfox_17062261612859555";

	window.yaContextCb = window.yaContextCb || [];
	window.yaContextCb.push(() => {
		Ya.adfoxCode.createAdaptive(
			{
				ownerId: 1493338,
				containerId: blockId,
				params: {
					p1: 'dawgg',
					p2: 'p',
				},
			},
			['desktop', 'tablet', 'phone'],
			{
				tabletWidth: 830,
				phoneWidth: 480,
				isAutoReloads: true,
			},
		);
	});
})();</script> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Раскройте новые возможности с помощью гибридного рендеринга&#38;url=https://igorlov.ru/blog/raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga&#38;title=Раскройте новые возможности с помощью гибридного рендеринга&#38;summary=С момента запуска Astro 1.0 разработчикам приходилось выбирать между статическим (SSG) и серверным (SSR) выводом. Статические веб-сайты обеспечивают...&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga&#38;media=&#38;description=С момента запуска Astro 1.0 разработчикам приходилось выбирать между статическим (SSG) и серверным (SSR) выводом. Статические веб-сайты обеспечивают..." target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <details class="toc px-5 border border-gray-light lg:px-10 py-2 cursor-pointer"><summary class="title">Оглавление</summary><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#как-работает-процесс-сборки-astro">Как работает процесс сборки Astro?</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#как-работает-гибридный-рендеринг">Как работает гибридный рендеринг?</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#зачем-нужен-статический-анализ">Зачем нужен статический анализ?</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#сферы-применения-гибридного-рендеринга">Сферы применения гибридного рендеринга</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#пример-использования-повышение-производительности-рендеринга-популярных-страниц">Пример использования: повышение производительности рендеринга популярных страниц</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#пример-использования-добавление-api-к-существующему-статическому-сайту">Пример использования: добавление API к существующему статическому сайту</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#пример-использования-повышение-производительности-сборки-больших-сайтов">Пример использования: повышение производительности сборки больших сайтов</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#начало-работы-с-гибридным-рендерингом">Начало работы с гибридным рендерингом</a></li></ol></details><p>С момента запуска Astro 1.0 разработчикам приходилось выбирать между статическим (SSG) и серверным (SSR) выводом. Статические веб-сайты обеспечивают невероятную производительность благодаря тому, что страницы создаются заранее. Серверы используют свои динамические возможности для генерации HTML по требованию, уникального для каждого запроса.</p>
<p>До сих пор это было решение ”все или ничего” - полностью ли это статический сайт или мне следует развернуть сервер?</p>
<p>Astro 2.0 открывает лучшие возможности обоих миров благодаря гибридному рендерингу. Выбирайте между производительностью статических страниц и полной гибкостью серверного рендеринга для каждой страницы вашего сайта.</p>
<p>В этом посте мы расскажем о том, как работает гибридный рендеринг, и рассмотрим лишь некоторые из новых функций и улучшений производительности, ставших возможными в Astro 2.0.</p>
<h2 id="как-работает-процесс-сборки-astro">Как работает процесс сборки Astro?<a aria-hidden="true" tabindex="-1" href="#как-работает-процесс-сборки-astro"><span class="icon icon-link"></span></a></h2>
<p>Процесс сборки Astro происходит в несколько этапов, начиная с серверного пакета JavaScript, сгенерированного Vite. Чтобы немного упростить ситуацию, вывод этого пакета включает в себя:</p>
<p>JavaScript на стороне сервера, используемый для рендеринга HTML Клиентский манифест, который использует статический анализ для сбора всех компонентов, необходимых для интерактивности на стороне клиента CSS и другие активы для клиента</p>
<p>Далее Astro использует клиентский манифест для запуска второго процесса сборки, который собирает оптимизированный JavaScript на стороне клиента.</p>
<p>Если настроенный вывод статичен, Astro выполнит JavaScript на стороне сервера и запишет вывод в файлы .html. Затем серверный JavaScript отбрасывается.</p>
<p>Если настроенный вывод является серверным, Astro передает JavaScript на стороне сервера адаптеру для дальнейшей обработки.Адаптеры гарантируют, что ваш серверный JavaScript совместим со средой выполнения JavaScript конкретного хостинг-провайдера. Обратите внимание, что в этом случае конечным результатом является не набор файлов .html, а код JavaScript, необходимый для отображения HTML.</p>
<p>К сожалению, эта система была довольно жесткой и не позволяла смешивать статические и динамические маршруты в одном проекте. Нам действительно нужен был процесс, который позволял бы использовать оба шаблона параллельно.</p>
<h2 id="как-работает-гибридный-рендеринг">Как работает гибридный рендеринг?<a aria-hidden="true" tabindex="-1" href="#как-работает-гибридный-рендеринг"><span class="icon icon-link"></span></a></h2>
<p>В Astro 2.0 мы переделали конвейер сборки astro для обработки гибридного рендеринга. Во время начального процесса сборки новый этап статического анализа определяет, какие страницы должны быть предварительно отрендерены. Это позволяет нам разделить ваши маршруты на отдельные фрагменты в зависимости от того, когда они должны быть отрендерены.</p>
<p>Как и в исходном статическом процессе, предварительно отрендеренный фрагмент выполняется, и результат записывается в файлы .html. Затем фрагмент отбрасывается.</p>
<p>Как и в исходном серверном процессе, серверный чанк передается адаптеру для дальнейшей обработки. В конечном итоге он будет развернут как бессерверная или Edge-функция, в зависимости от вашего адаптера.</p>
<h2 id="зачем-нужен-статический-анализ">Зачем нужен статический анализ?<a aria-hidden="true" tabindex="-1" href="#зачем-нужен-статический-анализ"><span class="icon icon-link"></span></a></h2>
<p>Статический анализ - это техника, используемая для анализа исходного кода без его реального выполнения. Astro использует этот подход во многих местах, но он особенно важен в процессе сборки. По соображениям производительности Astro должен иметь возможность классифицировать ваши страницы без выполнения их исходного кода. Для небольших проектов выполнение кода может не вызывать беспокойства, но в масштабах проекта это быстро становится узким местом.</p>
<p>Гибридный рендеринг был специально разработан с учетом статического анализа, хотя мы рассматривали и альтернативные API. Процесс сборки Astro способен проверять наличие оператора export const prerender = true, чтобы определить, какие страницы должны быть предварительно отрендерены. Чтобы сделать это эффективно, мы полагаемся на замечательную библиотеку es-module-lexer, которая также используется внутри Node.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">// This route should be generated at build time!</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> const</span><span style="color:#E4F0FB"> prerender</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7"> true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> text</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FBD0"> fetch</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">https://example.com/</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">res</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=&#x26;</span><span style="color:#E4F0FB">gt</span><span style="color:#A6ACCD">; </span><span style="color:#E4F0FB">res</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">text</span><span style="color:#A6ACCD">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">&#x26;</span><span style="color:#E4F0FB">lt</span><span style="color:#A6ACCD">;</span><span style="color:#E4F0FB">article</span><span style="color:#91B4D5"> set</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB">html</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">{</span><span style="color:#E4F0FB">text</span><span style="color:#A6ACCD">} </span><span style="color:#91B4D5">/&#x26;</span><span style="color:#E4F0FB">gt</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<h2 id="сферы-применения-гибридного-рендеринга">Сферы применения гибридного рендеринга<a aria-hidden="true" tabindex="-1" href="#сферы-применения-гибридного-рендеринга"><span class="icon icon-link"></span></a></h2>
<p>Гибридный рендеринг открывает целый ряд новых вариантов использования, но мы хотели бы выделить несколько, которые нам особенно интересны.</p>
<h3 id="пример-использования-повышение-производительности-рендеринга-популярных-страниц">Пример использования: повышение производительности рендеринга популярных страниц<a aria-hidden="true" tabindex="-1" href="#пример-использования-повышение-производительности-рендеринга-популярных-страниц"><span class="icon icon-link"></span></a></h3>
<p>Рассмотрим небольшой/средний сайт электронной коммерции, построенный с помощью Astro, с тысячами различных возможных продуктов и вариаций. Если бы вы использовали статическую генерацию сайта, вам пришлось бы перестраивать сайт каждый раз, когда один из этих продуктов менялся или исчезал из продажи.</p>
<p>Такой проект требует рендеринга на стороне сервера, что позволит генерировать страницы с товарами заново при каждом запросе. Но теперь у нас появилась новая проблема: ваша домашняя страница больше не является статичной. Производительность загрузки по-прежнему важна для стимулирования продаж, и на вашей домашней странице нет динамического контента, который бы требовал перегенерации при каждом запросе.</p>
<p>Гибридный рендеринг решает нашу проблему производительности путем предварительного рендеринга домашней страницы в статический HTML, в то время как остальная часть вашего сайта рендерится по требованию.</p>
<h3 id="пример-использования-добавление-api-к-существующему-статическому-сайту">Пример использования: добавление API к существующему статическому сайту<a aria-hidden="true" tabindex="-1" href="#пример-использования-добавление-api-к-существующему-статическому-сайту"><span class="icon icon-link"></span></a></h3>
<p>По мере роста вашего статического сайта вы можете столкнуться с необходимостью размещения публичного API. Исторически добавление API на статический сайт требовало специфической настройки хоста, но в Astro 2.0 мы можем добавлять конечные точки сервера (маршруты API) без ущерба для производительности наших статических страниц.</p>
<p>Более того, конечные точки сервера могут быть добавлены автоматически с помощью хука injectRoute нашего Integrations API. Мы рады способствовать развитию мощной экосистемы сторонней интеграции с помощью этих новых примитивов!</p>
<h3 id="пример-использования-повышение-производительности-сборки-больших-сайтов">Пример использования: повышение производительности сборки больших сайтов<a aria-hidden="true" tabindex="-1" href="#пример-использования-повышение-производительности-сборки-больших-сайтов"><span class="icon icon-link"></span></a></h3>
<p>Генерацию статических страниц сложно масштабировать до тысяч страниц, поскольку каждая страница должна быть отображена в процессе сборки. Рендеринг на стороне сервера откладывает рендеринг страниц до момента запроса, устраняя потенциальное узкое место в процессе сборки.</p>
<p>При наличии сотен маршрутов, генерируемых getStaticPaths, рендеринг на стороне сервера может привести к значительному увеличению производительности. В ходе внутреннего тестирования мы увидели, что время сборки увеличилось на 30% благодаря переключению динамических маршрутов на рендеринг на стороне сервера.</p>
<h2 id="начало-работы-с-гибридным-рендерингом">Начало работы с гибридным рендерингом<a aria-hidden="true" tabindex="-1" href="#начало-работы-с-гибридным-рендерингом"><span class="icon icon-link"></span></a></h2>
<p>Гибридный рендеринг доступен уже сегодня в Astro 2.0! Вы можете обратиться к нашему руководству по рендерингу на стороне сервера, чтобы узнать больше о возможностях SSR в Astro. Официальные адаптеры Astro также были обновлены для поддержки гибридного рендеринга, поэтому не забудьте установить последнюю версию вашего адаптера.</p>
<p>Чтобы отпраздновать запуск, наши друзья из SST запустили astro-sst, свой официальный AWS-адаптер для Astro. Посмотрите их анонсирующее видео и руководство, чтобы узнать больше и начать работу с AWS + SST.</p>
<p>Мы приветствуем ваши отзывы! Мы собрали несколько замечательных предложений во время RFC Prerender API и приглашаем вас предлагать будущие идеи, используя нашу новую публичную дорожную карту или сообщество Discord.</p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Раскройте новые возможности с помощью гибридного рендеринга&#38;url=https://igorlov.ru/blog/raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga&#38;title=Раскройте новые возможности с помощью гибридного рендеринга&#38;summary=С момента запуска Astro 1.0 разработчикам приходилось выбирать между статическим (SSG) и серверным (SSR) выводом. Статические веб-сайты обеспечивают...&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/raskrojte-novye-vozmozhnosti-s-pomoshhyu-gibridnogo-renderinga&#38;media=&#38;description=С момента запуска Astro 1.0 разработчикам приходилось выбирать между статическим (SSG) и серверным (SSR) выводом. Статические веб-сайты обеспечивают..." target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/react-native-go-to-packages-for-every-mobile-app" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> Пакеты React Native для каждого мобильного приложения </a> <a href="/blog/python-skripty-avtomatizaczii-kotorye-vam-stoit-osvoit" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> Python скрипты автоматизации, которые вам стоит освоить </a> </nav>  </div> </article> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.svLg6TOn.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> <astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.BwogX8bT.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  </div> <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ФCВР</a>  <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>