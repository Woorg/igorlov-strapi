<!DOCTYPE html><html lang="ru"> <head><title>5 распространенных ошибок UseState, которые допускают разработчики React | Игорь Горлов - Фронтeндер</title><link rel="canonical" href="https://igorlov.ru/blog/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react"><meta name="description" content="Самым сложным аспектом разработки любого приложения часто является управление его состоянием. Однако часто нам приходится управлять несколькими частями состоян"><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.9.1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_regular_.CyGIBtQS.css">
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#0d52a1;color:rgba(13,82,161,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw)}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.container[data-astro-cid-vcbh62el]{padding:min(2rem,1.2125rem + 1.05vw)}.list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.link[data-astro-cid-vcbh62el]{font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;padding:.125rem .75rem;font-size:min(1.5rem,1.1625rem + .45vw);line-height:var(--tw-lh)}
</style>
<link rel="stylesheet" href="/_astro/_single_.C0aKA9dM.css">
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#27292d;border-color:rgba(39,41,45,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.comments[data-v-f9c4118f]{margin:auto;margin-top:1.25rem;width:100%;--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.comments:where([class=dark][data-v-f9c4118f],[class=dark] *[data-v-f9c4118f]){--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.giscus-frame[data-v-f9c4118f]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-f9c4118f],[class=dark] *[data-v-f9c4118f]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
</style><script type="module" src="/_astro/hoisted.CUFolni_.js"></script><style>[data-astro-transition-scope="astro-r75ddqls-1"] { view-transition-name: blog-image-5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-16 font-inter text-blue fluid:text-lg lg:pt-24 dark:bg-black dark:text-white"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-medium lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-blue dark:text-white" aria-label="logo" data-astro-cid-ijoll5s5> <svg width="1.44em" height="1em" viewBox="0 0 5660 3931" class="icon" data-astro-cid-ijoll5s5 data-icon="logo-one">  <symbol id="ai:local:logo-one"><g fill="currentColor"><path d="M1198.57 596.749c0 329.575-267.171 596.751-596.747 596.751-329.575 0-596.749-267.176-596.749-596.751S272.248 0 601.823 0c329.576 0 596.747 267.174 596.747 596.749Z"/><circle cx="3035.75" cy="617.751" r="596.749" transform="rotate(-90 3035.75 617.751)"/><path d="M3035.75 2736.81c329.57 0 596.75 267.18 596.75 596.75 0 329.58-267.18 596.75-596.75 596.75-329.58 0-596.75-267.17-596.75-596.75 0-329.57 267.17-596.75 596.75-596.75Z"/><circle cx="596.749" cy="1964.8" r="596.749"/><path d="M1193.5 3332.87c0 329.57-267.176 596.75-596.751 596.75S0 3662.44 0 3332.87c0-329.58 267.174-596.75 596.749-596.75 329.575 0 596.751 267.17 596.751 596.75Z"/><circle cx="5062.46" cy="617.751" r="596.749" transform="rotate(-90 5062.46 617.751)"/><circle cx="5062.46" cy="3333.56" r="596.749" transform="rotate(-90 5062.46 3333.56)"/></g></symbol><use xlink:href="#ai:local:logo-one"></use>  </svg>  </a> <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> Меню</button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> Закрыть</button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты </a> </li> </ul> </nav> </div>   <!-- <ThemeToggle client:only /> --> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <div class="container" data-astro-cid-vcbh62el> <ol class="list" role="list" data-astro-cid-vcbh62el> <li class="item" role="listitem" data-astro-cid-vcbh62el> <a class="link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="item" role="listitem" data-astro-cid-vcbh62el> <a class="link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </div> </nav>  <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <div class="container" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/учебник" class="categories__link" data-astro-cid-axzg2cw6> Учебник  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> 5 распространенных ошибок UseState, которые допускают разработчики React </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/react" data-astro-cid-axzg2cw6> React </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 18 дек., 2023 by Игорь Горлов </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div> <article data-astro-cid-axzg2cw6> <figure class="article__image" data-astro-cid-axzg2cw6> <picture data-astro-cid-axzg2cw6> <source srcset="/_astro/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react-Dec-18-2023.CLqYXikp_2rihPc.avif" type="image/avif"><source srcset="/_astro/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react-Dec-18-2023.CLqYXikp_2eXKKu.webp" type="image/webp"> <img src="/_astro/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react-Dec-18-2023.CLqYXikp_Z14wxLt.png" alt="5 распространенных ошибок UseState, которые допускают разработчики React" class="aspect-video h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-r75ddqls-1" width="1120" height="580" decoding="async"> </picture> </figure> </article> <div class="article__content prose prose-zinc max-w-full break-words text-blue dark:prose-invert prose-headings:text-blue prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <div id="adfox_17062261612859555"></div> <script>(function(){const blockId = "adfox_17062261612859555";

	window.yaContextCb = window.yaContextCb || [];
	window.yaContextCb.push(() => {
		Ya.adfoxCode.createAdaptive(
			{
				ownerId: 1493338,
				containerId: blockId,
				params: {
					p1: 'dawgg',
					p2: 'p',
				},
			},
			['desktop', 'tablet', 'phone'],
			{
				tabletWidth: 830,
				phoneWidth: 480,
				isAutoReloads: true,
			},
		);
	});
})();</script> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=5 распространенных ошибок UseState, которые допускают разработчики React&url=https://igorlov.ru/blog/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&url=https://igorlov.ru/blog/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react&title=5 распространенных ошибок UseState, которые допускают разработчики React&summary=Самым сложным аспектом разработки любого приложения часто является управление его состоянием. Однако часто нам приходится управлять несколькими частями состоян&source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react&media=&description=Самым сложным аспектом разработки любого приложения часто является управление его состоянием. Однако часто нам приходится управлять несколькими частями состоян" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <details open  class="toc border border-blue text-blue fluid:p-8 cursor-pointer rounded-[50px]"><summary class="toc__title text-xl font-medium">Содержание</summary><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#неправильная-инициализация-usestate">Неправильная инициализация useState</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#отказ-от-использования-дополнительной-цепочки">Отказ от использования дополнительной цепочки</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#обновление-usestate-напрямую">Обновление useState напрямую</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#обновление-конкретного-свойства-объекта">Обновление конкретного свойства объекта</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#управление-несколькими-полями-ввода-в-формах">Управление несколькими полями ввода в формах</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#заключение">Заключение</a></li></ol></details open ><p>Самым сложным аспектом разработки любого приложения часто является управление его состоянием. Однако часто нам приходится управлять несколькими частями состояния в нашем приложении, например, когда данные извлекаются с внешнего сервера или обновляются в приложении.</p>
<p>Сложность управления состоянием является причиной того, что сегодня существует так много библиотек управления состоянием - и еще больше библиотек продолжают разрабатываться. К счастью, в React есть несколько встроенных решений в виде хуков для управления состояниями, что делает управление состояниями в React проще.</p>
<p>Не секрет, что хуки становятся все более важными при разработке компонентов React, особенно функциональных компонентов, поскольку они полностью заменили необходимость в компонентах на основе классов, которые были традиционным способом управления компонентами с состояниями. Хук <code>useState</code> - один из многих хуков, представленных в React, но, несмотря на то, что хук <code>useState</code> существует уже несколько лет, разработчики все еще склонны совершать распространенные ошибки из-за недостаточного понимания.</p>
<p>Хук <code>useState</code> может быть сложным для понимания, особенно для начинающих разработчиков React или тех, кто переходит от компонентов на основе классов к функциональным компонентам. В этом руководстве мы рассмотрим 5 самых распространенных ошибок с <code>useState</code>, которые часто допускают разработчики React, и расскажем, как их можно избежать.</p>
<p>Шаги, которые мы рассмотрим:</p>
<h2 id="неправильная-инициализация-usestate">Неправильная инициализация useState<a aria-hidden="true" tabindex="-1" href="#неправильная-инициализация-usestate"><span class="icon icon-link"></span></a></h2>
<p>Неправильная инициализация хука useState - одна из самых распространенных ошибок, которые допускают разработчики при его использовании. Что значит инициализировать useState? Инициализировать что-либо - значит установить его начальное значение.</p>
<p>Проблема в том, что useState позволяет вам определить начальное состояние, используя все, что вы хотите. Однако никто не говорит вам прямо, что в зависимости от того, что ваш компонент ожидает увидеть в этом состоянии, использование неправильного значения типа даты для инициализации useState может привести к неожиданному поведению вашего приложения, например, к отказу от отображения пользовательского интерфейса, что приведет к ошибке пустого экрана.</p>
<p>Например, у нас есть компонент, ожидающий состояние объекта пользователя, содержащее его имя, изображение и биографию, и в этом компоненте мы отображаем свойства пользователя.</p>
<p>Инициализация useState другим типом данных, например пустым состоянием или нулевым значением, приведет к ошибке пустой страницы, как показано ниже.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD">,</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">userInfo</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setUserInfo</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">({});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">img</span><span style="color:#91B4D5;font-style:italic"> src</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{userInfo</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">image} </span><span style="color:#91B4D5;font-style:italic">alt</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">изображение профиля</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">			User: {userInfo</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name}</span></span>
<span class="line"><span style="color:#E4F0FB">			About: {userInfo</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">bio}</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">App</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Выход:</p>
<figure class="igorlov-figure"><img  src="/_astro/7y8573kl9dx83fx68iis.BicCEb1O_1tYiBX.webp" alt="7y8573kl9dx83fx68iis.png" width="800" height="199" loading="lazy" decoding="async"><figcaption>7y8573kl9dx83fx68iis.png</figcaption></figure>
<p>Просмотр консоли выдаст аналогичную ошибку, как показано ниже:</p>
<figure class="igorlov-figure"><img  src="/_astro/1t966xsid9wns4a93awr.Dt2lV8WT_jV8Af.webp" alt="1t966xsid9wns4a93awr.png" width="800" height="66" loading="lazy" decoding="async"><figcaption>1t966xsid9wns4a93awr.png</figcaption></figure>
<p>Начинающие разработчики часто допускают эту ошибку при инициализации состояния, особенно при получении данных с сервера или из базы данных, поскольку ожидается, что полученные данные обновят состояние с реальным пользовательским объектом. Однако это плохая практика, которая может привести к ожидаемому поведению, как показано выше.</p>
<p>Предпочтительным способом инициализации <code>useState</code> является передача ему ожидаемого типа данных, чтобы избежать потенциальных ошибок пустой страницы. Например, можно передать состоянию пустой объект, как показано ниже:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">userData</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setUserData</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">({});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">img</span><span style="color:#91B4D5;font-style:italic"> src</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{userData</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">image} </span><span style="color:#91B4D5;font-style:italic">alt</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Profile Image</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">			User: {userData</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name}</span></span>
<span class="line"><span style="color:#E4F0FB">			About: {userData</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">bio}</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">App</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Выход:</p>
<figure class="igorlov-figure"><img  src="/_astro/28ge20123p57zc2gppm1.D3IYMxsn_Z2sMFG4.webp" alt="28ge20123p57zc2gppm1.png" width="800" height="200" loading="lazy" decoding="async"><figcaption>28ge20123p57zc2gppm1.png</figcaption></figure>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">userData</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setUserData</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">		image</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		name</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		bio</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">img</span><span style="color:#91B4D5;font-style:italic"> src</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{userData</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">image} </span><span style="color:#91B4D5;font-style:italic">alt</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">изображение профиля</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">			User: {userData</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name}</span></span>
<span class="line"><span style="color:#E4F0FB">			About: {userData</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">bio}</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">App</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<h2 id="отказ-от-использования-дополнительной-цепочки">Отказ от использования дополнительной цепочки<a aria-hidden="true" tabindex="-1" href="#отказ-от-использования-дополнительной-цепочки"><span class="icon icon-link"></span></a></h2>
<p>Иногда просто инициализировать useState ожидаемым типом данных недостаточно, чтобы предотвратить неожиданную ошибку пустой страницы. Это особенно верно при попытке получить доступ к свойству глубоко вложенного объекта, находящегося в цепочке связанных объектов.</p>
<p>Обычно вы пытаетесь получить доступ к этому объекту, перебирая связанные объекты с помощью оператора цепочки с точкой (.), например, <code>user.names.firstName</code>. Однако если какие-либо объекты или свойства цепочки отсутствуют, возникает проблема. Страница оборвется, и пользователь получит ошибку пустой страницы.</p>
<p>Например:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">userInfo</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setUserInfo</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">({});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">img</span><span style="color:#91B4D5;font-style:italic"> src</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{userInfo</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">image} </span><span style="color:#91B4D5;font-style:italic">alt</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Profile Image</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">			User: {userInfo</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">names</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">firstName}</span></span>
<span class="line"><span style="color:#E4F0FB">			About: {userInfo</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">bio}</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">App</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Ошибка вывода:</p>
<figure class="igorlov-figure"><img  src="/_astro/6hqpd21cy8qjqghgut7c.BoZbJ1HL_AQxfN.webp" alt="6hqpd21cy8qjqghgut7c.png" width="800" height="75" loading="lazy" decoding="async"><figcaption>6hqpd21cy8qjqghgut7c.png</figcaption></figure>
<p>Типичным решением этой ошибки и отсутствия рендеринга UI является использование условных проверок для подтверждения существования состояния, чтобы проверить, доступно ли оно перед рендерингом компонента, например, <code>user.names &#x26;&#x26; user.names.firstName</code>, которое оценивает правое выражение только в том случае, если левое выражение истинно (если <code>user.names</code> существует). Однако такое решение является муторным, поскольку потребует нескольких проверок для каждой цепочки объектов.</p>
<p>Используя необязательный оператор цепочки <code>(?)</code>, вы можете прочитать значение свойства, которое находится глубоко внутри связанной цепочки объектов, без необходимости проверять, что каждый ссылающийся объект является действительным. Необязательный оператор цепочки <code>(?.)</code> аналогичен точечному оператору цепочки <code>(.)</code>, за исключением того, что если ссылающийся объект или свойство отсутствует (т. е. null или undefined), выражение замыкается и возвращает значение undefined. Проще говоря, если какой-либо объект в цепочке отсутствует, то цепочка не продолжается (замыкается).</p>
<p>Например, <code>user?.names?.firstName</code> не вызовет ошибки и не сломает страницу, поскольку, обнаружив отсутствие объекта user или names, сразу же завершает операцию.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	// Initialize state with the expected data type</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">user</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setUser</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">({});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	// Render UI</span></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">img</span><span style="color:#91B4D5;font-style:italic"> src</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{user</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">image} </span><span style="color:#91B4D5;font-style:italic">alt</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Profile Image</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">			User: {user</span><span style="color:#A6ACCD">?.</span><span style="color:#E4F0FB">names</span><span style="color:#A6ACCD">?.</span><span style="color:#E4F0FB">firstName}</span></span>
<span class="line"><span style="color:#E4F0FB">			About: {user</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">bio}</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">App</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Использование опционального оператора цепочки позволяет упростить и сократить выражения при обращении к цепочке свойств в состоянии, что может быть очень полезно при изучении содержимого объектов, ссылка на которые может быть заранее неизвестна.</p>
<h2 id="обновление-usestate-напрямую">Обновление useState напрямую<a aria-hidden="true" tabindex="-1" href="#обновление-usestate-напрямую"><span class="icon icon-link"></span></a></h2>
<p>Отсутствие правильного понимания того, как React планирует и обновляет состояние, может легко привести к ошибкам в обновлении состояния приложения. При использовании <code>useState</code> мы обычно определяем состояние и напрямую обновляем его с помощью функции set state.</p>
<p>Например, мы создаем состояние count и функцию-обработчик, прикрепленную к кнопке, которая добавляет единицу (+1) к состоянию при нажатии:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">count</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setCount</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">0</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> increaseCount</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setCount</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">count</span><span style="color:#91B4D5"> +</span><span style="color:#5DE4C7"> 1</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">span</span><span style="color:#E4F0FB">>Count: {count}&#x3C;/</span><span style="color:#5DE4C7">span</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">button</span><span style="color:#91B4D5;font-style:italic"> onClick</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{increaseCount}>Add +1&#x3C;/</span><span style="color:#5DE4C7">button</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">App</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Выход:</p>
<figure class="igorlov-figure"><img  src="/_astro/rvjia6kap9p8ia5c0fz9.BUbcPVd-_Z2hn80c.webp" alt="rvjia6kap9p8ia5c0fz9.gif" width="763" height="207" loading="lazy" decoding="async"><figcaption>rvjia6kap9p8ia5c0fz9.gif</figcaption></figure>
<p>Это работает, как и ожидалось. Однако прямое обновление состояния - плохая практика, которая может привести к потенциальным ошибкам при работе с живым приложением, которое используют несколько пользователей. Почему? Потому что, вопреки вашему мнению, React не обновляет состояние сразу после нажатия на кнопку, как показано в демонстрационном примере. Вместо этого React делает снимок текущего состояния и планирует это обновление (+1) на более позднее время для повышения производительности - это происходит за миллисекунды, поэтому незаметно для человеческого глаза. Однако пока запланированное обновление находится в ожидании перехода, текущее состояние может быть изменено чем-то другим (например, делами нескольких пользователей). Запланированное обновление никак не сможет узнать об этом новом событии, потому что у него есть только запись снимка состояния, который оно сделало, когда была нажата кнопка.</p>
<p>Это может привести к серьезным ошибкам и странному поведению вашего приложения. Давайте посмотрим на это в действии, добавив еще одну кнопку, которая асинхронно обновляет состояние счетчика с задержкой в 2 секунды.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">count</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setCount</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">0</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> handleUpdate</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setCount</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">count</span><span style="color:#91B4D5"> +</span><span style="color:#5DE4C7"> 1</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">span</span><span style="color:#E4F0FB">>Count: {count}&#x3C;/</span><span style="color:#5DE4C7">span</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">button</span><span style="color:#91B4D5;font-style:italic"> onClick</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{handleUpdate}>Add +1&#x3C;/</span><span style="color:#5DE4C7">button</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Обратите внимание на ошибку в выводе:</p>
<figure class="igorlov-figure"><img  src="/_astro/xdzsxh958qe4a8kyi6e5.CN9WseMU_Z1gaqw9.webp" alt="xdzsxh958qe4a8kyi6e5.gif" width="753" height="227" loading="lazy" decoding="async"><figcaption>xdzsxh958qe4a8kyi6e5.gif</figcaption></figure>
<p>Заметили ошибку? Мы начинаем с того, что дважды нажимаем на первую кнопку ”Добавить +1” (что обновляет состояние до 1 + 1 = 2). После этого мы нажимаем на кнопку ”Добавить +1 позже” - это делает снимок текущего состояния (2) и планирует обновление, чтобы добавить 1 к этому состоянию через две секунды. Но пока это запланированное обновление находится на стадии перехода, мы трижды нажимаем на кнопку “Добавить +1”, обновляя текущее состояние до 5 (т. е. 2 + 1 + 1 + 1 = 5). Однако асинхронное запланированное обновление пытается обновить состояние через две секунды, используя снимок (2), хранящийся в памяти (т. е. 2 + 1 = 3), не понимая, что текущее состояние было обновлено до 5. В результате состояние обновляется до 3 вместо 6.</p>
<p>Эта непреднамеренная ошибка часто поражает приложения, состояния которых обновляются напрямую с помощью функции setState(newValue). Предлагаемый способ обновления useState - функциональное обновление, при котором <code>setState()</code> передается функции обратного вызова, а в эту функцию обратного вызова передается текущее состояние на данный момент, например, <code>setState(currentState => currentState + newValue)</code>. Таким образом, в функцию обратного вызова передается текущее состояние на запланированное время обновления, что позволяет узнать текущее состояние до попытки обновления.</p>
<p>Итак, давайте модифицируем демонстрационный пример, чтобы использовать функциональное обновление вместо прямого.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD">,</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">count</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setCount</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">0</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> handleUpdate</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setCount</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">prevCount</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> prevCount</span><span style="color:#91B4D5"> +</span><span style="color:#5DE4C7"> 1</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> handleAsyncUpdate</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setTimeout</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">			setCount</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">prevCount</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> prevCount</span><span style="color:#91B4D5"> +</span><span style="color:#5DE4C7"> 1</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">		}, </span><span style="color:#5DE4C7">2000</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">span</span><span style="color:#E4F0FB">>Count: {count}&#x3C;/</span><span style="color:#5DE4C7">span</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">button</span><span style="color:#91B4D5;font-style:italic"> onClick</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{handleUpdate}>Add +1&#x3C;/</span><span style="color:#5DE4C7">button</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">button</span><span style="color:#91B4D5;font-style:italic"> onClick</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{handleAsyncUpdate}>Add +1 later&#x3C;/</span><span style="color:#5DE4C7">button</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">App</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<figure class="igorlov-figure"><img  src="/_astro/lf0h83j0m66ah3oprysk.B5vBRJOd_ZL1R3W.webp" alt="lf0h83j0m66ah3oprysk.gif" width="800" height="237" loading="lazy" decoding="async"><figcaption>lf0h83j0m66ah3oprysk.gif</figcaption></figure>
<p>При функциональном обновлении функция <code>setState()</code> знает, что состояние было обновлено до 5, поэтому она обновляет состояние до 6.</p>
<h2 id="обновление-конкретного-свойства-объекта">Обновление конкретного свойства объекта<a aria-hidden="true" tabindex="-1" href="#обновление-конкретного-свойства-объекта"><span class="icon icon-link"></span></a></h2>
<p>Еще одна распространенная ошибка - изменение только свойства объекта или массива, а не самой ссылки.</p>
<p>Например, мы инициализируем объект пользователя с определенными свойствами ”имя” и ”возраст”. Однако в нашем компоненте есть кнопка, которая пытается обновить только имя пользователя, как показано ниже.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">()</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">userInfo</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> setUserInfo</span><span style="color:#A6ACCD">]</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">({</span><span style="color:#ADD7FF"> name</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">John</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> age</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 25</span><span style="color:#A6ACCD"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> changeName</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> ()</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setUserInfo</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">prevUserInfo</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> ({</span><span style="color:#91B4D5"> ...</span><span style="color:#E4F0FB">prevUserInfo</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> name</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Mark</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD"> }));</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			User: {userInfo</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name}</span></span>
<span class="line"><span style="color:#E4F0FB">			Age: {userInfo</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">age}</span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">button</span><span style="color:#91B4D5;font-style:italic"> onClick</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{changeName}>Change name&#x3C;/</span><span style="color:#5DE4C7">button</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Исходное состояние перед нажатием кнопки:</p>
<figure class="igorlov-figure"><img  src="/_astro/nj4ppg6qbxnskoz30kkg.B8qVaRSB_2vstfh.webp" alt="nj4ppg6qbxnskoz30kkg.png" width="776" height="242" loading="lazy" decoding="async"><figcaption>nj4ppg6qbxnskoz30kkg.png</figcaption></figure>
<p>Обновленное состояние после нажатия кнопки:</p>
<figure class="igorlov-figure"><img  src="/_astro/j95ir0tj6dxc87cz3k4h.CMAj07mF_Z2rKcx.webp" alt="j95ir0tj6dxc87cz3k4h.png" width="800" height="182" loading="lazy" decoding="async"><figcaption>j95ir0tj6dxc87cz3k4h.png</figcaption></figure>
<p>Как видите, вместо того, чтобы изменить конкретное свойство, пользователь больше не является объектом, а был перезаписан в строку “Mark”. Почему? Потому что setState() назначает новым состоянием то значение, которое было возвращено или передано ей. Эта ошибка часто встречается у разработчиков React, переходящих от компонентов на основе классов к функциональным компонентам, поскольку они привыкли обновлять состояние с помощью <code>this.state.user.property = newValue</code> в компонентах на основе классов.</p>
<p>Один из типичных старых способов сделать это - создать новую ссылку на объект и присвоить ей предыдущий объект user, непосредственно изменив имя пользователя.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">()</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">user</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> setUser</span><span style="color:#A6ACCD">]</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">({</span><span style="color:#ADD7FF"> name</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">John</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> age</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 25</span><span style="color:#A6ACCD"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> changeName</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> ()</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setUser</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">user</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> ({</span><span style="color:#91B4D5"> ...</span><span style="color:#E4F0FB">user</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> name</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Mark</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD"> }));</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			User: {user</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name}</span></span>
<span class="line"><span style="color:#E4F0FB">			Age: {user</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">age}</span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">button</span><span style="color:#91B4D5;font-style:italic"> onClick</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{changeName}>Change name&#x3C;/</span><span style="color:#5DE4C7">button</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Обновленное состояние после нажатия кнопки:</p>
<figure class="igorlov-figure"><img  src="/_astro/w1em03ugj103s8fd7ddu.BkPkWdXL_1Qqo2l.webp" alt="w1em03ugj103s8fd7ddu.png" width="800" height="209" loading="lazy" decoding="async"><figcaption>w1em03ugj103s8fd7ddu.png</figcaption></figure>
<p>Обратите внимание, что изменено только имя пользователя, а остальные свойства остались прежними.</p>
<p>Однако идеальным и современным способом обновления конкретного свойства, объекта или массива является использование оператора разброса ES6 (…). Это идеальный способ обновления конкретного свойства объекта или массива при работе с состоянием в функциональных компонентах. С помощью оператора spread вы можете легко распаковать свойства существующего элемента в новый элемент и одновременно изменить или добавить новые свойства в распакованный элемент.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">()</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">user</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> setUser</span><span style="color:#A6ACCD">]</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">({</span><span style="color:#ADD7FF"> name</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">John</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> age</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 25</span><span style="color:#A6ACCD"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> changeName</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> ()</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setUser</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">prevUser</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> ({</span><span style="color:#91B4D5"> ...</span><span style="color:#E4F0FB">prevUser</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> name</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Mark</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD"> }));</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			User: {user</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name}</span></span>
<span class="line"><span style="color:#E4F0FB">			Age: {user</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">age}</span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">button</span><span style="color:#91B4D5;font-style:italic"> onClick</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{changeName}>Change name&#x3C;/</span><span style="color:#5DE4C7">button</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Результат будет таким же, как и в предыдущем состоянии. После нажатия на кнопку обновляется свойство name, а остальные пользовательские свойства остаются прежними.</p>
<h2 id="управление-несколькими-полями-ввода-в-формах">Управление несколькими полями ввода в формах<a aria-hidden="true" tabindex="-1" href="#управление-несколькими-полями-ввода-в-формах"><span class="icon icon-link"></span></a></h2>
<p>Управление несколькими управляемыми полями ввода в форме обычно осуществляется вручную с помощью creсоздание нескольких функций <code>useState()</code> для каждого поля ввода и привязка каждой из них к соответствующему полю ввода. Например:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD">,</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">()</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">firstName</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> setFirstName</span><span style="color:#A6ACCD">]</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	// Render UI</span></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">form</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">label</span><span style="color:#91B4D5;font-style:italic"> htmlFor</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">firstName</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>First Name&#x3C;/</span><span style="color:#5DE4C7">label</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> id</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">firstName</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">First Name</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">label</span><span style="color:#91B4D5;font-style:italic"> htmlFor</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">lastName</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>Last Name&#x3C;/</span><span style="color:#5DE4C7">label</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> id</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">lastName</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Last Name</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">label</span><span style="color:#91B4D5;font-style:italic"> htmlFor</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">age</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>Age&#x3C;/</span><span style="color:#5DE4C7">label</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">number</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> id</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">age</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Age</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">label</span><span style="color:#91B4D5;font-style:italic"> htmlFor</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">username</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>Username&#x3C;/</span><span style="color:#5DE4C7">label</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> id</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">username</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Username</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">label</span><span style="color:#91B4D5;font-style:italic"> htmlFor</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">password</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>Password&#x3C;/</span><span style="color:#5DE4C7">label</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">password</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> id</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">password</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Password</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">label</span><span style="color:#91B4D5;font-style:italic"> htmlFor</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>Email&#x3C;/</span><span style="color:#5DE4C7">label</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> id</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Email</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">form</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Кроме того, вам придется создать функцию-обработчик для каждого из этих входов, чтобы создать двунаправленный поток данных, обновляющий каждое состояние при вводе значения. Это может быть довольно избыточным и отнимать много времени, поскольку требует написания большого количества кода, что снижает читабельность кодовой базы.</p>
<p>Однако можно управлять несколькими полями ввода в форме, используя только один хук useState. Для этого нужно сначала присвоить каждому полю ввода уникальное имя, а затем создать одну функцию <code>useState()</code>, которая инициализируется свойствами, идентичными именам полей ввода.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD">,</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> App</span><span style="color:#A6ACCD">()</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">user</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> setUser</span><span style="color:#A6ACCD">]</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">		firstName</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		lastName</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		age</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		username</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		password</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		email</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">form</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">firstName</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">First Name</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">lastName</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Last Name</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">number</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">age</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Age</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">username</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Username</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">password</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">password</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Password</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Email</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;/</span><span style="color:#5DE4C7">form</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>После этого мы создаем функцию события-обработчика, которая обновляет определенное свойство объекта user, чтобы отразить изменения в форме всякий раз, когда пользователь что-то вводит. Это можно сделать с помощью оператора spread и динамического доступа к имени конкретного элемента ввода, который вызвал функцию-обработчик, используя <code>event.target.elementsName = event.target.value</code>.</p>
<p>Другими словами, мы проверяем объект события, который обычно передается функции события, на наличие имени целевого элемента (которое совпадает с именем свойства в пользовательском состоянии) и обновляем его с помощью связанного значения в этом целевом элементе, как показано ниже:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD">,</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> UserForm</span><span style="color:#A6ACCD">()</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	// Initial state with default values</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">user</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> setUser</span><span style="color:#A6ACCD">]</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">		firstName</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		lastName</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		age</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		username</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		password</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		email</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	// Update the specific input field</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> handleChange</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">		const</span><span style="color:#A6ACCD"> {</span><span style="color:#E4F0FB"> name</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> value</span><span style="color:#A6ACCD"> }</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> e</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">target</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setUser</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">prevState</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> ({</span><span style="color:#91B4D5"> ...</span><span style="color:#E4F0FB">prevState</span><span style="color:#A6ACCD">,</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">name</span><span style="color:#A6ACCD">]:</span><span style="color:#E4F0FB"> value</span><span style="color:#A6ACCD"> }));</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	// Render UI</span></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">App</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">form</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> onChange</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{handleChange} </span><span style="color:#91B4D5;font-style:italic">name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">firstName</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">First Name</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> onChange</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{handleChange} </span><span style="color:#91B4D5;font-style:italic">name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">lastName</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Last Name</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">number</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> onChange</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{handleChange} </span><span style="color:#91B4D5;font-style:italic">name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">age</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Age</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> onChange</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{handleChange} </span><span style="color:#91B4D5;font-style:italic">name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">username</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Username</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">password</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> onChange</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{handleChange} </span><span style="color:#91B4D5;font-style:italic">name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">password</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Password</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">input</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> onChange</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{handleChange} </span><span style="color:#91B4D5;font-style:italic">name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> placeholder</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Email</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;/</span><span style="color:#5DE4C7">form</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>В этой реализации функция обработчика событий запускается для каждого пользовательского ввода. В этой функции события у нас есть функция состояния <code>setUser()</code>, которая принимает предыдущее/текущее состояние пользователя и распаковывает это состояние пользователя с помощью оператора spread. Затем мы проверяем объект события на наличие имени целевого элемента, вызвавшего функцию (которое соотносится с именем свойства в состоянии). Получив имя этого свойства, мы изменяем его, чтобы отразить введенное пользователем значение в форме.</p>
<h2 id="заключение">Заключение<a aria-hidden="true" tabindex="-1" href="#заключение"><span class="icon icon-link"></span></a></h2>
<p>Будучи разработчиком React, создающим высокоинтерактивные пользовательские интерфейсы, вы наверняка совершали некоторые из вышеперечисленных ошибок. Надеемся, что эти полезные практики использования UseState помогут вам избежать некоторых из этих потенциальных ошибок при использовании хука <code>useState</code> в дальнейшем при создании ваших приложений на базе React.</p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=5 распространенных ошибок UseState, которые допускают разработчики React&url=https://igorlov.ru/blog/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&url=https://igorlov.ru/blog/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react&title=5 распространенных ошибок UseState, которые допускают разработчики React&summary=Самым сложным аспектом разработки любого приложения часто является управление его состоянием. Однако часто нам приходится управлять несколькими частями состоян&source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/5-rasprostranenn-kh-oshybok-usestate-kotor-e-dopuskaiut-razrabotchyky-react&media=&description=Самым сложным аспектом разработки любого приложения часто является управление его состоянием. Однако часто нам приходится управлять несколькими частями состоян" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/5-meniaiuschykh-yhru-veb-saitov-kotor-e-dolzhn-b-t-u-kazhdoho-razrabotchyka" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> 5 меняющих игру веб-сайтов, которые должны быть у каждого разработчика </a> <a href="/blog/5-luchshykh-byblyotek-vspl-vaiuschykh-okon-dlia-react" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> 5 лучших библиотек всплывающих окон для React </a> </nav>  </div> </div> </article> <div class="container" data-astro-cid-axzg2cw6> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.D-6fTqBY.js" component-export="default" renderer-url="/_astro/client.Bd2Qst3j.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> </div> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.ChJFdf82.js" component-export="default" renderer-url="/_astro/client.44T8euMP.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-medium lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-blue dark:text-white" aria-label="logo" data-astro-cid-ijoll5s5> <svg width="1.44em" height="1em" viewBox="0 0 5660 3931" class="icon" data-astro-cid-ijoll5s5 data-icon="logo-one">  <use xlink:href="#ai:local:logo-one"></use>  </svg>  </a> <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>