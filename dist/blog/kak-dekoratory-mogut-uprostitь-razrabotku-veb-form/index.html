<!DOCTYPE html><html lang="ru"> <head><title>Как Декораторы Могут Упростить Разработку Веб-Форм - Фул...
</title><link rel="canonical" href="https://igorlov.ru/blog/kak-dekoratory-mogut-uprostit%D1%8C-razrabotku-veb-form"><meta name="description" content="Недавно, в рамках TC39, предложение по внедрению декораторов в ECMAScript достигло третьего пре-финального этапа. Немного позже Microsoft выпустила пятую...
"><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.9.1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_regular_.sihbnQqJ.css">
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#0d52a1;color:rgba(13,82,161,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw)}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.container[data-astro-cid-vcbh62el]{padding:min(2rem,1.2125rem + 1.05vw)}.list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.link[data-astro-cid-vcbh62el]{font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;padding:.125rem .75rem;font-size:min(1.5rem,1.1625rem + .45vw);line-height:var(--tw-lh)}
</style>
<link rel="stylesheet" href="/_astro/_single_.CzD8Xhhr.css">
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#27292d;border-color:rgba(39,41,45,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.comments[data-v-f9c4118f]{margin:auto;margin-top:1.25rem;width:100%;--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.comments:where([class=dark][data-v-f9c4118f],[class=dark] *[data-v-f9c4118f]){--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.giscus-frame[data-v-f9c4118f]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-f9c4118f],[class=dark] *[data-v-f9c4118f]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
</style><script type="module" src="/_astro/hoisted.CUFolni_.js"></script><style>[data-astro-transition-scope="astro-xdjatz7t-1"] { view-transition-name: blog-image-kak-dekoratory-mogut-uprostit\44C-razrabotku-veb-form; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-16 font-inter text-blue fluid:text-lg lg:pt-24 dark:bg-black dark:text-white"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-medium lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-blue dark:text-white" aria-label="logo" data-astro-cid-ijoll5s5> <svg width="1.44em" height="1em" viewBox="0 0 5660 3931" class="icon" data-astro-cid-ijoll5s5 data-icon="logo-one">  <symbol id="ai:local:logo-one"><g fill="currentColor"><path d="M1198.57 596.749c0 329.575-267.171 596.751-596.747 596.751-329.575 0-596.749-267.176-596.749-596.751S272.248 0 601.823 0c329.576 0 596.747 267.174 596.747 596.749Z"/><circle cx="3035.75" cy="617.751" r="596.749" transform="rotate(-90 3035.75 617.751)"/><path d="M3035.75 2736.81c329.57 0 596.75 267.18 596.75 596.75 0 329.58-267.18 596.75-596.75 596.75-329.58 0-596.75-267.17-596.75-596.75 0-329.57 267.17-596.75 596.75-596.75Z"/><circle cx="596.749" cy="1964.8" r="596.749"/><path d="M1193.5 3332.87c0 329.57-267.176 596.75-596.751 596.75S0 3662.44 0 3332.87c0-329.58 267.174-596.75 596.749-596.75 329.575 0 596.751 267.17 596.751 596.75Z"/><circle cx="5062.46" cy="617.751" r="596.749" transform="rotate(-90 5062.46 617.751)"/><circle cx="5062.46" cy="3333.56" r="596.749" transform="rotate(-90 5062.46 3333.56)"/></g></symbol><use xlink:href="#ai:local:logo-one"></use>  </svg>  </a> <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> Меню</button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> Закрыть</button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты </a> </li> </ul> </nav> </div>   <!-- <ThemeToggle client:only /> --> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <div class="container" data-astro-cid-vcbh62el> <ol class="list" role="list" data-astro-cid-vcbh62el> <li class="item" role="listitem" data-astro-cid-vcbh62el> <a class="link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="item" role="listitem" data-astro-cid-vcbh62el> <a class="link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </div> </nav>  <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <article data-astro-cid-axzg2cw6> <figure class="article__image" data-astro-cid-axzg2cw6> <picture data-astro-cid-axzg2cw6> <source srcset="/_astro/kak-dekoratory-mogut-uprostit%D1%8C-razrabotku-veb-form-Oct-24-2023.CKeZMpBi_Z1Bg2Ud.avif" type="image/avif"><source srcset="/_astro/kak-dekoratory-mogut-uprostit%D1%8C-razrabotku-veb-form-Oct-24-2023.CKeZMpBi_ZXGaaq.webp" type="image/webp"> <img src="/_astro/kak-dekoratory-mogut-uprostit%D1%8C-razrabotku-veb-form-Oct-24-2023.CKeZMpBi_Z1E2imv.png" alt="Как декораторы могут упростить разработку веб-форм" class="aspect-video h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-xdjatz7t-1" width="1120" height="580" decoding="async"> </picture> </figure> </article> <div class="container" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/как-закодить" class="categories__link" data-astro-cid-axzg2cw6> Как закодить  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Как декораторы могут упростить разработку веб-форм </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/javascript" data-astro-cid-axzg2cw6> JavaScript </a> </li><li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/mobx" data-astro-cid-axzg2cw6> MobX </a> </li><li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/react" data-astro-cid-axzg2cw6> React </a> </li><li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/typescript" data-astro-cid-axzg2cw6> TypeScript </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 24 окт., 2023 by Igor Gorlov </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div> <div class="article__content prose prose-zinc max-w-full break-words text-blue dark:prose-invert prose-headings:text-blue prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <!-- <TextAds /> --> <!-- <AdfoxTocAds blockId="adfox_17062261612859555" /> --> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/kak-dekoratory-mogut-uprostitь-razrabotku-veb-form" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/kak-dekoratory-mogut-uprostitь-razrabotku-veb-form" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Как декораторы могут упростить разработку веб-форм&url=https://igorlov.ru/blog/kak-dekoratory-mogut-uprostitь-razrabotku-veb-form" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&url=https://igorlov.ru/blog/kak-dekoratory-mogut-uprostitь-razrabotku-veb-form&title=Как декораторы могут упростить разработку веб-форм&summary=Недавно, в рамках TC39, предложение по внедрению декораторов в ECMAScript достигло третьего пре-финального этапа. Немного позже Microsoft выпустила пятую...
&source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/kak-dekoratory-mogut-uprostitь-razrabotku-veb-form&media=&description=Недавно, в рамках TC39, предложение по внедрению декораторов в ECMAScript достигло третьего пре-финального этапа. Немного позже Microsoft выпустила пятую...
" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <p>Недавно, в рамках TC39, предложение по внедрению декораторов в ECMAScript достигло третьего пре-финального этапа. Немного позже Microsoft выпустила пятую версию TypeScript, где новая реализация декораторов начала работать “из коробки” без экспериментальных флагов. Babel также взял на себя инициативу и в своей документации стал рекомендовать использовать новую реализацию декораторов. Все это означает, что декораторы наконец-то начинают полноценно входить в жизнь разработчиков JavaScript.</p>
<p>Именно по этой теме я решил рассказать, как с помощью декораторов можно улучшить опыт разработчика при создании форм.</p>
<p>Следует отметить, что в этой статье я буду рассказывать об подходе, основанном на использовании библиотеки MobX. Поэтому, если вы не используете MobX в своих проектах, статья может быть не так полезной, как могла бы быть. Однако вы можете прочесть ее как возможный источник вдохновения по созданию веб-форм.</p>
<!-- wp:rank-math/toc-block {"title":"Оглавление","headings":[{"key":"15396ecc-002b-478d-9e32-57904c058609","content":"Немного о предыстории","level":2,"link":"#немного-о-предыстории","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"def0d0c3-c76c-4817-b1b5-66872aa587f0","content":"Модель формы MobX","level":2,"link":"#модель-формы-mob-x","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"008accd1-bdb4-4160-8b16-6640a8ded88d","content":"Валидация формы","level":2,"link":"#валидация-формы","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"81b256e3-5511-47b1-8bbf-604c86ecfdeb","content":"Как выглядит функция-валидатор?","level":3,"link":"#как-выглядит-функция-валидатор","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"7ec8595f-b561-47fb-9840-342653ff8e35","content":"Условная валидация","level":3,"link":"#условная-валидация","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"1e7b0e9f-0034-4c54-9fed-b26d859a4ddd","content":"Когда происходит валидация?","level":3,"link":"#когда-происходит-валидация","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"d03162af-8cd3-4ae4-bf5d-586e46944ded","content":"Краткое резюме по валидации","level":3,"link":"#краткое-резюме-по-валидации","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"93d6b69f-f3ba-45c9-a1bb-b74c533bee76","content":"Отслеживание изменений формы","level":2,"link":"#отслеживание-изменений-формы","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"5764354e-7e62-42c8-9e91-873b7c6b5054","content":"Отслеживание сложных объектов","level":3,"link":"#отслеживание-сложных-объектов","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"8301b610-ad73-4def-82b2-084e73ccf2da","content":"Отслеживание вложенных схем","level":3,"link":"#отслеживание-вложенных-схем","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"0aff8b34-4404-4f5c-a51f-a3bc1c0be563","content":"Восстановление формы в исходное состояние","level":3,"link":"#восстановление-формы-в-исходное-состояние","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"d41ee38f-ea49-4983-9398-02ffad01c7cf","content":"Краткое заключение о слежении за изменениями","level":3,"link":"#краткое-заключение-о-слежении-за-изменениями","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"f8e597e0-d1fa-4cc5-9828-9de34224720d","content":"​Взаимодействие формы с сервером","level":2,"link":"#взаимодействие-формы-с-сервером","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"8581f8db-54ec-4520-8c7a-1bb1bdb27e53","content":"Инициализация","level":3,"link":"#инициализация","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"a9018503-6bf4-4fb6-9021-aa69f0b27512","content":"Презентация","level":3,"link":"#презентация","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"0c4d1ba5-fa18-4f02-a756-3bba23043993","content":"А как это использовать в React?","level":2,"link":"#а-как-это-использовать-в-react","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"c62cce68-7574-4328-ae5a-f16270590320","content":"Итак, означает ли это, что декораторы - это универсальное средство?","level":2,"link":"#итак-означает-ли-это-что-декораторы-это-универсальное-средство","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"3a478c7b-0bb3-4394-b7b9-6c344b1bcb99","content":"Конец","level":2,"link":"#конец","disable":false,"isUpdated":false,"isGeneratedLink":true}],"listStyle":"ul"} -->
<div class="wp-block-rank-math-toc-block" id="rank-math-toc"><h2>Оглавление</h2><nav><ul><li class=""><a href="#немного-о-предыстории">Немного о предыстории</a></li><li class=""><a href="#модель-формы-mob-x">Модель формы MobX</a></li><li class=""><a href="#валидация-формы">Валидация формы</a><ul><li class=""><a href="#как-выглядит-функция-валидатор">Как выглядит функция-валидатор?</a></li><li class=""><a href="#условная-валидация">Условная валидация</a></li><li class=""><a href="#когда-происходит-валидация">Когда происходит валидация?</a></li><li class=""><a href="#краткое-резюме-по-валидации">Краткое резюме по валидации</a></li></ul></li><li class=""><a href="#отслеживание-изменений-формы">Отслеживание изменений формы</a><ul><li class=""><a href="#отслеживание-сложных-объектов">Отслеживание сложных объектов</a></li><li class=""><a href="#отслеживание-вложенных-схем">Отслеживание вложенных схем</a></li><li class=""><a href="#восстановление-формы-в-исходное-состояние">Восстановление формы в исходное состояние</a></li><li class=""><a href="#краткое-заключение-о-слежении-за-изменениями">Краткое заключение о слежении за изменениями</a></li></ul></li><li class=""><a href="#взаимодействие-формы-с-сервером">​Взаимодействие формы с сервером</a><ul><li class=""><a href="#инициализация">Инициализация</a></li><li class=""><a href="#презентация">Презентация</a></li></ul></li><li class=""><a href="#а-как-это-использовать-в-react">А как это использовать в React?</a></li><li class=""><a href="#итак-означает-ли-это-что-декораторы-это-универсальное-средство">Итак, означает ли это, что декораторы - это универсальное средство?</a></li><li class=""><a href="#конец">Конец</a></li></ul></nav></div>
<!-- /wp:rank-math/toc-block -->
<h2 class="wp-block-heading" id="немного-о-предыстории">Немного о предыстории</h2>
<p>В моем предыдущем проекте мне пришлось разрабатывать множество сложных форм. Очень часто они состояли из десятков полей.</p>
<p>Большинство полей требовало валидации. Конечно, простые правила валидации, такие как проверка на заполненность поля или проверка правильности адреса электронной почты, возникали довольно часто. Но иногда эти правила были невероятно сложными. Например, в зависимости от того, что выбирает пользователь в одном поле, правила валидации для другого поля могли меняться. И в некоторых случаях было необходимо отключать валидацию одного поля при определенных значениях другого поля. И, конечно, для каждого поля могло быть несколько правил валидации, каждое из которых должно было выдавать свое собственное сообщение об ошибке.</p>
<p>Но валидация была только частью необходимой функциональности. Также нужно было отслеживать изменения в форме. Грубо говоря, отключать кнопку отправки, пока пользователь не внесет какие-либо изменения. Но, опять же, на формах было десятки полей, поэтому написание блоков if для каждого поля не было лучшим решением.</p>
<p>Ситуацию усугубляло то, что некоторые поля могли представлять собой массивы и наборы данных. И если пользователь удалял несколько значений из такого поля, а затем вводил те же значения вручную, форма должна была понимать, что вернулась к исходному состоянию. Кроме того, формы должны были уметь сбрасывать текущее состояние формы к исходному. И, конечно же, они должны были уметь взаимодействовать с сервером.</p>
<p>Я рассматривал различные библиотеки, такие как React Hook Form или Formik, но эти варианты меня не устроили. В масштабе этих требований код, даже с использованием этих библиотек, оказался слишком громоздким и трудноподдерживаемым. Поэтому я начал разрабатывать свое собственное решение.</p>
<h2 class="wp-block-heading" id="модель-формы-mob-x">Модель формы MobX</h2>
<p>Важным шагом было разделение представления и логики. Мне нужно было найти способ описать логику формы в отдельной функции или объекте и минимизировать необходимость в повторении кода насколько это возможно.</p>
<p>В итоге я пришел к выводу, что удобно описывать логику формы в отдельном классе JavaScript. Далее в тексте я буду называть такой класс “схемой формы”. Каждое свойство такого класса может представлять поле в форме или выполнять какой-либо вспомогательный функционал. С помощью декораторов можно присвоить необходимую логику для каждого свойства.</p>
<p>В самом простом представлении, такой объект является обычным MobX хранилищем. Например, в следующем фрагменте кода показан самый простой пример схемы формы, состоящей из двух полей: “Имя” и “Фамилия”. Пока без какой-либо логики.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> makeObservable</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> observable</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">mobx</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> BasicFormStore</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">	surname </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	constructor</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		makeObservable</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7;font-style:italic">this</span><span style="color:#A6ACCD">, {</span></span>
<span class="line"><span style="color:#ADD7FF">			name</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> observable</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">			surname</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> observable</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">		});</span></span>
<span class="line"><span style="color:#A6ACCD">	}</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<h2 class="wp-block-heading" id="валидация-формы">Валидация формы</h2>
<p>Что такое валидация поля? Это одно или несколько правил для проверки значения поля. В нашем случае “поле” - это свойство класса. Это означает, что с помощью декоратора @validate можно назначить несколько правил валидации для соответствующего свойства.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> validate</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@yoskutik/mobx-form-schema</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> makeObservable</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> observable</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">mobx</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> email</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> required</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">path/to/validators</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> LoginSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FBD0">validate</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FBD0">required</span><span style="color:#A6ACCD">(), </span><span style="color:#E4F0FBD0">email</span><span style="color:#A6ACCD">())</span></span>
<span class="line"><span style="color:#A6ACCD">	email </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	constructor</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#5DE4C7;font-style:italic">		super</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#E4F0FBD0">		makeObservable</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7;font-style:italic">this</span><span style="color:#A6ACCD">, {</span></span>
<span class="line"><span style="color:#ADD7FF">			email</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> observable</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">		});</span></span>
<span class="line"><span style="color:#A6ACCD">	}</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> schema</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> LoginSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isValid</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">errors</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// false, { email: 'The field is required' }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">email</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">invalid.email</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isValid</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">errors</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// false, { email: 'Invalid email format' }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">email</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">valid@email.com</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isValid</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">errors</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// true, {}</span></span>
<span class="line"></span></code></pre>
<p>Вы просто передаете несколько функций-валидаторов декоратору, и схема самостоятельно выполняет валидацию значения поля. Если есть несколько валидаторов, схема применяет их последовательно. И только если все правила успешно прошли, схема сообщает, что поле действительно.</p>
<p>И снова мы видим разделение кода. Логика формы хранится отдельно от объявления валидаторов. Конечно, это делается намеренно. Таким образом, формируется подход к написанию атомарных функций валидации. И благодаря этому общие правила могут легко повторно использоваться.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="как-выглядит-функция-валидатор">Как выглядит функция-валидатор?</h3>
<p>Функция-валидатор для схемы представляет собой просто функцию, которая возвращает либо строку, либо булево значение.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> const</span><span style="color:#ADD7FF"> required</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">value</span><span style="color:#91B4D5">?:</span><span style="color:#A6ACCDC0"> string</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">  if (</span><span style="color:#E4F0FB">value</span><span style="color:#A6ACCD">?.</span><span style="color:#E4F0FBD0">trim</span><span style="color:#A6ACCD">()) </span><span style="color:#5DE4C7C0">return</span><span style="color:#D0679D"> false</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7C0">  return</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">This field is required</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> const</span><span style="color:#ADD7FF"> email</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">value</span><span style="color:#91B4D5">:</span><span style="color:#A6ACCDC0"> string</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">  if (</span><span style="color:#A6ACCD">/</span><span style="color:#5FB3A1">\S</span><span style="color:#91B4D5">+</span><span style="color:#5FB3A1">@\S</span><span style="color:#91B4D5">+</span><span style="color:#5FB3A1">\.\S</span><span style="color:#91B4D5">+</span><span style="color:#A6ACCD">/</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">test</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">value</span><span style="color:#A6ACCD">)) </span><span style="color:#5DE4C7C0">return</span><span style="color:#D0679D"> false</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7C0">  return</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Invalid email format</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> const</span><span style="color:#ADD7FF"> minLength</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">min</span><span style="color:#91B4D5">:</span><span style="color:#A6ACCDC0"> number</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">value</span><span style="color:#91B4D5">:</span><span style="color:#A6ACCDC0"> string</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">  if (</span><span style="color:#E4F0FB">value</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">length</span><span style="color:#91B4D5"> >=</span><span style="color:#E4F0FB"> min</span><span style="color:#A6ACCD">) </span><span style="color:#5DE4C7C0">return</span><span style="color:#D0679D"> false</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7C0">  return</span><span style="color:#A6ACCD"> `</span><span style="color:#5DE4C7">Should be at least </span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">min</span><span style="color:#A6ACCD">}</span><span style="color:#5DE4C7"> characters.</span><span style="color:#A6ACCD">`</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<p>Если функция возвращает false, валидация считается успешной. И если строка или true - нет. Более того, строка, переданная в валидатор, становится сообщением об ошибке для поля.</p>
<p>В качестве первого входного параметра функция получает текущее значение свойства. И в случае сложной валидации каждая функция-валидатор получает весь объект-схему со всеми свойствами в качестве второго параметра.</p>
<p>Поле “подтверждение пароля” должно иметь точно такое же значение, как и поле “пароль”. Поле ввода даты “с” должно содержать дату, предшествующую дате в поле “по”. Это базовые примеры тех случаев, когда нам нужно использовать всю схему для валидации.</p>
<p>Приведенный ниже пример показывает форму регистрации с примером проверки поля подтверждения пароля.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> validate</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@yoskutik/mobx-form-schema</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> makeObservable</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> observable</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">mobx</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> email</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> minLength</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> required</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">path/to/validators</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> confirmPassword</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  // Let’s use the second argument in order to understand whether</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  //  the “confirmPassword” is the same as “password”</span></span>
<span class="line"><span style="color:#A6ACCD">  (</span><span style="color:#E4F0FB">confirmPasswordValue</span><span style="color:#91B4D5">:</span><span style="color:#A6ACCDC0"> string</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#91B4D5">:</span><span style="color:#A6ACCDC0"> SignUpSchema</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">    if (</span><span style="color:#E4F0FB">confirmPasswordValue</span><span style="color:#91B4D5"> ===</span><span style="color:#E4F0FB"> schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">password</span><span style="color:#A6ACCD">) </span><span style="color:#5DE4C7C0">return</span><span style="color:#D0679D"> false</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7C0">    return</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Passwords mismatched</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">  }</span></span>
<span class="line"><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> SignUpSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  // Email address field</span></span>
<span class="line"><span style="color:#A6ACCD">  @</span><span style="color:#E4F0FBD0">validate</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FBD0">required</span><span style="color:#A6ACCD">(), </span><span style="color:#E4F0FBD0">email</span><span style="color:#A6ACCD">())</span></span>
<span class="line"><span style="color:#A6ACCD">  email </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  // Password field</span></span>
<span class="line"><span style="color:#A6ACCD">  @</span><span style="color:#E4F0FBD0">validate</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FBD0">required</span><span style="color:#A6ACCD">(), </span><span style="color:#E4F0FBD0">minLength</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">8</span><span style="color:#A6ACCD">))</span></span>
<span class="line"><span style="color:#A6ACCD">  password </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  // Password confirmation field</span></span>
<span class="line"><span style="color:#A6ACCD">  @</span><span style="color:#E4F0FBD0">validate</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FBD0">required</span><span style="color:#A6ACCD">(), </span><span style="color:#E4F0FBD0">confirmPassword</span><span style="color:#A6ACCD">())</span></span>
<span class="line"><span style="color:#A6ACCD">  confirmPassword </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">  constructor</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#5DE4C7;font-style:italic">    super</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#E4F0FBD0">    makeObservable</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7;font-style:italic">this</span><span style="color:#A6ACCD">, {</span></span>
<span class="line"><span style="color:#ADD7FF">      email</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> observable</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">      password</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> observable</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">      confirmPassword</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> observable</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">    });</span></span>
<span class="line"><span style="color:#A6ACCD">  }</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="условная-валидация">Условная валидация</h3>
<p>Как я уже отмечал ранее, иногда могут возникать ситуации, когда валидацию нужно отключить. Поля могут быть необязательными или скрытыми по каким-то причинам, и в некоторых случаях валидация должна быть отключена в зависимости от значений в других полях.</p>
<p>Поскольку декоратор @validate уже используется для объявления обычной валидации, мы не можем использовать его. Но мы можем создать его модификатор: @validate.if. Такой модификатор будет работать практически так же, как и оригинальный, с единственным исключением: в дополнение к массиву валидаторов нужно передать предикатную функцию, которая говорит, нужна ли валидация в данный момент. Если предикат говорит, что валидация не требуется, свойство считается действительным.</p>
<p>Приведенный ниже пример показывает схему трех полей:</p>
<!-- wp:list {"ordered":true} -->
<ol><!-- wp:list-item -->
<li>Необязательное поле для ввода адреса электронной почты.</li>
<!-- /wp:list-item -->
<!-- wp:list-item -->
<li>Флажок, в котором пользователь говорит, что у него есть домашний питомец.</li>
<!-- /wp:list-item -->
<!-- wp:list-item -->
<li>Поле для ввода имени питомца. Если флажок активен, необходимо выполнять валидацию на предмет полноты поля.</li>
<!-- /wp:list-item --></ol>
<!-- /wp:list -->
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> validate</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@yoskutik/mobx-form-schema</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> makeObservable</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> observable</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> runInAction</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">mobx</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> email</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> required</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">path/to/validators</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> shouldValidatePetName</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">_name</span><span style="color:#91B4D5">:</span><span style="color:#A6ACCDC0"> string</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#91B4D5">:</span><span style="color:#A6ACCDC0"> ConditionalSchema</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">  schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">doesHavePet</span></span>
<span class="line"><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> ConditionalSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  // or it can be @validate.if(email => !!email, [email()])</span></span>
<span class="line"><span style="color:#A6ACCD">  @</span><span style="color:#E4F0FB">validate</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">if</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">Boolean</span><span style="color:#A6ACCD">, [</span><span style="color:#E4F0FBD0">email</span><span style="color:#A6ACCD">()])</span></span>
<span class="line"><span style="color:#A6ACCD">  email </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">  doesHavePet </span><span style="color:#91B4D5">=</span><span style="color:#D0679D"> false</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">  @</span><span style="color:#E4F0FB">validate</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">if</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">shouldValidatePetName</span><span style="color:#A6ACCD">, [</span><span style="color:#E4F0FBD0">required</span><span style="color:#A6ACCD">()])</span></span>
<span class="line"><span style="color:#A6ACCD">  petName </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">  constructor</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#5DE4C7;font-style:italic">    super</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#E4F0FBD0">    makeObservable</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7;font-style:italic">this</span><span style="color:#A6ACCD">, {</span></span>
<span class="line"><span style="color:#ADD7FF">      email</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> observable</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">      doesHavePet</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> observable</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">      petName</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> observable</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">    });</span></span>
<span class="line"><span style="color:#A6ACCD">  }</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> schema</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> ConditionalSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isValid</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">errors</span><span style="color:#A6ACCD">); </span><span style="color:#767C9DB0;font-style:italic">// true, {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">runInAction</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">doesHavePet</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7"> true</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isValid</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">errors</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// false, { petName: 'The value is required.' }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">runInAction</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">email</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">invalid.email</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isValid</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">errors</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// false, {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">//   petName: 'The value is required.',</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">//   email: 'Invalid email format.',</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// }</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<p>Это довольно простой пример валидации. Вы можете посмотреть более сложные примеры валидации, включая условную валидацию и правила, которые используют всю схему, на сайте документации.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="когда-происходит-валидация">Когда происходит валидация?</h3>
<p>По умолчанию схема вычисляет валидацию в функции autorun из библиотеки MobX. Благодаря этому валидация свойства автоматически пересчитывается при его изменении. Но из-за этого, если другие свойства схемы участвовали в валидации, то при их изменении также будет пересчитана валидация.</p>
<p>Та же самая логика применяется к функции условной валидации. Если изменено нужное свойство или свойство, участвующее в условии, предикатная функция будет вызвана снова.</p>
<p>Вам не нужно беспокоиться о лишних пересчетах. Благодаря оптимизациям MobX и MobX Form Schema их не происходит. Тем не менее, возможно отключить автоматическую валидацию и начать валидировать данные вручную. Вы можете посмотреть примеры ручной валидации по ссылке.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="краткое-резюме-по-валидации">Краткое резюме по валидации</h3>
<p>Эти преимущества могут показаться субъективными, но мне действительно понравился такой подход в разработке кода. Он хорошо читаем и легко поддерживается. Он достаточно гибок и даже в сложных случаях не заставляет вас писать сложную логику.</p>
<p>Недостатком может показаться необходимость писать валидаторы с нуля. Даже самые базовые. В то время как другие библиотеки поставляют их готовыми. Но у меня есть замечания по этому поводу:</p>
<p>Даже базовые правила могут различаться для разных проектов. Например, валидация номера телефона или адреса электронной почты может различаться в разных странах.</p>
<p>Приложение может поддерживать несколько языков. И даже в пределах одного языка могут возникнуть ситуации, когда одно и то же правило в разных полях должно выдавать разные сообщения об ошибке.</p>
<p>Обе эти точки приводят к необходимости предоставления функциональности для переопределения или настройки базовых валидаторов. Но, как вы сами видели, базовые валидаторы могут состоять всего из 3 строк кода. И для меня лучше написать 3 строки кода с нуля, чем писать их для настройки готовой функциональности “из коробки”.</p>
<p>Что также замечательно, MobX Form Schema работает с декораторами как новой, так и старой реализации. Однако новая реализация обладает хорошей поддержкой типов, поэтому я не могу передать валидатор для числа в свойство строкового типа.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> rule</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">value</span><span style="color:#91B4D5">:</span><span style="color:#A6ACCDC0"> number</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">  if (</span><span style="color:#E4F0FB">value</span><span style="color:#91B4D5"> ></span><span style="color:#5DE4C7"> 0</span><span style="color:#A6ACCD">) </span><span style="color:#5DE4C7C0">return</span><span style="color:#D0679D"> false</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7C0">  return</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">The value must be greater than 0</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> SignUpSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  // a typing error here, since `rule` must work with number properties</span></span>
<span class="line"><span style="color:#A6ACCD">  @</span><span style="color:#E4F0FBD0">validate</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FBD0">rule</span><span style="color:#A6ACCD">())</span></span>
<span class="line"><span style="color:#A6ACCD">  email </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<p>​</p>
<h2 class="wp-block-heading" id="отслеживание-изменений-формы">Отслеживание изменений формы</h2>
<p>Теперь давайте перейдем от валидации к отслеживанию изменений формы. Не сложно понять, что форма была изменена. Сначала вам нужно сохранить начальное состояние формы. Во-вторых, в нужный момент достаточно использовать такой кусок кода:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> isChanged</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> currentValue1</span><span style="color:#91B4D5"> !==</span><span style="color:#E4F0FB"> initialValue1</span></span>
<span class="line"><span style="color:#91B4D5">  ||</span><span style="color:#E4F0FB"> currentValue2</span><span style="color:#91B4D5"> !==</span><span style="color:#E4F0FB"> initialValue2</span></span>
<span class="line"><span style="color:#91B4D5">  ||</span><span style="color:#91B4D5"> ...</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<p>Это эффективный и простой способ, но он подходит только для простых форм. Чем больше полей в форме, тем длиннее будет это условие и тем сложнее будет поддерживать такой код.</p>
<p>Но это не единственная проблема. Помимо простых текстовых полей в форме могут быть более сложные поля. Например, на большинстве сайтов, связанных с карьерой, есть поле для указания навыков. И значение такого поля фактически должно быть либо массивом, либо множеством. И простое сравнение ссылок здесь не поможет понять, изменилось ли состояние формы.</p>
<p>Существует другой подход: глубокое сравнение.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">isEqual</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">lodash/isEqual</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> isChanged</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> isEqual</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">currentState</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">initialState</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span></code></pre>
<p>Этот подход решает описанные выше проблемы. Однако затем возникают проблемы с лишними вычислениями. Идеально, чтобы форма говорила, изменилась она или нет после любого взаимодействия пользователя. Но вызывать глубокое сравнение при каждом изменении может быть слишком ресурсозатратным.</p>
<p>MobX позволяет обойти обе эти проблемы. В схеме формы, при изменении определенного поля, происходит только сравнение, которое проверяет, изменилось ли именно это поле.</p>
<p>И чтобы активировать отслеживание изменений формы, достаточно использовать декоратор: @watch.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> UserSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FB">watch</span><span style="color:#A6ACCD"> name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Initial name</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FB">watch</span><span style="color:#A6ACCD"> surname </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Initial surname</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> schema</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> UserSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isChanged</span><span style="color:#A6ACCD">); </span><span style="color:#767C9DB0;font-style:italic">// false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">New Name</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span></span>
<span class="line"><span style="color:#E4F0FB">	schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isChanged</span><span style="color:#A6ACCD">, </span><span style="color:#767C9DB0;font-style:italic">// true</span></span>
<span class="line"><span style="color:#E4F0FB">	schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">getInitial</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">name</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">), </span><span style="color:#767C9DB0;font-style:italic">// 'Initial name'</span></span>
<span class="line"><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Initial name</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isChanged</span><span style="color:#A6ACCD">); </span><span style="color:#767C9DB0;font-style:italic">// false</span></span>
<span class="line"></span></code></pre>
<p>В этой форме флаг isChanged всегда будет равен false, если имя равно “Initial name”, а фамилия равна “Initial surname”. Даже если свойство изменит свое значение на другое, а затем вернется к исходному состоянию.</p>
<p>Декоратор @watch использует сравнение по ссылке и сообщает схеме, изменилось ли значение свойства по сравнению с его исходным состоянием.</p>
<p>Вы могли заметить, что в приведенном выше примере я не вызывал функцию makeObservable. Это потому, что по умолчанию @watch применяет observable.ref к свойствам. Это делается по логическим причинам - если вам нужно только сравнение по ссылке, вряд ли вам потребуется глубокое наблюдение через observable. Тем не менее, вы можете добавить его или любые другие модификации observable сами без проблем.</p>
<p>Более важно, сама схема не помнит свое исходное состояние. Но если вы примените @watch, схема сохранит исходное состояние только для нужных полей. Таким образом, нет лишних расходов памяти.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="отслеживание-сложных-объектов">Отслеживание сложных объектов</h3>
<p>Благодаря сравнению по ссылке, @watch в основном нужен для наблюдения за примитивными значениями. Немного сложнее, когда речь идет о наблюдении за объектами. Например, при проверке, изменился ли массив, нам нужно проверить количество элементов в начальном и текущем состояниях, а также убедиться, что элементы совпадают на каждой из позиций.</p>
<p>Но декораторы-модификаторы приходят нам на помощь снова. С их помощью мы можем создать такие модификаторы, в которых вместо сравнения по ссылке будет использоваться некий другой тип сравнения. Например, если вы хотите использовать массив значений, используйте @watch.array, и если есть множество, используйте @watch.set. По умолчанию эти декораторы будут применять к свойствам схемы observable.shallow.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> watch</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@yoskutik/mobx-form-schema</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> runInAction</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">mobx</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> ArraySchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FB">watch</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">array</span><span style="color:#A6ACCD"> skillsArray </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> [</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">HTML</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">CSS</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">JavaScript</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FB">watch</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">set</span><span style="color:#A6ACCD"> skillsSet </span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7"> new</span><span style="color:#E4F0FBD0"> Set</span><span style="color:#A6ACCD">([</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">HTML</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">CSS</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">JavaScript</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">]);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> schema</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> ArraySchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">runInAction</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">skillsArray</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> [</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">HTML</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">]));</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isChanged</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">changedProperties</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// true, Set(['skillsArray'])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">runInAction</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">skillsArray</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">push</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">CSS</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">JavaScript</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">));</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isChanged</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">changedProperties</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// false, Set()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">runInAction</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">skillsSet</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">delete</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">CSS</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">));</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isChanged</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">changedProperties</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// true, Set(['skillsSet'])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">runInAction</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">skillsSet</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">add</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">CSS</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">));</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isChanged</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">changedProperties</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// false, Set()</span></span>
<span class="line"></span></code></pre>
<p>Повторюсь, новые декораторы лучше работают с типизацией. Вы не можете применить @watch.array к свойству, не являющемуся массивом, или @watch.set к свойству, не являющемуся множеством.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="отслеживание-вложенных-схем">Отслеживание вложенных схем</h3>
<p>Схемы могут быть вложенными. Самая простая причина для этого - логическое разделение данных. Например, в форме информации о пользователе информация о его контактах может быть отдельной схемой, вложенной в главную схему.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> watch</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@yoskutik/mobx-form-schema</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> runInAction</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">mobx</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> ContactsSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FB">watch</span><span style="color:#A6ACCD"> tel </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">default tel value</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FB">watch</span><span style="color:#A6ACCD"> email </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">default email value</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> InfoSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FB">watch</span><span style="color:#A6ACCD"> name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FB">watch</span><span style="color:#A6ACCD"> surname </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FB">watch</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD"> contacts </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB"> ContactsSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> schema</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> InfoSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">runInAction</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">contacts</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">tel</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">new value</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">));</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isChanged</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">changedProperties</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// true, Set(['contacts'])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">runInAction</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">contacts</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">tel</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">default tel value</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">));</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isChanged</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">changedProperties</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// false, Set()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">runInAction</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">contacts</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> ContactsSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">()));</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">isChanged</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">changedProperties</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// false, Set()</span></span>
<span class="line"></span></code></pre>
<p>И, конечно, такая вложенная отдельная схема может использоваться в будущем без родительской схемы, если такая ситуация потребуется.</p>
<p>Кроме того, вы можете использовать модификатор @watch.schemasArray, если вам нужно использовать массив вложенных схем. Такой массив, например, может быть массивом блоков информации об опыте работы в форме резюме.</p>
<p>В случае, если у вас есть нестандартная структура данных, требующая нестандартной функции сравнения, вы можете создать собственную модификацию декоратора @watch с помощью метода watch.create. Но чтобы не раздувать статью, я просто скромно оставлю ссылку на документацию, если вас интересует просмотр примеров использования @watch.schemasArray и watch.create.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="восстановление-формы-в-исходное-состояние">Восстановление формы в исходное состояние</h3>
<p>В некоторых случаях функция восстановления формы может быть полезной. Особенно в формах редактирования с предзаполненными данными с сервера. И поскольку мы уже храним исходное состояние формы, нам совсем не сложно восстановить форму в исходное состояние.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> watch</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@yoskutik/mobx-form-schema</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> runInAction</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">mobx</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> BasicSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FB">watch</span><span style="color:#A6ACCD"> name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Joe</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">	@</span><span style="color:#E4F0FB">watch</span><span style="color:#A6ACCD"> surname </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Dough</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> schema</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> BasicSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">runInAction</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">	schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">new name</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#E4F0FB">	schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">surname</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">new surname</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">surname</span><span style="color:#A6ACCD">); </span><span style="color:#767C9DB0;font-style:italic">// 'new name', 'new surname'</span></span>
<span class="line"><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">reset</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">surname</span><span style="color:#A6ACCD">); </span><span style="color:#767C9DB0;font-style:italic">// 'Joe', 'Dough'</span></span>
<span class="line"></span></code></pre>
<p>И, конечно, массивы, множества, вложенные схемы и даже ваши собственные сущности (если вы описали их правильно) — все они будут корректно восстановлены.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="краткое-заключение-о-слежении-за-изменениями">Краткое заключение о слежении за изменениями</h3>
<p>Я кратко отмечу, что, как и с валидацией, изменения отслеживаются автоматически. Но, конечно, также доступна возможность вручную проверять изменения.</p>
<p>Итак, с помощью всего лишь пары декораторов и методов полностью автоматизировано отслеживание изменений формы. Независимо от сложности схемы или количества вложенных схем в ней, вы всегда сможете понять, изменилась ли ваша форма. И вы всегда сможете восстановить ее в исходное состояние.</p>
<p>Вы даже можете создать схему формы для настроек IDE. Обычно в таких формах много вкладок, внутри которых есть вложенные вкладки. И вы легко можете отслеживать изменения и сбрасывать форму полностью, только на определенной вкладке или только во вложенной вкладке.</p>
<p>При этом эти наблюдения достаточно дешевы. Когда поле меняется, проверяется только это поле.</p>
<p>И, конечно, то, что @watch и его модификации способны сами применять модификации MobX к свойствам, позволяет сократить ваш код еще больше.</p>
<h2 class="wp-block-heading" id="взаимодействие-формы-с-сервером">​Взаимодействие формы с сервером</h2>
<p>Иногда данные, полученные с сервера, требуют некоторой предварительной обработки перед использованием. Например, сервер не может отправить сущность Set или Date, но вам может быть удобнее использовать данные в этом формате.</p>
<p>Может быть и обратная ситуация, когда сервер требует данные в другом формате, чем тот, в котором они хранятся в схеме.</p>
<p>И обычно разработчики, которые испытывают такую необходимость, модифицируют данные после получения их, перед использованием или перед отправкой. Но с помощью схемы формы такие изменения можно описать непосредственно в схеме.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="инициализация">Инициализация</h3>
<p>В предыдущих примерах вы видели, что для создания схемы необходимо вызвать статический метод create. Этот метод может принимать объект в качестве аргумента, на основе которого схема может быть заполнена данными.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@yoskutik/mobx-form-schema</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> BasicSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">	surname </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> schema1</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> BasicSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema1</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema1</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">surname</span><span style="color:#A6ACCD">); </span><span style="color:#767C9DB0;font-style:italic">// '', ''</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> schema2</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> BasicSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">	name</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Joe</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">	surname</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Dough</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema2</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema2</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">surname</span><span style="color:#A6ACCD">); </span><span style="color:#767C9DB0;font-style:italic">// 'Joe', 'Dough'</span></span>
<span class="line"></span></code></pre>
<p>Вы также можете описать, как данные, полученные в этом методе, должны быть предварительно обработаны перед тем, как схема начнет их использовать. Для этого можно использовать декоратор @factory.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> factory</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@yoskutik/mobx-form-schema</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> createDate</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">data</span><span style="color:#91B4D5">:</span><span style="color:#A6ACCDC0"> string</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#5DE4C7"> new</span><span style="color:#E4F0FBD0"> Date</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">data</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> BasicSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">  @</span><span style="color:#E4F0FB">factory</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">set</span></span>
<span class="line"><span style="color:#A6ACCD">  set </span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7"> new</span><span style="color:#E4F0FBD0"> Set</span><span style="color:#A6ACCD">&#x3C;</span><span style="color:#A6ACCDC0">number</span><span style="color:#A6ACCD">>();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">  @</span><span style="color:#E4F0FBD0">factory</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">createDate</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">  date </span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7"> new</span><span style="color:#E4F0FBD0"> Date</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> schema</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> BasicSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">  set</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> [</span><span style="color:#5DE4C7">0</span><span style="color:#A6ACCD">,</span><span style="color:#5DE4C7"> 1</span><span style="color:#A6ACCD">,</span><span style="color:#5DE4C7"> 2</span><span style="color:#A6ACCD">],</span></span>
<span class="line"><span style="color:#ADD7FF">  date</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">2023-01-01T00:00:00.000Z</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">set</span><span style="color:#91B4D5"> instanceof</span><span style="color:#A6ACCDC0"> Set</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">date</span><span style="color:#91B4D5"> instanceof</span><span style="color:#A6ACCDC0"> Date</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// true, true</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="презентация">Презентация</h3>
<p>Поскольку каждая схема содержит вспомогательные данные и методы, для вас может быть полезно получить объект, содержащий исключительно полезные данные из схемы. Для этого вы можете использовать геттер presentation схемы, который по умолчанию создает копию схемы без вспомогательных методов и свойств.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@yoskutik/mobx-form-schema</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> BasicSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Joe</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">	surname </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Dough</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> schema</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> BasicSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">presentation</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">//   name: 'Joe',</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">//   surname: 'Dough',</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// }</span></span>
<span class="line"></span></code></pre>
<p>Вы также можете использовать декоратор @present для изменения содержимого объекта презентации. И даже вы можете убрать некоторые из его свойств. Например, вам, вероятно, не захочется отправлять значение поля подтверждения пароля на сервер. Для этого вы можете использовать модификатор @present.hidden.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> present</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@yoskutik/mobx-form-schema</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> presentUsername</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">username</span><span style="color:#91B4D5">:</span><span style="color:#A6ACCDC0"> string</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> `</span><span style="color:#5DE4C7">@</span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">username</span><span style="color:#A6ACCD">}`</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> class</span><span style="color:#ADD7FF"> BasicSchema</span><span style="color:#5DE4C7"> extends</span><span style="color:#ADD7FF"> FormSchema</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">  @</span><span style="color:#E4F0FBD0">present</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">presentUsername</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">  username </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">joe-man</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">  name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Joe</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">  @</span><span style="color:#E4F0FB">present</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">hidden</span></span>
<span class="line"><span style="color:#A6ACCD">  someUtilityProperty </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">utility data</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> schema</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> BasicSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#E4F0FB">console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">presentation</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">//   name: 'Joe',</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">//   username: '@joe-man',</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// }</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<p>И впоследствии вы можете использовать этот объект презентации при отправке данных на сервер.</p>
<h2 class="wp-block-heading" id="а-как-это-использовать-в-react">А как это использовать в React?</h2>
<p>Я создал MobX Form Schema как пакет с минимальным набором зависимостей. Поэтому необязательно использовать React. Единственное, что вам нужно - это MobX, который должен быть в проекте.</p>
<p>Но тем не менее, я понимаю, что в большинстве случаев MobX используется с React, поэтому я подготовил пример использования моей библиотеки в приложении React. Но чтобы не раздувать статью, я просто предоставлю вам ссылки на нее: веб-документация, CodeSandbox.io, StackBlitz.com.</p>
<p>И просто, чтобы вас заинтересовать, я кратко покажу, как может выглядеть компонент для отображения формы с именем питомца из раздела “Условная валидация”.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> const</span><span style="color:#E4F0FB"> ConditionalExample</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> observer</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> schema</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useMemo</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> ConditionalSchema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">(), []);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">form</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			{</span><span style="color:#767C9DB0;font-style:italic">/* Since error output is standardized, TextField is able to display them itself */</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">TextField</span><span style="color:#91B4D5;font-style:italic"> schema</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{schema} </span><span style="color:#91B4D5;font-style:italic">field</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> label</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">E-mail</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">CheckboxField</span><span style="color:#91B4D5;font-style:italic"> schema</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{schema} </span><span style="color:#91B4D5;font-style:italic">field</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">doesHavePet</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> label</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">I have a pet</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">			{schema</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">doesHavePet </span><span style="color:#91B4D5">&#x26;&#x26;</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">TextField</span><span style="color:#91B4D5;font-style:italic"> schema</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{schema} </span><span style="color:#91B4D5;font-style:italic">label</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Pet's name</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> field</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">petName</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5;font-style:italic"> required</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#A6ACCD">			)</span><span style="color:#E4F0FB">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">button</span><span style="color:#91B4D5;font-style:italic"> type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">submit</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>Submit&#x3C;/</span><span style="color:#5DE4C7">button</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">form</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span></code></pre>
<h2 class="wp-block-heading" id="итак-означает-ли-это-что-декораторы-это-универсальное-средство">Итак, означает ли это, что декораторы - это универсальное средство?</h2>
<p>Пытаюсь ли я утверждать в своей статье, что этот подход к разработке форм - единственно правильный? Нет, конечно, в разработке нет универсальных решений. Однако мне кажется, что этот подход действительно упрощает процесс разработки. И, что важно, он почти не влияет на размер вашего бандла - за исключением самого MobX, вся функциональность, которую я описал, хранится в пакете менее чем 4 КБ. И учитывая, что вам придется писать меньше кода, вы только выиграете в размере бандла.</p>
<p>Более того, этот подход работает хорошо как с небольшими, так и с крупными формами.</p>
<p>Однако, да, вам понадобится MobX. По крайней мере, в моей реализации. Если кто-то сделает что-то подобное для других менеджеров состояния, мне будет интересно это увидеть.</p>
<h2 class="wp-block-heading" id="конец">Конец</h2>
<p>В статье я показал большую часть, но не всю функциональность схемы формы. Я не показал, как работает валидация и отслеживание изменений в ручном режиме; я не показал все модификаторы декораторов. И вообще, если вас интересует этот подход к разработке форм, я рекомендую посетить <a href="https://yoskutik.github.io/mobx-form-schema/#/">сайт с документацией</a>. Там есть много полезных материалов, включая полезные сценарии использования схемы формы. Я жду ваших отзывов в комментариях. Как вам этот подход в целом?</p>
<p>Ссылка на <a href="https://www.npmjs.com/package/@yoskutik/mobx-form-schema">пакет npm</a>.</p>
<p>Пока.</p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/kak-dekoratory-mogut-uprostitь-razrabotku-veb-form" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/kak-dekoratory-mogut-uprostitь-razrabotku-veb-form" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Как декораторы могут упростить разработку веб-форм&url=https://igorlov.ru/blog/kak-dekoratory-mogut-uprostitь-razrabotku-veb-form" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&url=https://igorlov.ru/blog/kak-dekoratory-mogut-uprostitь-razrabotku-veb-form&title=Как декораторы могут упростить разработку веб-форм&summary=Недавно, в рамках TC39, предложение по внедрению декораторов в ECMAScript достигло третьего пре-финального этапа. Немного позже Microsoft выпустила пятую...
&source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/kak-dekoratory-mogut-uprostitь-razrabotku-veb-form&media=&description=Недавно, в рамках TC39, предложение по внедрению декораторов в ECMAScript достигло третьего пре-финального этапа. Немного позже Microsoft выпустила пятую...
" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/osvoenie-fullstack-app-dev-s-pomoshьyu-fastapi-react-js-i-chakra-ui" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> Освоение Fullstack App Dev с помощью FastAPI, React.js и Chakra UI </a> <a href="/blog/kubernetes-dlya-sisadmina-vvodim-kubevirt" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> Kubernetes для сисадмина - вводим KubeVirt </a> </nav>  </div> </div> </article> <div class="container" data-astro-cid-axzg2cw6> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.D-6fTqBY.js" component-export="default" renderer-url="/_astro/client.Bd2Qst3j.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> </div> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.ChJFdf82.js" component-export="default" renderer-url="/_astro/client.44T8euMP.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-medium lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-blue dark:text-white" aria-label="logo" data-astro-cid-ijoll5s5> <svg width="1.44em" height="1em" viewBox="0 0 5660 3931" class="icon" data-astro-cid-ijoll5s5 data-icon="logo-one">  <use xlink:href="#ai:local:logo-one"></use>  </svg>  </a> <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>