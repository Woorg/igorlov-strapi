<!DOCTYPE html><html lang="ru"> <head><title>Оптимизация Скорости Пересчета Стилей Только С Помощью...
</title><link rel="canonical" href="https://igorlov.ru/blog/optimizaciya-skorosti-perescheta-stilej-tol%D1%8Cko-s-pomosh%D1%8Cyu-css"><meta name="description" content="Взаимодействие с элементами на веб-странице обычно приводит к какому-то результату. Например, нажатие на кнопку может открывать выпадающее меню. Как...
"><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.5.1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ViewTransitions.astro_astro_type_script_index_0_lang.DqfSmqP7.js"></script><link rel="stylesheet" href="/_astro/_regular_.uIaUWrkB.css" />
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw);padding-left:min(2rem,1.2125rem + 1.05vw);padding-right:min(2rem,1.2125rem + 1.05vw);padding-top:1rem;padding-bottom:1rem}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.breadcrumbs__link[data-astro-cid-vcbh62el]{border-radius:9999px;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover{--tw-bg-opacity: 1;background-color:#fce4e1;background-color:rgba(252,228,225,var(--tw-bg-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]{padding:.125rem .75rem}.breadcrumbs__link[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#6a6a6a;background-color:rgba(106,106,106,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#8a8a93;background-color:rgba(138,138,147,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}
</style>
<link rel="stylesheet" href="/_astro/_single_.CyWP_2Jq.css" />
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#020202;border-color:rgba(2,2,2,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.theme-toggle[data-v-8d8d9c54]{width:1.25rem;height:1.25rem}
.comments[data-v-533071ec]{margin:auto;margin-top:1.25rem;max-width:42rem;--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.comments:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame[data-v-533071ec]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
</style><script type="module" src="/_astro/page.CFW0rSNk.js"></script><style>[data-astro-transition-scope="astro-vgmtzcrq-1"] { view-transition-name: blog-image-optimizaciya-skorosti-perescheta-stilej-tol\44Cko-s-pomosh\44Cyu-css; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-14 font-inter text-dark fluid:text-lg dark:bg-black dark:text-white"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ИГ ФCВР</a>  <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> </button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> </button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/projects" class="nav__link" data-astro-cid-7wkmezxd> Работы. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты. </a> </li> </ul> </nav> </div>  <script type="module">document.addEventListener("astro:page-load",()=>{const t=document.querySelector(".nav__open"),n=document.querySelector(".nav__close"),e=document.querySelector(".nav__container"),o=document.querySelectorAll(".nav__item");t?.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")}),n?.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")}),o.forEach(a=>{window.matchMedia("( max-width: 1024px)").matches&&a.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")})})});</script> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="IJ3dh" component-url="/_astro/ThemeToggle.kpN4JrWQ.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-rq644orq&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;ThemeToggle&quot;,&quot;value&quot;:true}"></astro-island> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <div class="blocks__container container"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <ol class="breadcrumbs__list" role="list" data-astro-cid-vcbh62el> <li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </nav>  </div> <div class="blocks__container container"> <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/учебник" class="categories__link" data-astro-cid-axzg2cw6> Учебник  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Оптимизация скорости пересчета стилей только с помощью CSS </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/css" data-astro-cid-axzg2cw6> Css </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 23 окт., 2023 by Igor Gorlov </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div>  <figure class="article__image" data-astro-cid-axzg2cw6> <picture> <source srcset="/_astro/optimizaciya-skorosti-perescheta-stilej-tol%D1%8Cko-s-pomosh%D1%8Cyu-css-Oct-23-2023.DpGmyHa5_1jRTAL.avif" type="image/avif"><source srcset="/_astro/optimizaciya-skorosti-perescheta-stilej-tol%D1%8Cko-s-pomosh%D1%8Cyu-css-Oct-23-2023.DpGmyHa5_Z2aEmzy.webp" type="image/webp"> <img src="/_astro/optimizaciya-skorosti-perescheta-stilej-tol%D1%8Cko-s-pomosh%D1%8Cyu-css-Oct-23-2023.DpGmyHa5_1DS819.png" alt="Оптимизация скорости пересчета стилей только с помощью CSS" class="aspect-auto h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-vgmtzcrq-1" width="1200" height="500" decoding="async"> </picture> </figure>  <div class="article__content prose prose-zinc max-w-full dark:prose-invert prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:-mx-12 prose-figure:w-screen prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <div id="adfox_17062261612859555"></div> <script>(function(){const blockId = "adfox_17062261612859555";

	window.yaContextCb = window.yaContextCb || [];
	window.yaContextCb.push(() => {
		Ya.adfoxCode.createAdaptive(
			{
				ownerId: 1493338,
				containerId: blockId,
				params: {
					p1: 'dawgg',
					p2: 'p',
				},
			},
			['desktop', 'tablet', 'phone'],
			{
				tabletWidth: 830,
				phoneWidth: 480,
				isAutoReloads: true,
			},
		);
	});
})();</script> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/optimizaciya-skorosti-perescheta-stilej-tolьko-s-pomoshьyu-css" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/optimizaciya-skorosti-perescheta-stilej-tolьko-s-pomoshьyu-css" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Оптимизация скорости пересчета стилей только с помощью CSS&#38;url=https://igorlov.ru/blog/optimizaciya-skorosti-perescheta-stilej-tolьko-s-pomoshьyu-css" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/optimizaciya-skorosti-perescheta-stilej-tolьko-s-pomoshьyu-css&#38;title=Оптимизация скорости пересчета стилей только с помощью CSS&#38;summary=Взаимодействие с элементами на веб-странице обычно приводит к какому-то результату. Например, нажатие на кнопку может открывать выпадающее меню. Как...
&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/optimizaciya-skorosti-perescheta-stilej-tolьko-s-pomoshьyu-css&#38;media=&#38;description=Взаимодействие с элементами на веб-странице обычно приводит к какому-то результату. Например, нажатие на кнопку может открывать выпадающее меню. Как...
" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <p>Взаимодействие с элементами на веб-странице обычно приводит к какому-то результату. Например, нажатие на кнопку может открывать выпадающее меню. Как разработчики, мы знаем, что происходит за кулисами в браузере. Однако пользователи могут видеть только непосредственные результаты своих действий.</p>
<p>Задачей браузера является максимально быстро отрисовывать веб-страницу и все ее элементы. Чем быстрее браузер рендерит страницу, тем более плавным будет опыт пользователя.</p>
<p>Разработчики часто имеют мощные компьютеры и быстрые сетевые соединения, и поэтому им не составляет труда загрузить веб-страницу. Не у всех есть такая возможность, поэтому вам придется учитывать пользователей с медленными компьютерами и сетями.</p>
<p>В этой статье мы рассмотрим, как оптимизировать пересчет стилей в CSS. Мы обсудим, как работает процесс отрисовки браузера, как ваш способ написания CSS влияет на его скорость и многое другое, включая:</p>
<!-- wp:rank-math/toc-block {"headings":[{"key":"1269cff5-0edb-4d5b-890b-b31f7f4310fa","content":"Понимание работы отрисовки браузера","level":2,"link":"#понимание-работы-отрисовки-браузера","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"9617679c-8041-4657-8729-cc868c921e49","content":"Что такое инвалидация стилей?","level":3,"link":"#что-такое-инвалидация-стилей","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"e0a7481d-dd1c-49fe-a609-9dc24e63a440","content":"Типы инвалидации","level":3,"link":"#типы-инвалидации","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"ef001962-9bff-4461-a8bb-0d488ad7d8d8","content":"Что такое пересчет стилей?","level":3,"link":"#что-такое-пересчет-стилей","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"789f0cd4-7d54-4b14-8750-8dc3a59d1326","content":"Движки отрисовки браузера","level":3,"link":"#движки-отрисовки-браузера","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"77a8443a-c7a6-4be2-9aa8-05e5c2f0f7a5","content":"Исследование компоновки, рисования и компоновки","level":3,"link":"#исследование-компоновки-рисования-и-компоновки","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"84ea8f1f-127f-4e55-9243-fae652fac88c","content":"Оптимизация производительности стилей с помощью CSS","level":2,"link":"#оптимизация-производительности-стилей-с-помощью-css","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"b1581591-c217-460a-92cb-71257d2858ed","content":"Используйте более компактные деревья DOM","level":3,"link":"#используйте-более-компактные-деревья-dom","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"3206bb96-3c03-4dc5-b91f-95596b288824","content":"Уменьшите размер ваших таблиц стилей","level":3,"link":"#уменьшите-размер-ваших-таблиц-стилей","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"64568e31-1fde-459f-96f2-707b01d7b2e2","content":"Оптимизируйте использование селекторов","level":3,"link":"#оптимизируйте-использование-селекторов","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"5a4ab74c-2801-4c31-910a-d15fd85851f8","content":"Избегайте частых или больших мутаций DOM","level":3,"link":"#избегайте-частых-или-больших-мутаций-dom","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"2a6ad39d-4944-490f-ba26-2cbae9df9217","content":"Сравнение оптимальных и неоптимальных анимаций CSS","level":2,"link":"#сравнение-оптимальных-и-неоптимальных-анимаций-css","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"3b70777a-2a70-4101-ba4e-1cf782e4f877","content":"Заключение","level":2,"link":"#заключение","disable":false,"isUpdated":false,"isGeneratedLink":true}],"listStyle":"ul"} -->
<div class="wp-block-rank-math-toc-block" id="rank-math-toc"><nav><ul><li class=""><a href="#понимание-работы-отрисовки-браузера">Понимание работы отрисовки браузера</a><ul><li class=""><a href="#что-такое-инвалидация-стилей">Что такое инвалидация стилей?</a></li><li class=""><a href="#типы-инвалидации">Типы инвалидации</a></li><li class=""><a href="#что-такое-пересчет-стилей">Что такое пересчет стилей?</a></li><li class=""><a href="#движки-отрисовки-браузера">Движки отрисовки браузера</a></li><li class=""><a href="#исследование-компоновки-рисования-и-компоновки">Исследование компоновки, рисования и компоновки</a></li></ul></li><li class=""><a href="#оптимизация-производительности-стилей-с-помощью-css">Оптимизация производительности стилей с помощью CSS</a><ul><li class=""><a href="#используйте-более-компактные-деревья-dom">Используйте более компактные деревья DOM</a></li><li class=""><a href="#уменьшите-размер-ваших-таблиц-стилей">Уменьшите размер ваших таблиц стилей</a></li><li class=""><a href="#оптимизируйте-использование-селекторов">Оптимизируйте использование селекторов</a></li><li class=""><a href="#избегайте-частых-или-больших-мутаций-dom">Избегайте частых или больших мутаций DOM</a></li></ul></li><li class=""><a href="#сравнение-оптимальных-и-неоптимальных-анимаций-css">Сравнение оптимальных и неоптимальных анимаций CSS</a></li><li class=""><a href="#заключение">Заключение</a></li></ul></nav></div>
<!-- /wp:rank-math/toc-block -->
<p>Позже в этой статье мы рассмотрим CSS-анимацию как специфический случай проблемы пересчета стилей, сравнив оптимальные и неоптимальные примеры анимации. Вы можете посмотреть нашу демонстрацию анимации на CodePen.</p>
<h2 class="wp-block-heading" id="понимание-работы-отрисовки-браузера">Понимание работы отрисовки браузера</h2>
<p>Когда веб-страница в первый раз загружается, браузер смотрит на HTML и создает древо объектов документа (DOM). Затем он смотрит на CSS и применяет его правила к соответствующим селекторам в этом древе DOM. Наконец, он выполняет JavaScript-код и отображает страницу.</p>
<p>Представьте себе страницу с навигационной панелью, где одна из ссылок в навигационной панели открывает выпадающее меню. Когда вы открываете это меню, браузер добавляет новый элемент на страницу. Затем он повторяет процесс получения HTML, создания элемента, применения стилей CSS и отображения его на странице.</p>
<p>Этот процесс может занять всего несколько секунд или даже миллисекунд, но в фоновом режиме происходит многое. Создание выпадающего меню изменяет DOM, что вызовет процесс отрисовки. Процесс отрисовки начинается с инвалидации и пересчета стилей.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="что-такое-инвалидация-стилей">Что такое инвалидация стилей?</h3>
<p>Инвалидация - это процесс, который выявляет и помечает все элементы, которые требуют переоформления после изменения DOM.</p>
<p>Как только браузер находит все измененные элементы в новом дереве DOM, он создает набор инвалидации - коллекцию элементов, которые нужно переоформить после мутации. Пересчет стилей начинается после этого.</p>
<p>Изменение DOM также можно описать как мутацию DOM. Это включает в себя действия, такие как переключение имени класса, добавление или удаление элемента, анимации наведения и так далее.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="типы-инвалидации">Типы инвалидации</h3>
<p>Существует два типа инвалидации: мгновенная и ожидающая.</p>
<p>Мгновенная инвалидация происходит, когда изменения сразу влияют на инвалидные элементы, например, переключение имени класса:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E4F0FB">dropdownMenu</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">classList</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">toggle</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">active</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span></code></pre>
<p>Этот JavaScript-код переключает активный класс, который открывает и закрывает выпадающее меню. Браузер создает набор инвалидации, и так как действие должно произойти сразу после нажатия на ссылку, элементы переоформляются немедленно.</p>
<p>Ожидающая инвалидация происходит, когда браузер не уверен, какие элементы изменятся. Например, если вы меняете CSS-переменные, браузер создает набор инвалидации для всех элементов, использующих переменную. Однако он не пересчитывает стили сразу же.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="что-такое-пересчет-стилей">Что такое пересчет стилей?</h3>
<p>Теперь, когда у браузера есть список инвалидных элементов, пришло время добавить стили. Браузер находит CSS-правила, применяющиеся к этим инвалидным элементам, и вычисляет их значения в процессе сопоставления селекторов:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E4F0FBD0;font-style:italic">.</span><span style="color:#5FB3A1;font-style:italic">dropdown</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">	display</span><span style="color:#A6ACCD">: </span><span style="color:#ADD7FF">none</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	position</span><span style="color:#A6ACCD">: </span><span style="color:#ADD7FF">absolute</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	left</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">0</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	top</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">100%</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	background-color</span><span style="color:#A6ACCD">: #</span><span style="color:#E4F0FB">22232e</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">/* Показывать выпадающее меню при нажатии на ссылку */</span></span>
<span class="line"><span style="color:#E4F0FBD0;font-style:italic">.</span><span style="color:#5FB3A1;font-style:italic">dropdown</span><span style="color:#E4F0FBD0;font-style:italic">.</span><span style="color:#5FB3A1;font-style:italic">active</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">	display</span><span style="color:#A6ACCD">: </span><span style="color:#ADD7FF">block</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Первый набор CSS-правил устанавливает значение display в none. Это становится недействительным, когда вы нажимаете на ссылку, потому что у нас теперь есть новый селектор класса — active — с отображением, установленным в block. Затем браузер находит и применяет новое CSS-правило перед отображением страницы:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">// Показать/скрыть выпадающее меню при нажатии на ссылку</span></span>
<span class="line"><span style="color:#E4F0FB">dropdownLink</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">addEventListener</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">click</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#91B4D5">function</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">event</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FB">	event</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">preventDefault</span><span style="color:#A6ACCD">(); </span><span style="color:#767C9DB0;font-style:italic">// предотвратить переход по ссылке</span></span>
<span class="line"><span style="color:#E4F0FB">	dropdownMenu</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">classList</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">toggle</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">active</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span></code></pre>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="движки-отрисовки-браузера">Движки отрисовки браузера</h3>
<p>Каждый браузер имеет свой движок отрисовки с основной задачей отображать веб-страницу как можно быстрее. Этот движок управляет инвалидацией стилей и пересчетом стилей.</p>
<p>Blink служит движком отрисовки для Chrome и других браузеров на основе Chromium, таких как Opera и Edge. В то время как Gecko является движком отрисовки для Firefox, а WebKit — движком отрисовки для Safari.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="исследование-компоновки-рисования-и-компоновки">Исследование компоновки, рисования и компоновки</h3>
<p>Перед тем как браузер отобразит окончательную страницу, в процессе отрисовки проходят еще три этапа: компоновка, рисование и компоновка.</p>
<img width="730" height="411" src="https://res.cloudinary.com/practicaldev/image/fetch/s--6JmktNlG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://blog.logrocket.com/wp-content/uploads/2023/09/img1-Browser-rendering-pipeline.png" alt="Infographic Of Browser Rendering Pipeline Showing Steps In Order: Invalidation And Recalculation, Layout, Painting, Compositing, Webpage Is Visible">
<p>Изменения в DOM могут влиять на компоновку веб-страницы. Браузеру, возможно, придется вычислить новый размер или позицию элементов на странице. Некоторые CSS-свойства, которые могут вызвать это, включают margin, border и padding.</p>
<p>После этапа компоновки браузер может потребоваться перерисовать элементы, которые изменились или были добавлены на страницу. Рисование включает в себя заполнение пикселей цветом.</p>
<p>Компоновка происходит, когда браузер объединяет разные слои веб-страницы и отображает одно окончательное изображение. Это самый быстрый и менее ресурсозатратный процесс.</p>
<h2 class="wp-block-heading" id="оптимизация-производительности-стилей-с-помощью-css">Оптимизация производительности стилей с помощью CSS</h2>
<p>Как мы видели, браузер управляет пересчетом стилей с помощью движка отрисовки. Мы не можем непосредственно наблюдать, как это происходит, или видеть, как это работает, но мы знаем, что способ, которым вы обрабатываете свой CSS, может влиять на скорость пересчета стилей. Давайте рассмотрим несколько примеров.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="используйте-более-компактные-деревья-dom">Используйте более компактные деревья DOM</h3>
<p>Большие и глубокие деревья DOM могут замедлить производительность. Если есть слишком много элементов HTML, браузеру потребуется больше времени для отрисовки страницы:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E4F0FB">&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#5FB3A1;font-style:italic"> id</span><span style="color:#A6ACCD">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">container</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">	&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#5FB3A1;font-style:italic"> class</span><span style="color:#A6ACCD">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">header</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">Это заголовок</span><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">	&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">	&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#5FB3A1;font-style:italic"> class</span><span style="color:#A6ACCD">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">content</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">Это абзац</span><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">	&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#5FB3A1;font-style:italic"> class</span><span style="color:#A6ACCD">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">footer</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">Это нижний колонтитул</span><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"></span></code></pre>
<p>Использование более семантических элементов вместо постоянного использования div может помочь создать более компактное дерево DOM:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E4F0FB">&#x3C;</span><span style="color:#5DE4C7">header</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">	&#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">Это заголовок</span><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">header</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">&#x3C;</span><span style="color:#5DE4C7">article</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">Это абзац</span><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">article</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">&#x3C;</span><span style="color:#5DE4C7">footer</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">Это нижний колонтитул</span><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">footer</span><span style="color:#E4F0FB">></span></span>
<span class="line"></span></code></pre>
<p>Иметь более компактное дерево DOM также снизит количество инвалидации после мутации. Семантика помогает браузеру понять назначение элемента и ускорить его отображение. Код также становится более читаемым.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="уменьшите-размер-ваших-таблиц-стилей">Уменьшите размер ваших таблиц стилей</h3>
<p>Меньшее количество CSS-правил упрощает работу браузера, уменьшая количество инвалидаций и оптимизируя пересчет стилей. Использование CSS-переменных может помочь избежать повторяющегося кода.</p>
<p>Предположим, что у header и footer одинаковый цвет фона:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">header</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">	background-color</span><span style="color:#A6ACCD">: #</span><span style="color:#E4F0FB">00c2cb</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"><span style="color:#5DE4C7">footer</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">	background-color</span><span style="color:#A6ACCD">: #</span><span style="color:#E4F0FB">00c2cb</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"><span style="color:#A6ACCD">/Альтернатива/ </span><span style="color:#5DE4C7">header</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#5DE4C7">footer</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">	background-color</span><span style="color:#A6ACCD">: #</span><span style="color:#E4F0FB">00c2cb</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Если происходит мутация, которая затрагивает их обоих, например, изменение тем, браузер создаст два набора инвалидации. Когда используются CSS-переменные, браузер создает единый набор инвалидации для каждого элемента, использующего эту переменную:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E4F0FBD0;font-style:italic">:</span><span style="color:#91B4D5;font-style:italic">root</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	--bg-color: #</span><span style="color:#E4F0FB">00c2cb</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">header</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#5DE4C7">footer</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">	background-color</span><span style="color:#A6ACCD">: var(--bg-color);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Препроцессор, такой как Sass, также может дополнительно поддерживать этот процесс.</p>
<p>Если на вашей странице слишком много элементов и их нельзя уменьшить, рассмотрите возможность использования нескольких таблиц стилей.</p>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="оптимизируйте-использование-селекторов">Оптимизируйте использование селекторов</h3>
<p>Браузеры больше обращают внимание на селекторы, чем на применяемые к ним CSS-правила. Без селекторов браузер не знал бы, что стилизовать в первую очередь. Если селекторы слишком сложные или неспецифичные, это может занять больше времени для отрисовки страницы.</p>
<p>Поэтому лучше быть специфичными при использовании селекторов — например, использовать селекторы класса и идентификатора для целирования элементов. Примеры неспецифичных селекторов включают *, div, p, a и так далее.</p>
<p>Также избегайте селекторов потомков, так как они могут потребовать от браузера инвалидации многих дочерних элементов. Если вы хотите выбрать вложенный элемент, вам придется использовать правило вида .a .b {…}:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E4F0FB">&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">Лорем, ипсум долор сит амет консектетур адиписичинг элит.</span><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"></span></code></pre>
<p>Если вы хотите стилизовать эти элементы, вот как это можно сделать:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">div</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">/CSS-правила/</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"><span style="color:#5DE4C7">div</span><span style="color:#5DE4C7"> p</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">/CSS-правила/</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<p>С изменением браузер должен будет инвалидировать как родительские, так и дочерние элементы. Как и в предыдущем примере, это означает два набора инвалидации. Браузер читает справа налево, по мере продвижения вверх по DOM, поэтому сначала он найдет элемент p и затем перейдет к div.</p>
<p>В отличие от этого, с одним конкретным селектором браузер может сосредотачиваться только на его соответствии CSS-правилам:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E4F0FB">&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">	&#x3C;</span><span style="color:#5DE4C7">p</span><span style="color:#5FB3A1;font-style:italic"> class</span><span style="color:#A6ACCD">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">Лорем, ипсум долор сит амет консектетур адиписичинг элит.</span><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">p</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"></span></code></pre>
<p>С конкретным именем класса, вот как можно стилизовать абзац:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E4F0FBD0;font-style:italic">.</span><span style="color:#5FB3A1;font-style:italic">text</span><span style="color:#A6ACCD">{</span></span>
<span class="line"><span style="color:#A6ACCD">/CSS-правила/</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="избегайте-частых-или-больших-мутаций-dom">Избегайте частых или больших мутаций DOM</h3>
<p>Изменение одновременно многих элементов или частые изменения замедлят процесс отрисовки. Частые мутации означают, что браузер должен создавать больше наборов инвалидации для каждого затронутого элемента.</p>
<p>Держитесь в пределах разумных рамок с анимациями или используйте их только для интерактивных элементов.</p>
<h2 class="wp-block-heading" id="сравнение-оптимальных-и-неоптимальных-анимаций-css">Сравнение оптимальных и неоптимальных анимаций CSS</h2>
<p>Один из способов внесения изменений в DOM — это анимация с использованием CSS. Браузер анимирует свойства CSS по-разному, и некоторые методы требуют больше системных ресурсов, чем другие.</p>
<p>Посмотрите следующую <a href="https://codepen.io/oscar-jite/pen/JjwjOry">анимацию на CodePen</a>.</p>
<p>Они выглядят одинаково, верно? Но браузер выполняет больше работы для отрисовки правого блока.</p>
<p>Для первого блока анимируется свойство transform, и оно транслируется вдоль оси Y на -20px. Для второго блока анимируется свойство margin-top и изменяется на -20px.</p>
<p>Вот HTML:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E4F0FB">&#x3C;</span><span style="color:#5DE4C7">body</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">	&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#5FB3A1;font-style:italic"> class</span><span style="color:#A6ACCD">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">box</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">	&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#5FB3A1;font-style:italic"> class</span><span style="color:#A6ACCD">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">box-2</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">&#x3C;/</span><span style="color:#5DE4C7">body</span><span style="color:#E4F0FB">></span></span>
<span class="line"></span></code></pre>
<p>И вот CSS:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">div</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">	height</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">250px</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	width</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">200px</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	background</span><span style="color:#A6ACCD">: #</span><span style="color:#E4F0FB">00c2cb</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	border</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">2px</span><span style="color:#ADD7FF"> solid</span><span style="color:#A6ACCD"> #</span><span style="color:#E4F0FB">22232e</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	border-radius</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">20px</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	margin</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">20px</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"><span style="color:#E4F0FBD0;font-style:italic">.</span><span style="color:#5FB3A1;font-style:italic">box</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">	animation</span><span style="color:#A6ACCD">: translate </span><span style="color:#5DE4C7">1s</span><span style="color:#ADD7FF"> infinite</span><span style="color:#ADD7FF"> alternate</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"><span style="color:#E4F0FBD0;font-style:italic">.</span><span style="color:#5FB3A1;font-style:italic">box-2</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">	animation</span><span style="color:#A6ACCD">: margin </span><span style="color:#5DE4C7">1s</span><span style="color:#ADD7FF"> infinite</span><span style="color:#ADD7FF"> alternate</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"><span style="color:#A6ACCD">@keyframes </span><span style="color:#E4F0FB">translate</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	100% {</span></span>
<span class="line"><span style="color:#ADD7FF">		transform</span><span style="color:#A6ACCD">: translateY(</span><span style="color:#5DE4C7">-20px</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	}</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"><span style="color:#A6ACCD">@keyframes </span><span style="color:#E4F0FB">margin</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">	100% {</span></span>
<span class="line"><span style="color:#ADD7FF">		margin-top</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">-20px</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">	}</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>На любом браузере на основе Chromium откройте инспектор и нажмите на три точки в правом верхнем углу вкладки. Выберите Дополнительные инструменты, затем Отрисовка и, наконец, Мигание при рисовании:</p>
<img width="730" height="411" src="https://res.cloudinary.com/practicaldev/image/fetch/s--VhsjDh7X--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://blog.logrocket.com/wp-content/uploads/2023/09/img2-Chromium-browser-devtools-Paint-Flashing.png" alt="Screenshot Of Chromium Browser Devtools Showing How To Enable Paint Flashing">
<p>Эта настройка покажет вам, когда браузер выполняет процесс рисования, мигая зеленым цветом. Обратите внимание, что вы можете не видеть мигание при рисовании в CodePen, поэтому вам, возможно, стоит использовать живой предпросмотр.</p>
<p>Вот запись анимации с выбранной опцией мигания при рисовании:</p>
<img width="730" height="411" data-animated="true" src="https://res.cloudinary.com/practicaldev/image/fetch/s--JOg9gU7e--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://blog.logrocket.com/wp-content/uploads/2023/09/img3-Animation-paint-flashing-selected.gif" alt="Two Animated Squares Side By Side With Paint Flashing Selected">
<p>Браузеру приходится постоянно перерисовывать блок справа с помощью анимации margin на каждом кадре анимации. Это означает, что для отрисовки этого блока используется больше ресурсов, что может быть проблемой на медленном компьютере.</p>
<p>Мы также можем использовать вкладку Производительность в инструментах разработчика вашего браузера на основе Chromium, чтобы отслеживать, сколько времени занимает каждый этап в процессе отрисовки. С использованием вкладки Производительность вы можете анализировать, какие операции в вашей веб-странице занимают больше времени.</p>
<p>Изменение оптимальной анимации на анимацию с transform:</p>
<img width="730" height="411" src="https://res.cloudinary.com/practicaldev/image/fetch/s--4qkNikAn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://blog.logrocket.com/wp-content/uploads/2023/09/img4-Performance-data-box-transform-animation.png" alt="Performance Data From Browser Devtools For Box Animated With Transform Property">
<p>Запись длится около пяти секунд. Обратите внимание, что мы устанавливаем снижение производительности CPU в 6 раз медленнее, чтобы имитировать работу пользователя на медленном устройстве или с медленным сетевым подключением.</p>
<p>Как видно, отрисовка заняла 778 миллисекунд, включая компоновку и сведение слоев. Рисование заняло 480 миллисекунд. Также имеется 1877 миллисекунд простоя.</p>
<p>Теперь рассмотрим данные для блока, анимированного с использованием свойства margin-top:</p>
 <img width="730" height="411" src="https://res.cloudinary.com/practicaldev/image/fetch/s--w9gcBj6V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://blog.logrocket.com/wp-content/uploads/2023/09/Performance-data-box-animated-transform-property.png" alt="Performance Data From Browser Devtools For Box Animated Using Margin Top Property">
<p>Здесь имеется значительная разница в скорости. Время отрисовки сократилось до всего 12 миллисекунд, а рисование уменьшилось до 13 миллисекунд. При этом браузер простаивает в течение 4471 миллисекунд — это много времени простоя для браузера.</p>
<p>Мы можем ближе рассмотреть анимацию с использованием свойства margin-top, выделив небольшой участок. Вы можете наблюдать, когда вызываются пересчеты стилей и как долго они занимают:</p>
<img width="730" height="492" data-animated="true" src="https://res.cloudinary.com/practicaldev/image/fetch/s--ONr8I52M--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://blog.logrocket.com/wp-content/uploads/2023/09/img5-Margin-animation-small-section-highlighted.gif" alt="Small Section Of Margin Animation Performance Data In Browser Devtools Highlighted To Show When Style Recalculations Are Triggered And How Long They Take">
<p>Все это отсутствует в анимации с использованием свойства transform.</p>
<p>Это всего лишь один специфический случай, но другие свойства, которые не вызывают шаги компоновки или рисования, включают opacity и filter. Элемент с установленным значением display: none все равно виден браузеру, поэтому я бы посоветовал использовать opacity с самого начала.</p>
<p>К сожалению, не существует четкого списка свойств, потребляющих много ресурсов. Уменьшайте размер ваших таблиц стилей, оптимизируйте селекторы и не увлекайтесь CSS-анимациями, и у вас все будет в порядке.</p>
<h2 class="wp-block-heading" id="заключение">Заключение</h2>
<p>Как говорит нам эффект бабочки, небольшие изменения (в вашем CSS) могут оказать огромное влияние в других местах (на производительность вашего приложения). В этой статье мы рассмотрели, как браузер отрисовывает страницу после любого изменения, что может вызвать проблемы с производительностью и что можно сделать, чтобы избежать таких проблем.</p>
<p>Также важно слушать жалобы пользователей, так как они лучше всего знают, что не работает должным образом на стороне клиента. Оптимизация пересчета стилей с помощью CSS может помочь улучшить пользовательский опыт и обеспечить правильное отображение веб-страницы даже для пользователей с медленными устройствами или сетевыми подключениями.</p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/optimizaciya-skorosti-perescheta-stilej-tolьko-s-pomoshьyu-css" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/optimizaciya-skorosti-perescheta-stilej-tolьko-s-pomoshьyu-css" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Оптимизация скорости пересчета стилей только с помощью CSS&#38;url=https://igorlov.ru/blog/optimizaciya-skorosti-perescheta-stilej-tolьko-s-pomoshьyu-css" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/optimizaciya-skorosti-perescheta-stilej-tolьko-s-pomoshьyu-css&#38;title=Оптимизация скорости пересчета стилей только с помощью CSS&#38;summary=Взаимодействие с элементами на веб-странице обычно приводит к какому-то результату. Например, нажатие на кнопку может открывать выпадающее меню. Как...
&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/optimizaciya-skorosti-perescheta-stilej-tolьko-s-pomoshьyu-css&#38;media=&#38;description=Взаимодействие с элементами на веб-странице обычно приводит к какому-то результату. Например, нажатие на кнопку может открывать выпадающее меню. Как...
" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/ponimanie-obuektno-orientirovannogo-programmirovaniya-oop-v-javascript" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> Понимание объектно-ориентированного программирования (ООП) в JavaScript </a> <a href="/blog/ispolnenie-javascript-v-kontekste-vypolneniya" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> Исполнение JavaScript в контексте выполнения </a> </nav>  </div> </article> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.svLg6TOn.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> <astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.BwogX8bT.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  </div> <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ИГ ФCВР</a>  <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>