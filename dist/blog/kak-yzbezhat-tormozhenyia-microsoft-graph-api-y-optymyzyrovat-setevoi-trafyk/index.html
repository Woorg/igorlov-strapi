<!DOCTYPE html><html lang="ru"> <head><title>Как избежать торможения Microsoft Graph API и оптимизировать сетевой трафик | Игорь Горлов - Фронтeндер</title><link rel="canonical" href="https://igorlov.ru/blog/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk"><meta name="description" content="За последние несколько месяцев я получил множество запросов от клиентов о том, как избежать дросселирования Microsoft Graph API и вообще как оптимизировать сет"><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.5.1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_regular_.uIaUWrkB.css" />
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw);padding-left:min(2rem,1.2125rem + 1.05vw);padding-right:min(2rem,1.2125rem + 1.05vw);padding-top:1rem;padding-bottom:1rem}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.breadcrumbs__link[data-astro-cid-vcbh62el]{border-radius:9999px;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover{--tw-bg-opacity: 1;background-color:#fce4e1;background-color:rgba(252,228,225,var(--tw-bg-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]{padding:.125rem .75rem}.breadcrumbs__link[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#6a6a6a;background-color:rgba(106,106,106,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#8a8a93;background-color:rgba(138,138,147,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}
</style>
<link rel="stylesheet" href="/_astro/_single_.CyWP_2Jq.css" />
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#020202;border-color:rgba(2,2,2,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.comments[data-v-533071ec]{margin:auto;margin-top:1.25rem;max-width:42rem;--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.comments:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame[data-v-533071ec]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
.theme-toggle[data-v-8d8d9c54]{width:1.25rem;height:1.25rem}
</style><script type="module" src="/_astro/hoisted.DYPnEDpO.js"></script><style>[data-astro-transition-scope="astro-vgmtzcrq-1"] { view-transition-name: blog-image-kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-14 font-inter text-dark fluid:text-lg dark:bg-black dark:text-white"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ИГ ФCВР</a>  <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> </button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> </button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/projects" class="nav__link" data-astro-cid-7wkmezxd> Работы. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты. </a> </li> </ul> </nav> </div>   <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="IJ3dh" component-url="/_astro/ThemeToggle.kpN4JrWQ.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-rq644orq&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;ThemeToggle&quot;,&quot;value&quot;:true}"></astro-island> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <div class="blocks__container container"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <ol class="breadcrumbs__list" role="list" data-astro-cid-vcbh62el> <li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </nav>  </div> <div class="blocks__container container"> <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/учебник" class="categories__link" data-astro-cid-axzg2cw6> Учебник  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Как избежать торможения Microsoft Graph API и оптимизировать сетевой трафик </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/microsoft-graph-sdk" data-astro-cid-axzg2cw6> Microsoft Graph SDK </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 15 дек., 2023 by Igor Gorlov </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div>  <figure class="article__image" data-astro-cid-axzg2cw6> <picture> <source srcset="/_astro/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk-Dec-15-2023.DDGWztp7_ZgKWRU.avif" type="image/avif"><source srcset="/_astro/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk-Dec-15-2023.DDGWztp7_1J0IFm.webp" type="image/webp"> <img src="/_astro/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk-Dec-15-2023.DDGWztp7_ZY90xu.png" alt="Как избежать торможения Microsoft Graph API и оптимизировать сетевой трафик" class="aspect-auto h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-vgmtzcrq-1" width="1200" height="500" decoding="async"> </picture> </figure>  <div class="article__content prose prose-zinc max-w-full dark:prose-invert prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:-mx-12 prose-figure:w-screen prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <div id="adfox_17062261612859555"></div> <script>(function(){const blockId = "adfox_17062261612859555";

	window.yaContextCb = window.yaContextCb || [];
	window.yaContextCb.push(() => {
		Ya.adfoxCode.createAdaptive(
			{
				ownerId: 1493338,
				containerId: blockId,
				params: {
					p1: 'dawgg',
					p2: 'p',
				},
			},
			['desktop', 'tablet', 'phone'],
			{
				tabletWidth: 830,
				phoneWidth: 480,
				isAutoReloads: true,
			},
		);
	});
})();</script> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Как избежать торможения Microsoft Graph API и оптимизировать сетевой трафик&#38;url=https://igorlov.ru/blog/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk&#38;title=Как избежать торможения Microsoft Graph API и оптимизировать сетевой трафик&#38;summary=За последние несколько месяцев я получил множество запросов от клиентов о том, как избежать дросселирования Microsoft Graph API и вообще как оптимизировать сет&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk&#38;media=&#38;description=За последние несколько месяцев я получил множество запросов от клиентов о том, как избежать дросселирования Microsoft Graph API и вообще как оптимизировать сет" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <details open class="toc px-5 border border-gray-light lg:px-10 py-2 cursor-pointer"><summary class="toc__title text-xl font-medium">Содержание</summary><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#как-работает-дросселирование-microsoft-graph">Как работает дросселирование Microsoft Graph</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#как-избежать-дросселирования">Как избежать дросселирования</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#как-реализовать-стратегии-дросселирования">Как реализовать стратегии дросселирования</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#заключение">Заключение</a></li></ol></details open><p>За последние несколько месяцев я получил множество запросов от клиентов о том, как избежать дросселирования Microsoft Graph API и вообще как оптимизировать сетевой трафик для Graph API.</p>
<h2 id="как-работает-дросселирование-microsoft-graph"><a href="https://dev.to/this-is-learning/how-to-avoid-microsoft-graph-api-throttling-and-optimize-network-traffic-5c2g#how-microsoft-graph-throttling-works" rel="noopener noreferrer nofollow" target="_blank"></a>Как работает дросселирование Microsoft Graph<a aria-hidden="true" tabindex="-1" href="#как-работает-дросселирование-microsoft-graph"><span class="icon icon-link"></span></a></h2>
<p>Дросселирование - это механизм, который Microsoft Graph использует для предотвращения чрезмерного использования ресурсов и поддержания работоспособности службы. Когда приложение делает слишком много запросов за короткий промежуток времени или превышает лимиты службы для определенных ресурсов или операций, Microsoft Graph может ограничить или заблокировать любые дальнейшие запросы от этого приложения на определенный период времени. В этом случае Microsoft Graph возвращает код состояния HTTP 429 (Слишком много запросов), а также заголовок Retry-After, указывающий, сколько времени приложение должно ждать, прежде чем повторить запрос.</p>
<p>Поведение дросселирования может зависеть от различных факторов, таких как тип запроса (GET, POST, PATCH и т. д.), масштаб ограничения (на приложение, на арендатора, на пользователя и т. д.), задействованная служба или ресурс (Outlook, OneDrive, Teams и т. д.), а также текущая нагрузка и состояние службы. Поэтому <strong>невозможно точно предсказать, когда и как произойдет дросселирование для конкретного приложения</strong>.</p>
<h2 id="как-избежать-дросселирования"><a href="https://dev.to/this-is-learning/how-to-avoid-microsoft-graph-api-throttling-and-optimize-network-traffic-5c2g#how-to-avoid-throttling" rel="noopener noreferrer nofollow" target="_blank"></a>Как избежать дросселирования<a aria-hidden="true" tabindex="-1" href="#как-избежать-дросселирования"><span class="icon icon-link"></span></a></h2>
<p>Лучший способ избежать дросселирования - разработать приложение таким образом, чтобы минимизировать количество и частоту запросов к Microsoft Graph API. Вот несколько лучших практик, которые вы можете применить для достижения этой цели:</p>
<ul>
<li><strong>Применяйте принцип наименьших привилегий</strong>. Запрашивайте только те разрешения, которые необходимы вашему приложению для выполнения его функций, и используйте наименее привилегированный тип разрешения для каждого сценария. Например, если вашему приложению нужно только прочитать профиль вошедшего пользователя, запросите делегированное разрешение User.Read вместо разрешений User.ReadBasic.All или User.Read.All. Это уменьшит влияние вашего приложения на службу и другие приложения или арендаторов.</li>
<li><strong>Используйте пакетную обработку</strong>. Если вашему приложению необходимо выполнить несколько запросов к Microsoft Graph API, воспользуйтесь функцией [JSON batching], чтобы объединить их в один запрос. Это сократит количество HTTP-соединений и повысит эффективность работы сети. Вы можете объединить до 20 запросов в один пакетный запрос, если они не являются взаимозависимыми и их размер не превышает 20 КБ.</li>
<li><strong>Используйте пагинацию</strong>. Если вашему приложению необходимо получить большой объем данных из Microsoft Graph API, например список пользователей или сообщений, воспользуйтесь функцией [пагинации], чтобы получать данные небольшими фрагментами, а не запрашивать их все сразу. Это позволит снизить нагрузку на службу и избежать таймаутов или неполных ответов. Вы можете использовать параметр запроса top, чтобы указать размер страницы (до 1000 элементов на страницу), и использовать свойство nextLink или deltaLink в ответе, чтобы получить следующую страницу или дельту изменений.</li>
<li><strong>Используйте фильтрацию, сортировку и проекцию</strong>. Если вашему приложению требуется только подмножество данных или определенный порядок данных из Microsoft Graph API, используйте функции [фильтрация], [сортировка] и [проекция], чтобы уменьшить объем данных, возвращаемых службой. Это повысит производительность и пропускную способность вашего приложения. Вы можете использовать параметр запроса filter для применения логических операторов или функций к свойствам ресурсов, использовать параметр запроса orderby для сортировки результатов по одному или нескольким свойствам, а также использовать параметр запроса select для указания в ответе только тех свойств, которые вам нужны.</li>
<li>Получайте только ту информацию, которая вам нужна**. Если вашему приложению нужны только два или три поля для сущности, используйте параметр [select], чтобы получить только эти поля. Это сократит время ответа и, конечно, сетевой трафик.</li>
</ul>
<h2 id="как-реализовать-стратегии-дросселирования"><a href="https://dev.to/this-is-learning/how-to-avoid-microsoft-graph-api-throttling-and-optimize-network-traffic-5c2g#how-to-implement-throttling-strategies" rel="noopener noreferrer nofollow" target="_blank"></a>Как реализовать стратегии дросселирования<a aria-hidden="true" tabindex="-1" href="#как-реализовать-стратегии-дросселирования"><span class="icon icon-link"></span></a></h2>
<p>Даже если вы следуете приведенным выше лучшим практикам, все равно существует вероятность того, что ваше приложение может столкнуться с дросселированием Microsoft Graph API по различным причинам, не зависящим от вас. Поэтому важно реализовать некоторые стратегии в коде приложения, чтобы изящно справляться с дросселированием и должным образом повторять неудачные запросы. Вот некоторые стратегии, которые вы можете реализовать:</p>
<ul>
<li><strong>Использование экспоненциального отката</strong>. Когда ваше приложение получает ответ 429 от Microsoft Graph API, оно должно подождать в течение времени, указанного в заголовке Retry-After, прежде чем повторить запрос. Однако, поскольку нет гарантии, что запрос будет успешным по истечении этого времени, рекомендуется использовать алгоритм экспоненциального отката, чтобы увеличивать время ожидания по экспоненте после каждого последующего отказа.e, вплоть до максимального предела. Это уменьшит вероятность перегрузки службы и повысит вероятность успеха. Вы также можете добавить некоторую случайность или дрожание во время ожидания, чтобы избежать проблем с синхронизацией с другими приложениями или запросами.</li>
<li><strong>Используйте адаптивное дросселирование</strong>. В некоторых случаях ваше приложение может не получать 429 ответ от Microsoft Graph API, но при этом испытывать некоторые признаки дросселирования, такие как повышенная задержка, неполные результаты или ошибки службы. Это может указывать на то, что служба испытывает высокую нагрузку или ухудшение работоспособности и применяет некоторые адаптивные механизмы дросселирования, чтобы справиться с ситуацией. В этом случае ваше приложение должно следить за производительностью и качеством ответов и соответствующим образом регулировать частоту запросов. Например, вы можете использовать заголовки [Retry-After] или [X-Ms-Retry-After-Ms], заголовки [X-Ms-Resource-Quota] и [X-Ms-Resource-Usage] или заголовок [Diagnostics], чтобы получить некоторые подсказки о состоянии службы и рекомендуемых действиях.</li>
<li><strong>Используйте Microsoft Graph SDKs</strong>. Если вы используете один из [Microsoft Graph SDKs] для доступа к Microsoft Graph API, вы можете воспользоваться некоторыми встроенными функциями, которые автоматически обрабатывают дросселирование или предоставляют некоторые опции для настройки политики повторных попыток. Например, в Microsoft Graph SDK для .NET есть [RetryHandler] промежуточное программное обеспечение, которое реализует экспоненциальный алгоритм отката с джиттером и уважает заголовок Retry-After. Вы также можете настроить количество повторных попыток, задержку между ними и коды состояния HTTP, которые вызывают повторную попытку.</li>
</ul>
<h2 id="заключение"><a href="https://dev.to/this-is-learning/how-to-avoid-microsoft-graph-api-throttling-and-optimize-network-traffic-5c2g#conclusion" rel="noopener noreferrer nofollow" target="_blank"></a>Заключение<a aria-hidden="true" tabindex="-1" href="#заключение"><span class="icon icon-link"></span></a></h2>
<p>Дросселирование Microsoft Graph API - это функция, которая помогает поддерживать оптимальную производительность и надежность службы для всех приложений и пользователей. Следуя лучшим практикам и стратегиям, описанным в этой статье блога, вы сможете эффективно избежать или справиться с дросселированием и оптимизировать сетевой трафик с помощью Microsoft Graph API. Это улучшит функциональность вашего приложения и повысит удобство работы пользователей.</p>
<p>Если вы столкнулись с этими проблемами или хотите более подробно изучить их, я рекомендую вам ознакомиться с документацией по этой теме: <a href="https://learn.microsoft.com/en-us/training/modules/optimize-network-traffic/" rel="noopener noreferrer nofollow" target="_blank">https://learn.microsoft.com/en-us/training/modules/optimize-network-traffic/</a></p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Как избежать торможения Microsoft Graph API и оптимизировать сетевой трафик&#38;url=https://igorlov.ru/blog/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk&#38;title=Как избежать торможения Microsoft Graph API и оптимизировать сетевой трафик&#38;summary=За последние несколько месяцев я получил множество запросов от клиентов о том, как избежать дросселирования Microsoft Graph API и вообще как оптимизировать сет&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/kak-yzbezhat-tormozhenyia-microsoft-graph-api-y-optymyzyrovat-setevoi-trafyk&#38;media=&#38;description=За последние несколько месяцев я получил множество запросов от клиентов о том, как избежать дросселирования Microsoft Graph API и вообще как оптимизировать сет" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/kak-yntehryrovat-google-maps-v-prylozhenye-vue-3" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> Как интегрировать Google Maps в приложение Vue 3 </a> <a href="/blog/kak-zaschytyt-marshrut-v-next-js-13-zaschyta-na-storone-klyenta-na-storone-servera-y-na-osnove-middleware" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> Как защитить маршруты в Next.js 13 - защита на стороне клиента, на стороне сервера и на основе Middleware </a> </nav>  </div> </article> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.svLg6TOn.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> <astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.BwogX8bT.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  </div> <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ИГ ФCВР</a>  <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>