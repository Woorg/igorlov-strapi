<!DOCTYPE html><html lang="ru"> <head><title>Создание Приложения React Native Для Переключения Тем -...
</title><link rel="canonical" href="https://igorlov.ru/blog/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem"><meta name="description" content="Почти каждый веб-сайт и мобильное приложение теперь включают темный режим или альтернативную цветовую схему по умолчанию. Цветовые схемы предоставляют...
"><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.9.1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_regular_.CyGIBtQS.css">
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#0d52a1;color:rgba(13,82,161,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw)}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.container[data-astro-cid-vcbh62el]{padding:min(2rem,1.2125rem + 1.05vw)}.list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.link[data-astro-cid-vcbh62el]{font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;padding:.125rem .75rem;font-size:min(1.5rem,1.1625rem + .45vw);line-height:var(--tw-lh)}
</style>
<link rel="stylesheet" href="/_astro/_single_.C0aKA9dM.css">
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#27292d;border-color:rgba(39,41,45,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.comments[data-v-f9c4118f]{margin:auto;margin-top:1.25rem;width:100%;--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.comments:where([class=dark][data-v-f9c4118f],[class=dark] *[data-v-f9c4118f]){--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.giscus-frame[data-v-f9c4118f]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-f9c4118f],[class=dark] *[data-v-f9c4118f]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
</style><script type="module" src="/_astro/hoisted.CUFolni_.js"></script><style>[data-astro-transition-scope="astro-r75ddqls-1"] { view-transition-name: blog-image-sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-16 font-inter text-blue fluid:text-lg lg:pt-24 dark:bg-black dark:text-white"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-medium lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-blue dark:text-white" aria-label="logo" data-astro-cid-ijoll5s5> <svg width="1.44em" height="1em" viewBox="0 0 5660 3931" class="icon" data-astro-cid-ijoll5s5 data-icon="logo-one">  <symbol id="ai:local:logo-one"><g fill="currentColor"><path d="M1198.57 596.749c0 329.575-267.171 596.751-596.747 596.751-329.575 0-596.749-267.176-596.749-596.751S272.248 0 601.823 0c329.576 0 596.747 267.174 596.747 596.749Z"/><circle cx="3035.75" cy="617.751" r="596.749" transform="rotate(-90 3035.75 617.751)"/><path d="M3035.75 2736.81c329.57 0 596.75 267.18 596.75 596.75 0 329.58-267.18 596.75-596.75 596.75-329.58 0-596.75-267.17-596.75-596.75 0-329.57 267.17-596.75 596.75-596.75Z"/><circle cx="596.749" cy="1964.8" r="596.749"/><path d="M1193.5 3332.87c0 329.57-267.176 596.75-596.751 596.75S0 3662.44 0 3332.87c0-329.58 267.174-596.75 596.749-596.75 329.575 0 596.751 267.17 596.751 596.75Z"/><circle cx="5062.46" cy="617.751" r="596.749" transform="rotate(-90 5062.46 617.751)"/><circle cx="5062.46" cy="3333.56" r="596.749" transform="rotate(-90 5062.46 3333.56)"/></g></symbol><use xlink:href="#ai:local:logo-one"></use>  </svg>  </a> <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> Меню</button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> Закрыть</button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты </a> </li> </ul> </nav> </div>   <!-- <ThemeToggle client:only /> --> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <div class="container" data-astro-cid-vcbh62el> <ol class="list" role="list" data-astro-cid-vcbh62el> <li class="item" role="listitem" data-astro-cid-vcbh62el> <a class="link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="item" role="listitem" data-astro-cid-vcbh62el> <a class="link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </div> </nav>  <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <div class="container" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/как-закодить" class="categories__link" data-astro-cid-axzg2cw6> Как закодить  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Создание приложения React Native для переключения тем </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/react-native" data-astro-cid-axzg2cw6> React Native </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 27 окт., 2023 by Igor Gorlov </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div> <article data-astro-cid-axzg2cw6> <figure class="article__image" data-astro-cid-axzg2cw6> <picture data-astro-cid-axzg2cw6> <source srcset="/_astro/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem-Oct-27-2023.C7qPKy8Y_9eH3H.avif" type="image/avif"><source srcset="/_astro/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem-Oct-27-2023.C7qPKy8Y_Z1eugJI.webp" type="image/webp"> <img src="/_astro/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem-Oct-27-2023.C7qPKy8Y_1Eamec.png" alt="Создание приложения React Native для переключения тем" class="aspect-video h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-r75ddqls-1" width="1120" height="580" decoding="async"> </picture> </figure> </article> <div class="article__content prose prose-zinc max-w-full break-words text-blue dark:prose-invert prose-headings:text-blue prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <div id="adfox_17062261612859555"></div> <script>(function(){const blockId = "adfox_17062261612859555";

	window.yaContextCb = window.yaContextCb || [];
	window.yaContextCb.push(() => {
		Ya.adfoxCode.createAdaptive(
			{
				ownerId: 1493338,
				containerId: blockId,
				params: {
					p1: 'dawgg',
					p2: 'p',
				},
			},
			['desktop', 'tablet', 'phone'],
			{
				tabletWidth: 830,
				phoneWidth: 480,
				isAutoReloads: true,
			},
		);
	});
})();</script> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Создание приложения React Native для переключения тем&url=https://igorlov.ru/blog/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&url=https://igorlov.ru/blog/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem&title=Создание приложения React Native для переключения тем&summary=Почти каждый веб-сайт и мобильное приложение теперь включают темный режим или альтернативную цветовую схему по умолчанию. Цветовые схемы предоставляют...
&source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem&media=&description=Почти каждый веб-сайт и мобильное приложение теперь включают темный режим или альтернативную цветовую схему по умолчанию. Цветовые схемы предоставляют...
" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <details open  class="toc border border-blue text-blue fluid:p-8 cursor-pointer rounded-[50px]"><summary class="toc__title text-xl font-medium">Содержание</summary><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#настройка-проекта-с-использованием-expo">Настройка проекта с использованием expo</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#понимание-hook-usecolorscheme">Понимание Hook useColorScheme</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#оформление-текста-в-соответствии-с-цветовой-схемой">Оформление текста в соответствии с цветовой схемой</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#переключение-между-светлой-и-темной-темами-динамически">Переключение между светлой и темной темами динамически</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#создание-нашего-context-для-управления-темой">Создание нашего context для управления темой</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#извлечение-и-переключение-темы-с-использованием-компонента-button">Извлечение и переключение темы с использованием компонента button</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#автоматическое-адаптирование-темы-приложения-к-настройкам-системы">Автоматическое адаптирование темы приложения к настройкам системы</a></li><li class="toc-item toc-item-h2"><a class="text-blue text-blue-h2" href="#заключение">Заключение</a></li></ol></details open ><p>Почти каждый веб-сайт и мобильное приложение теперь включают темный режим или альтернативную цветовую схему по умолчанию. Цветовые схемы предоставляют пользователям возможность выбирать дизайн приложения по своему усмотрению. Когда такая опция недоступна, это может разочаровать пользователей.</p>
<p>Цветовые схемы также помогают нам, разработчикам, проектировать для предпочтений каждого пользователя, то есть разрабатывать для пользователей, предпочитающих светлый или темный режим.</p>
<p>В этой статье мы не будем углубляться в дизайн и выбор цветов. Вместо этого мы сосредоточимся только на том, как реализовать переключатель тем в приложении React Native. Это означает переключение между светлым, темным и системным режимами, то есть цветовой схемой мобильного устройства.</p>
<p>Таким образом, наш акцент будет скорее на фрагментах кода и объяснениях вместе с их результатами. Мы рассмотрим:</p>
<p>Вы можете ознакомиться с полным кодом нашего демонстрационного приложения на GitLab.</p>
<h2 id="настройка-проекта-с-использованием-expo">Настройка проекта с использованием expo<a aria-hidden="true" tabindex="-1" href="#настройка-проекта-с-использованием-expo"><span class="icon icon-link"></span></a></h2>
<p>Если вы предпочитаете разрабатывать приложения React Native с использованием Expo и собираетесь следовать этому учебнику с такой настройкой, вам придется внести небольшие изменения в ваш файл app.json.</p>
<p>В вашем файле app.json добавьте следующие строки;</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="json"><code><span class="line"><span style="color:#A6ACCD">{</span></span>
<span class="line"><span style="color:#A6ACCD">	"</span><span style="color:#E4F0FB">expo</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">: {</span></span>
<span class="line"><span style="color:#A6ACCD">		"</span><span style="color:#ADD7FF">userInterfaceStyle</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">: </span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">automatic</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">		"</span><span style="color:#ADD7FF">ios</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">: {</span></span>
<span class="line"><span style="color:#A6ACCD">			"</span><span style="color:#91B4D5">userInterfaceStyle</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">: </span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">automatic</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#A6ACCD">		},</span></span>
<span class="line"><span style="color:#A6ACCD">		"</span><span style="color:#ADD7FF">android</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">: {</span></span>
<span class="line"><span style="color:#A6ACCD">			"</span><span style="color:#91B4D5">userInterfaceStyle</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">: </span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">automatic</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#A6ACCD">		}</span></span>
<span class="line"><span style="color:#A6ACCD">	}</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>По умолчанию установлен стиль <code>light</code>, поэтому наша цветовая схема всегда будет возвращать тему <code>light</code>. Вы можете изменить это на <code>automatic</code>, как показано выше, чтобы адаптироваться как к темной, так и к светлой теме. Это позволяет нам динамически получать цветовую схему нашего устройства.</p>
<h2 id="понимание-hook-usecolorscheme">Понимание Hook useColorScheme<a aria-hidden="true" tabindex="-1" href="#понимание-hook-usecolorscheme"><span class="icon icon-link"></span></a></h2>
<p>Прежде чем мы начнем создавать наш переключатель тем, важно ознакомиться с Hook, с которым мы часто будем сталкиваться и использовать при реализации: <code>useColorScheme</code>.</p>
<p><code>useColorScheme</code> - это Hook React Native, который позволяет нам подписываться на обновления различных цветовых схем. По сути, он предоставляет доступ к цветовой схеме устройства, которая может быть светлой или темной. Он возвращает значение, которое показывает текущую цветовую схему, предпочитаемую пользователем.</p>
<p>Рассмотрим следующий код:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">/* App.js */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> Text</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> StyleSheet</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> useColorScheme</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> View</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react-native</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> App</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> colorScheme</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useColorScheme</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">View</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">container}></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">Text</span><span style="color:#E4F0FB">>Current Color Scheme: {colorScheme}&#x3C;/</span><span style="color:#5DE4C7">Text</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">View</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> styles</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> StyleSheet</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">	container</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">		flex</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 1</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		alignItems</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">center</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		justifyContent</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">center</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">	},</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">App</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Вывод будет отображать текущую цветовую схему. Например, в моем выводе показана темная цветовая схема, потому что это моя предпочтительная системная тема:</p>
<!-- wp:image {"align":"center","id":176007} -->
<figure class="wp-block-image aligncenter"><img src="http://blog.logrocket.com/wp-content/uploads/2023/08/img1-Current-system-theme-output-dark-mode.jpeg?is-pending-load=1" alt="Экран мобильного устройства с темным режимом и белым текстом, описывающим текущую системную тему как темный режим" class="wp-image-176007"></figure>
<!-- /wp:image -->
<p>Если ваше устройство находится в светлом режиме, то в вашем выводе будет показана светлая цветовая схема.</p>
<h2 id="оформление-текста-в-соответствии-с-цветовой-схемой">Оформление текста в соответствии с цветовой схемой<a aria-hidden="true" tabindex="-1" href="#оформление-текста-в-соответствии-с-цветовой-схемой"><span class="icon icon-link"></span></a></h2>
<p>С помощью значения, возвращаемого <code>useColorScheme</code>, мы можем проектировать при выборе пользователя темного или светлого режима. Давайте рассмотрим следующий фрагмент кода:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">/* App.js */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> Text</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> StyleSheet</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> useColorScheme</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> View</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react-native</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> App</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> colorScheme</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useColorScheme</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">View</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">container}></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">Text</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">				style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">{</span></span>
<span class="line"><span style="color:#ADD7FF">					color</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> colorScheme</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">light</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">#000</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">#fff</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">				}</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">			></span></span>
<span class="line"><span style="color:#E4F0FB">				Current Color Scheme: {colorScheme}</span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;/</span><span style="color:#5DE4C7">Text</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">View</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> styles</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> StyleSheet</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">	container</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">		flex</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 1</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		alignItems</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">center</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		justifyContent</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">center</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">	},</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">App</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>В приведенном выше коде мы оформляем наш текст в соответствии с цветовой схемой. Когда пользователи выбирают темный режим, мы оформляем текст белым цветом, чтобы он был виден в темном режиме. Напротив, мы оформляем текст черным цветом, когда пользователи находятся в светлом режиме.</p>
<p>Мы также можем использовать объект <code>Color</code>, предоставляемый <code>react-native/Libraries/NewAppScreen</code>, чтобы оформить наш текст. <code>NewAppScreen</code> - это компонент по умолчанию, который предоставляет нам React Native в качестве отправной точки для создания наших экранов. Он функционирует как шаблон и может использоваться, как показано ниже:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">/* App.js */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> Text</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> StyleSheet</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> useColorScheme</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> View</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react-native</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> Colors</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react-native/Libraries/NewAppScreen</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> App</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> colorScheme</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useColorScheme</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> color</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> colorScheme</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">light</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#E4F0FB"> Colors</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">darker</span><span style="color:#91B4D5"> :</span><span style="color:#E4F0FB"> Colors</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">lighter</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">View</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">container}></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">Text</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> color</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> color</span><span style="color:#A6ACCD"> }</span><span style="color:#E4F0FB">}>Current Color Scheme: {colorScheme}&#x3C;/</span><span style="color:#5DE4C7">Text</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">View</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> styles</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> StyleSheet</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">	container</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">		flex</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 1</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		alignItems</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">center</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">		justifyContent</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">center</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">	},</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">App</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>В приведенном выше коде мы импортировали модуль <code>NewAppScreen</code>. Используя объект <code>Color</code>, который имеет набор предопределенных значений или <code>Colors</code>, мы назначаем цвет текста <code>lighter</code>, когда пользователь находится в темном режиме, и цвет <code>darker</code>, когда пользователь выбирает светлый режим:</p>
<!-- wp:image {"align":"center","id":176007} -->
<figure class="wp-block-image aligncenter"><img src="http://blog.logrocket.com/wp-content/uploads/2023/08/img1-Current-system-theme-output-dark-mode.jpeg?is-pending-load=1" alt="Экран мобильного устройства с темным режимом и белым текстом, описывающим текущую системную тему как темный режим" class="wp-image-176007"></figure>
<!-- /wp:image -->
<p>Если мы изменим тему устройства на светлый режим, наш вывод будет выглядеть следующим образом:</p>
<figure class="wp-block-image aligncenter"><img src="http://blog.logrocket.com/wp-content/uploads/2023/08/img2-Color-scheme-switched-light.jpeg?is-pending-load=1" alt="Экран мобильного устройства с светлым режимом и черным текстом, описывающим текущую системную тему как светлый режим" class="wp-image-176008"></figure>
<h2 id="переключение-между-светлой-и-темной-темами-динамически">Переключение между светлой и темной темами динамически<a aria-hidden="true" tabindex="-1" href="#переключение-между-светлой-и-темной-темами-динамически"><span class="icon icon-link"></span></a></h2>
<p>До сих пор мы изучили, как проверить текущий режим или цветовую схему нашего устройства. Мы также кратко рассмотрели, как использовать возвращаемое значение Hook <code>useColorScheme</code> для стилизации нашего приложения соответственно.</p>
<p>В этом разделе мы рассмотрим, как динамически переключаться между темами и как сохранять текущее состояние нашей темы.</p>
<p>Сначала давайте установим пакет <code>async-storage</code>. Этот пакет позволяет нам сохранять JSON-строки в локальном хранилище устройства. Он работает аналогично локальному хранилищу, сеансовому хранилищу и куки в Интернете:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#91B4D5">/*</span><span style="color:#ADD7FF"> npm</span><span style="color:#ADD7FF;font-style:italic"> *</span><span style="color:#ADD7FF">/</span></span>
<span class="line"><span style="color:#91B4D5">npm</span><span style="color:#ADD7FF"> install</span><span style="color:#ADD7FF"> @react-native-async-storage/async-storage</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">/*</span><span style="color:#ADD7FF"> yarn</span><span style="color:#ADD7FF;font-style:italic"> *</span><span style="color:#ADD7FF">/</span></span>
<span class="line"><span style="color:#91B4D5">yarn</span><span style="color:#ADD7FF"> add</span><span style="color:#ADD7FF"> @react-native-async-storage/async-storage</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">/*</span><span style="color:#ADD7FF"> expo</span><span style="color:#ADD7FF;font-style:italic"> *</span><span style="color:#ADD7FF">/</span></span>
<span class="line"><span style="color:#91B4D5">npx</span><span style="color:#ADD7FF"> expo</span><span style="color:#ADD7FF"> install</span><span style="color:#ADD7FF"> @react-native-async-storage/async-storage</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<p>В файле <code>App.js</code> скопируйте и вставьте следующий код:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">/* App.js */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">Home</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">./src/Home</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> ThemeProvider</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">./context/ThemeContext</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> App</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">ThemeProvider</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">Home</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">ThemeProvider</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">App</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>В приведенном выше коде мы импортировали два компонента - <code>ThemeContext</code> и <code>Home</code>. Наш компонент <code>ThemeContext</code> будет содержать контекст нашей темы и текущее состояние, а <code>Home</code> будет нашей домашней страницей.</p>
<p>Мы оборачиваем страницу <code>Home</code> в <code>ThemeContext</code>, потому что мы хотим, чтобы темы были доступны для остальной части приложения.</p>
<h2 id="создание-нашего-context-для-управления-темой">Создание нашего context для управления темой<a aria-hidden="true" tabindex="-1" href="#создание-нашего-context-для-управления-темой"><span class="icon icon-link"></span></a></h2>
<p>Затем создайте папку с именем <code>context</code>. Внутри этой папки создайте файл с именем <code>ThemeContext.js</code> с следующим кодом:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">/* context/ThemeContext.js */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD">,</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> createContext</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> useEffect</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">AsyncStorage</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@react-native-async-storage/async-storage</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> ThemeContext</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> createContext</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> const</span><span style="color:#ADD7FF"> ThemeProvider</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> ({ </span><span style="color:#E4F0FB">children</span><span style="color:#A6ACCD"> }) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">theme</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setTheme</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">light</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">	useEffect</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">		// Load saved theme from storage</span></span>
<span class="line"><span style="color:#91B4D5">		const</span><span style="color:#ADD7FF"> getTheme</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7"> async</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#D0679D">			try</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">				const</span><span style="color:#E4F0FB"> savedTheme</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FB"> AsyncStorage</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">getItem</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">theme</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">				if (</span><span style="color:#E4F0FB">savedTheme</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FBD0">					setTheme</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">savedTheme</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">				}</span></span>
<span class="line"><span style="color:#A6ACCD">			} </span><span style="color:#D0679D">catch</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FB">				console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Error loading theme:</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">			}</span></span>
<span class="line"><span style="color:#A6ACCD">		};</span></span>
<span class="line"><span style="color:#E4F0FBD0">		getTheme</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#A6ACCD">	}, []);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> toggleTheme</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">newTheme</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setTheme</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">newTheme</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">		AsyncStorage</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">setItem</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">theme</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">newTheme</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#E4F0FB"> &#x3C;</span><span style="color:#5DE4C7">ThemeContext.Provider</span><span style="color:#91B4D5;font-style:italic"> value</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">{</span><span style="color:#E4F0FB"> theme</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> toggleTheme</span><span style="color:#A6ACCD"> }</span><span style="color:#E4F0FB">}>{children}&#x3C;/</span><span style="color:#5DE4C7">ThemeContext.Provider</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">ThemeContext</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Мы управляем нашим состоянием и сохраняем текущее значение состояния в файле <code>ThemeContext.js</code> с использованием <code>async-storage</code>. Поскольку строки, переданные в локальное хранилище, остаются неизменными, пока не будут изменены или удалены, мы всегда можем извлечь последнее сохраненное значение и установить его как текущее состояние темы, как показано в приведенном выше коде.</p>
<p>Наконец, мы передаем наше состояние темы и функцию <code>toggleTheme</code> в <code>ThemeContext.Provider</code>. Это делает его доступным для остальной части приложения, так что мы можем вызывать функцию <code>toggleTheme</code> для выполнения наших переключений.</p>
<h2 id="извлечение-и-переключение-темы-с-использованием-компонента-button">Извлечение и переключение темы с использованием компонента button<a aria-hidden="true" tabindex="-1" href="#извлечение-и-переключение-темы-с-использованием-компонента-button"><span class="icon icon-link"></span></a></h2>
<p>Далее давайте создадим файл <code>Home.js</code> и скопируем в него следующий код:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">/* Home */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD">,</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> useContext</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> View</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> Text</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> StyleSheet</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> TouchableOpacity</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react-native</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">ThemeContext</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">../context/ThemeContext</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> Home</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> { </span><span style="color:#E4F0FB">theme</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">toggleTheme</span><span style="color:#A6ACCD"> } </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useContext</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">ThemeContext</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> handleToggleTheme</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">		const</span><span style="color:#E4F0FB"> newTheme</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> theme</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">light</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">dark</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">light</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#E4F0FBD0">		toggleTheme</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">newTheme</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> styles</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> StyleSheet</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">		container</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">			flex</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 1</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">			alignItems</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">center</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">			justifyContent</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">center</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">			backgroundColor</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> theme</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">dark</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">black</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">white</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">		},</span></span>
<span class="line"><span style="color:#ADD7FF">		text</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">			color</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> theme</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">dark</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">white</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">black</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">		},</span></span>
<span class="line"><span style="color:#ADD7FF">		button</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">			color</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> theme</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">dark</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">black</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">white</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">		},</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;</span><span style="color:#5DE4C7">View</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">container}></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">Text</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">text}>Home page&#x3C;/</span><span style="color:#5DE4C7">Text</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">TouchableOpacity</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">				onPress</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{handleToggleTheme}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">				style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">{</span></span>
<span class="line"><span style="color:#ADD7FF">					marginTop</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 10</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">					paddingVertical</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 5</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">					paddingHorizontal</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 10</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">					backgroundColor</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> theme</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">dark</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">#fff</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">#000</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">				}</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">			></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">Text</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">button}>Switch to {theme </span><span style="color:#91B4D5">===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">light</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Dark</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Light</span><span style="color:#A6ACCD">'</span><span style="color:#E4F0FB">} Theme&#x3C;/</span><span style="color:#5DE4C7">Text</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;/</span><span style="color:#5DE4C7">TouchableOpacity</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/</span><span style="color:#5DE4C7">View</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">Home</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>В коде выше мы извлекаем значение <code>theme</code> и функцию <code>toggleTheme</code>, которые мы передали в наше API контекста. Используя возвращенное значение, мы можем стилизовать наши дизайны страниц в зависимости от значения <code>theme</code>. Мы также передаем нашу функцию <code>toggleTheme</code> в компонент <code>button</code>.</p>
<p>Вывод будет выглядеть следующим образом:</p>
<!-- wp:image {"align":"center","id":176009} -->
<figure class="wp-block-image aligncenter"><img src="http://blog.logrocket.com/wp-content/uploads/2023/08/img3-Пользователь-переключает-кнопку-светлой-и-темной-тем.gif?is-pending-load=1" alt="Экран мобильного устройства, отображающий темный режим с белым текстом на главной странице над кнопкой для переключения на светлую тему. Пользователь показан переключающим кнопку, затем отображается светлый режим с черным текстом на главной странице над кнопкой для переключения на темную тему" class="wp-image-176009"></figure>
<!-- /wp:image -->
<h2 id="автоматическое-адаптирование-темы-приложения-к-настройкам-системы">Автоматическое адаптирование темы приложения к настройкам системы<a aria-hidden="true" tabindex="-1" href="#автоматическое-адаптирование-темы-приложения-к-настройкам-системы"><span class="icon icon-link"></span></a></h2>
<p>Мы увидели, как переключаться между темами, в частности, между светлой и темной темами. Последний шаг - обнаружить цветовую схему системы и точно переключить тему приложения соответственно.</p>
<p>Это означает, что если ваше мобильное устройство находится в светлом режиме, тема приложения также будет в светлом режиме. Затем, если вы переключите свою систему или мобильное устройство в темный режим, приложение автоматически адаптирует свое состояние темы к темной теме. Мы также обсудим сохранение состояния.</p>
<p>Для этого мы модифицируем код, который у нас уже есть выше. В файле <code>ThemeContext.js</code> скопируйте и вставьте следующий код:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">/* ThemeContext */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD">,</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> createContext</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> useEffect</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useColorScheme</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react-native</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">AsyncStorage</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@react-native-async-storage/async-storage</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> ThemeContext</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> createContext</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> const</span><span style="color:#ADD7FF"> ThemeProvider</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> ({ </span><span style="color:#E4F0FB">children</span><span style="color:#A6ACCD"> }) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> colorScheme</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useColorScheme</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">theme</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setTheme</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">colorScheme</span><span style="color:#91B4D5"> ||</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">light</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">	useEffect</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">		// Load saved theme from storage</span></span>
<span class="line"><span style="color:#91B4D5">		const</span><span style="color:#ADD7FF"> getTheme</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7"> async</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#D0679D">			try</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">				const</span><span style="color:#E4F0FB"> savedTheme</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FB"> AsyncStorage</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">getItem</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">theme</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">				if (</span><span style="color:#E4F0FB">savedTheme</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FBD0">					setTheme</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">savedTheme</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">				}</span></span>
<span class="line"><span style="color:#A6ACCD">			} </span><span style="color:#D0679D">catch</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FB">				console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Error loading theme:</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">			}</span></span>
<span class="line"><span style="color:#A6ACCD">		};</span></span>
<span class="line"><span style="color:#E4F0FBD0">		getTheme</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#A6ACCD">	}, []);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">	useEffect</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">		// set theme to system selected theme</span></span>
<span class="line"><span style="color:#A6ACCD">		if (</span><span style="color:#E4F0FB">colorScheme</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FBD0">			setTheme</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">colorScheme</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">		}</span></span>
<span class="line"><span style="color:#A6ACCD">	}, [</span><span style="color:#E4F0FB">colorScheme</span><span style="color:#A6ACCD">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> toggleTheme</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">newTheme</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setTheme</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">newTheme</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">		// Save selected theme to storage</span></span>
<span class="line"><span style="color:#E4F0FB">		AsyncStorage</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">setItem</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">theme</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">newTheme</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#E4F0FB"> &#x3C;</span><span style="color:#5DE4C7">ThemeContext.Provider</span><span style="color:#91B4D5;font-style:italic"> value</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">{</span><span style="color:#E4F0FB"> theme</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> toggleTheme</span><span style="color:#A6ACCD"> }</span><span style="color:#E4F0FB">}>{children}&#x3C;/</span><span style="color:#5DE4C7">ThemeContext.Provider</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">ThemeContext</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>В приведенном выше коде, когда мы выбираем тему, мы также сохраняем ее в нашем локальном хранилище. Это означает, что при загрузке нашего приложения мы можем проверить, существует ли уже тема в нашем локальном хранилище. Если существует, то устанавливаем эту тему в качестве предпочтительной. В противном случае мы не устанавливаем никакой темы.</p>
<p>В итоге приложение для переключения темы в React Native будет выглядеть следующим образом:</p>
<!-- wp:image {"align":"center","id":176010} -->
<figure class="wp-block-image aligncenter"><img src="http://blog.logrocket.com/wp-content/uploads/2023/08/img4-User-toggling-device-system-theme-show-app-theme-changes-automatically-match.gif?is-pending-load=1" alt="Пользователь показан, как переключает тему системы устройства в настройках между светлым и темным режимами и как тема приложения автоматически меняется, чтобы соответствовать" class="wp-image-176010"></figure>
<!-- /wp:image -->
<p>В некоторых сценариях мы можем захотеть предоставить пользователям несколько вариантов тем, таких как:</p>
<ul>
<li>Темная тема</li>
<li>Светлая тема</li>
<li>Системная тема</li>
</ul>
<p>Например, некоторые пользователи могут использовать светлую тему для своих мобильных устройств, но им может быть удобнее их приложение использовать с темной темой. В этом случае мы не хотим использовать светлую тему системы для приложения. Вместо этого мы хотим указать темную тему.</p>
<p>Для этого скопируйте следующий код в ваш файл <code>ThemeContext.js</code>:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">/* ThemeContext.js */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">  ...</span><span style="color:#A6ACCD">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">  const</span><span style="color:#ADD7FF"> toggleTheme</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">newTheme</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">    setTheme</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">newTheme</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">    AsyncStorage</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">setItem</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">theme</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">newTheme</span><span style="color:#A6ACCD">); </span><span style="color:#767C9DB0;font-style:italic">// Save selected theme to storage</span></span>
<span class="line"><span style="color:#A6ACCD">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">  const</span><span style="color:#ADD7FF"> useSystemTheme</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">    setTheme</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">colorScheme</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">    AsyncStorage</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">setItem</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">theme</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">colorScheme</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">  return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">    &#x3C;</span><span style="color:#5DE4C7">ThemeContext.Provider</span><span style="color:#91B4D5;font-style:italic"> value</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">{</span><span style="color:#E4F0FB"> theme</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> toggleTheme</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> useSystemTheme</span><span style="color:#A6ACCD"> }</span><span style="color:#E4F0FB">}></span></span>
<span class="line"><span style="color:#E4F0FB">      {children}</span></span>
<span class="line"><span style="color:#E4F0FB">    &#x3C;/</span><span style="color:#5DE4C7">ThemeContext.Provider</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">  );</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">ThemeContext</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Первая функция позволяет нам переключаться между темными и светлыми темами, как мы видели в других примерах. Вторая функция позволяет нам использовать системную или тему по умолчанию устройства — мы устанавливаем нашу тему такой, какой она есть на устройстве в данный момент.</p>
<p>Затем в вашем файле <code>Home.js</code> мы создадим три кнопки для выбора каждой темы. Вот код:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">/*Home.js*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">...</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">imports</span><span style="color:#91B4D5">...</span><span style="color:#A6ACCD">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> Home</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">  const</span><span style="color:#E4F0FB"> systemTheme</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useColorScheme</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#91B4D5">  const</span><span style="color:#A6ACCD"> { </span><span style="color:#E4F0FB">theme</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">toggleTheme</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">useSystemTheme</span><span style="color:#A6ACCD"> } </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useContext</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">ThemeContext</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> styles</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> StyleSheet</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#91B4D5">  ......</span></span>
<span class="line"><span style="color:#A6ACCD">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">  return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">    &#x3C;</span><span style="color:#5DE4C7">View</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">container}></span></span>
<span class="line"><span style="color:#E4F0FB">      &#x3C;</span><span style="color:#5DE4C7">Text</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">text}>Current Theme: {theme}&#x3C;/</span><span style="color:#5DE4C7">Text</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">      &#x3C;</span><span style="color:#5DE4C7">Text</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">text}>System Theme: {systemTheme}&#x3C;/</span><span style="color:#5DE4C7">Text</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">      &#x3C;</span><span style="color:#5DE4C7">TouchableOpacity</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">        onPress</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">()</span><span style="color:#91B4D5"> =></span><span style="color:#E4F0FBD0"> toggleTheme</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">light</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">)</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">        style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">{</span></span>
<span class="line"><span style="color:#ADD7FF">          marginTop</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 10</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">          paddingVertical</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 5</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">          paddingHorizontal</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 10</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">          backgroundColor</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> theme</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">dark</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">#fff</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">#000</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">        }</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">      ></span></span>
<span class="line"><span style="color:#E4F0FB">        &#x3C;</span><span style="color:#5DE4C7">Text</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">button}>Light Theme&#x3C;/</span><span style="color:#5DE4C7">Text</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">      &#x3C;/</span><span style="color:#5DE4C7">TouchableOpacity</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">      &#x3C;</span><span style="color:#5DE4C7">TouchableOpacity</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">        onPress</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">()</span><span style="color:#91B4D5"> =></span><span style="color:#E4F0FBD0"> toggleTheme</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">dark</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">)</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">        style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">{</span></span>
<span class="line"><span style="color:#ADD7FF">          marginTop</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 20</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">          paddingVertical</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 5</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">          paddingHorizontal</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 10</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">          backgroundColor</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> theme</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">dark</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">#fff</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">#000</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">        }</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">      ></span></span>
<span class="line"><span style="color:#E4F0FB">        &#x3C;</span><span style="color:#5DE4C7">Text</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">button}>Dark Theme&#x3C;/</span><span style="color:#5DE4C7">Text</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">      &#x3C;/</span><span style="color:#5DE4C7">TouchableOpacity</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">      &#x3C;</span><span style="color:#5DE4C7">TouchableOpacity</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">        onPress</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">()</span><span style="color:#91B4D5"> =></span><span style="color:#E4F0FBD0"> useSystemTheme</span><span style="color:#A6ACCD">()</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">        style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">{</span></span>
<span class="line"><span style="color:#ADD7FF">          marginTop</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 20</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">          paddingVertical</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 5</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">          paddingHorizontal</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 10</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">          backgroundColor</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> theme</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">dark</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">#fff</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">#000</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">        }</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">      ></span></span>
<span class="line"><span style="color:#E4F0FB">        &#x3C;</span><span style="color:#5DE4C7">Text</span><span style="color:#91B4D5;font-style:italic"> style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{styles</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">button}>System Theme&#x3C;/</span><span style="color:#5DE4C7">Text</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">      &#x3C;/</span><span style="color:#5DE4C7">TouchableOpacity</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">    &#x3C;/</span><span style="color:#5DE4C7">View</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">  );</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FB">Home</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>С этими тремя кнопками мы можем выбирать любую тему. Код выше также позволяет нам видеть текущую тему нашего приложения — другими словами, тему, которую мы выбрали в данный момент — а также тему системы, которая может отличаться от текущей темы.</p>
<p>С этим мы можем либо выбрать использовать тему системы автоматически, либо выбрать другую тему для нашего приложения:</p>
<!-- wp:image {"align":"center","id":176011} -->
<figure class="wp-block-image aligncenter"><img src="http://blog.logrocket.com/wp-content/uploads/2023/08/img5-Three-buttons-light-dark-system-theme-output-displaying-current-theme-system-theme-persist-close-app.gif?is-pending-load=1" alt="Экран мобильного приложения, на котором отображается текст, описывающий тему приложения и тему системы выше трех стопок кнопок для переключения между светлой темой, темной темой и совпадающей с темой системы. Показано, как пользователь выходит из приложения, чтобы показать, что выбранное состояние сохраняется после закрытия приложения" class="wp-image-176011"></figure>
<!-- /wp:image -->
<p>Как видите, наша выбранная тема будет сохраняться даже после закрытия и повторного открытия приложения.</p>
<h2 id="заключение">Заключение<a aria-hidden="true" tabindex="-1" href="#заключение"><span class="icon icon-link"></span></a></h2>
<p>В этой статье мы увидели, как реализовать функцию переключения, сохранить состояние каждого выбора и переключиться между темами на основе выбора пользователя по системе.</p>
<p>Переключение между темами — это обычная функция в разработке приложений сегодня. Предоставление пользователям выбора их предпочтительной темы и сохранение ее даже после закрытия приложения улучшает пользовательский опыт и делает ваше приложение более привлекательным.</p>
<p>Полный <a href="https://gitlab.com/Vic-Orlands/react-native-theme-changer" rel="noopener noreferrer nofollow" target="_blank">код проекта доступен на GitLab</a>. Если у вас остались вопросы, не стесняйтесь задавать их ниже. В противном случае, до следующей статьи, пока!</p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Создание приложения React Native для переключения тем&url=https://igorlov.ru/blog/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&url=https://igorlov.ru/blog/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem&title=Создание приложения React Native для переключения тем&summary=Почти каждый веб-сайт и мобильное приложение теперь включают темный режим или альтернативную цветовую схему по умолчанию. Цветовые схемы предоставляют...
&source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/sozdanie-prilozheniya-react-native-dlya-pereklyucheniya-tem&media=&description=Почти каждый веб-сайт и мобильное приложение теперь включают темный режим или альтернативную цветовую схему по умолчанию. Цветовые схемы предоставляют...
" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/php-vyrazhenie-sootvetstviya-match-switch" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> PHP Выражение соответствия - Match vs Switch </a> <a href="/blog/luchshie-instrumenty-ci-cd-dlya-react-native" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> Лучшие инструменты CI/CD для React Native </a> </nav>  </div> </div> </article> <div class="container" data-astro-cid-axzg2cw6> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.D-6fTqBY.js" component-export="default" renderer-url="/_astro/client.Bd2Qst3j.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> </div> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.ChJFdf82.js" component-export="default" renderer-url="/_astro/client.44T8euMP.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-medium lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-blue dark:text-white" aria-label="logo" data-astro-cid-ijoll5s5> <svg width="1.44em" height="1em" viewBox="0 0 5660 3931" class="icon" data-astro-cid-ijoll5s5 data-icon="logo-one">  <use xlink:href="#ai:local:logo-one"></use>  </svg>  </a> <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>