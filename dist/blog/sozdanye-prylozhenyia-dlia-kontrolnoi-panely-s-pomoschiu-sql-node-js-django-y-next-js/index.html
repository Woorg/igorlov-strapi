<!DOCTYPE html><html lang="ru"> <head><title>Создание приложения для контрольной панели с помощью SQL, Node.js, Django и Next.js | Игорь Горлов - Фронтeндер</title><link rel="canonical" href="https://igorlov.ru/blog/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js"><meta name="description" content="Сегодня мы получим краткое представление о том, что такое работа над проектами в качестве разработчика в составе команды внутри компании. Мы будем создавать пр"><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.5.1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ViewTransitions.astro_astro_type_script_index_0_lang.DqfSmqP7.js"></script><link rel="stylesheet" href="/_astro/_regular_.Dd2YhbvP.css" />
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw);padding-left:min(2rem,1.2125rem + 1.05vw);padding-right:min(2rem,1.2125rem + 1.05vw);padding-top:1rem;padding-bottom:1rem}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.breadcrumbs__link[data-astro-cid-vcbh62el]{border-radius:9999px;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover{--tw-bg-opacity: 1;background-color:#fce4e1;background-color:rgba(252,228,225,var(--tw-bg-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]{padding:.125rem .75rem}.breadcrumbs__link[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#6a6a6a;background-color:rgba(106,106,106,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#8a8a93;background-color:rgba(138,138,147,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}
</style>
<link rel="stylesheet" href="/_astro/_single_.CyWP_2Jq.css" />
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#020202;border-color:rgba(2,2,2,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.comments[data-v-533071ec]{margin:auto;margin-top:1.25rem;max-width:42rem;--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.comments:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame[data-v-533071ec]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
.theme-toggle[data-v-8d8d9c54]{width:1.25rem;height:1.25rem}
</style><script type="module" src="/_astro/page.CFW0rSNk.js"></script><style>[data-astro-transition-scope="astro-vgmtzcrq-1"] { view-transition-name: blog-image-sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-14 font-inter text-white fluid:text-lg dark:bg-black"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ФCВР</a>  <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> </button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> </button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/projects" class="nav__link" data-astro-cid-7wkmezxd> Работы. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты. </a> </li> </ul> </nav> </div>  <script type="module">document.addEventListener("astro:page-load",()=>{const t=document.querySelector(".nav__open"),n=document.querySelector(".nav__close"),e=document.querySelector(".nav__container"),o=document.querySelectorAll(".nav__item");t?.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")}),n?.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")}),o.forEach(a=>{window.matchMedia("( max-width: 1024px)").matches&&a.addEventListener("click",()=>{e?.classList.toggle("nav__container--open"),e?.classList.toggle("fade-in-bottom")})})});</script> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="IJ3dh" component-url="/_astro/ThemeToggle.kpN4JrWQ.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-rq644orq&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;ThemeToggle&quot;,&quot;value&quot;:true}"></astro-island> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <div class="blocks__container container"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <ol class="breadcrumbs__list" role="list" data-astro-cid-vcbh62el> <li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </nav>  </div> <div class="blocks__container container"> <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/учебник" class="categories__link" data-astro-cid-axzg2cw6> Учебник  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Создание приложения для контрольной панели с помощью SQL, Node.js, Django и Next.js </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/django" data-astro-cid-axzg2cw6> Django </a> </li><li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/python" data-astro-cid-axzg2cw6> Python </a> </li><li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/nextjs" data-astro-cid-axzg2cw6> Next.js </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 09 фев., 2024 by Игорь Горлов </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div>  <figure class="article__image" data-astro-cid-axzg2cw6> <picture> <source srcset="/_astro/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js-Feb-09-2024.RNfKnzY1_Z2jLVf9.avif" type="image/avif"><source srcset="/_astro/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js-Feb-09-2024.RNfKnzY1_ZvRAAH.webp" type="image/webp"> <img src="/_astro/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js-Feb-09-2024.RNfKnzY1_Z2ukKNF.png" alt="Создание приложения для контрольной панели с помощью SQL, Node.js, Django и Next.js" class="aspect-auto h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-vgmtzcrq-1" width="1200" height="500" decoding="async"> </picture> </figure>  <div class="article__content prose prose-zinc max-w-full dark:prose-invert prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:-mx-12 prose-figure:w-screen prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <div id="adfox_17062261612859555"></div> <script>(function(){const blockId = "adfox_17062261612859555";

	window.yaContextCb = window.yaContextCb || [];
	window.yaContextCb.push(() => {
		Ya.adfoxCode.createAdaptive(
			{
				ownerId: 1493338,
				containerId: blockId,
				params: {
					p1: 'dawgg',
					p2: 'p',
				},
			},
			['desktop', 'tablet', 'phone'],
			{
				tabletWidth: 830,
				phoneWidth: 480,
				isAutoReloads: true,
			},
		);
	});
})();</script> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Создание приложения для контрольной панели с помощью SQL, Node.js, Django и Next.js&#38;url=https://igorlov.ru/blog/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js&#38;title=Создание приложения для контрольной панели с помощью SQL, Node.js, Django и Next.js&#38;summary=Сегодня мы получим краткое представление о том, что такое работа над проектами в качестве разработчика в составе команды внутри компании. Мы будем создавать пр&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js&#38;media=&#38;description=Сегодня мы получим краткое представление о том, что такое работа над проектами в качестве разработчика в составе команды внутри компании. Мы будем создавать пр" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <details class="toc px-5 border border-gray-light lg:px-10 py-2 cursor-pointer"><summary class="title">Оглавление</summary><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#рабочий-процесс-проекта-jira">Рабочий процесс проекта Jira</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#рабочий-процесс-разработчика">Рабочий процесс разработчика</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#prerequisites">Prerequisites</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#создание-бэкенда">Создание бэкенда</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#настройка-базы-данных-sql">Настройка базы данных SQL</a><ol class="toc-level toc-level-3"><li class="toc-item toc-item-h4"><a class="toc-link toc-link-h4" href="#настройка-баз-данных-postgresql-и-mysql">Настройка баз данных PostgreSQL и MySQL</a><ol class="toc-level toc-level-4"><li class="toc-item toc-item-h5"><a class="toc-link toc-link-h5" href="#настройка-таблиц-postgresql">Настройка таблиц PostgreSQL</a><ol class="toc-level toc-level-5"><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#настройка-таблиц-mysql">Настройка таблиц MySQL</a></li></ol></li><li class="toc-item toc-item-h5"><a class="toc-link toc-link-h5" href="#настройка-базы-данных-sqlite">Настройка базы данных SQLite</a></li><li class="toc-item toc-item-h5"><a class="toc-link toc-link-h5" href="#создание-sql-запросов-для-наших-sql-баз-данных">Создание SQL-запросов для наших SQL-баз данных</a><ol class="toc-level toc-level-5"><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#create">CREATE</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#read">READ</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#update">UPDATE</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#выполнение-inner-join">Выполнение INNER JOIN</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#delete">DELETE</a></li></ol></li></ol></li><li class="toc-item toc-item-h4"><a class="toc-link toc-link-h4" href="#постройте-бэкенд-api-с-полным-crud">Постройте бэкенд API с полным CRUD</a><ol class="toc-level toc-level-4"><li class="toc-item toc-item-h5"><a class="toc-link toc-link-h5" href="#настройка-проекта-бэкенда-nodejs">Настройка проекта бэкенда Node.js</a><ol class="toc-level toc-level-5"><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#подключение-к-базам-данных-sql-с-помощью-prisma">Подключение к базам данных SQL с помощью Prisma</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#настройка-postgresql">Настройка PostgreSQL</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#настройка-mysql">Настройка MySQL</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#настройка-sqlite">Настройка SQLite</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#создание-схемы-базы-данных">Создание схемы базы данных</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#создание-express-сервера-с-конечными-точками-crud">Создание Express-сервера с конечными точками CRUD</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#post-конечная-точка-данных">POST-конечная точка данных</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#get-все-данные-конечной-точки">GET все данные конечной точки</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#get-по-id-данных-конечной-точки">GET по ID данных конечной точки</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#put-конечная-точка-данных">PUT конечная точка данных</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#удаление-конечной-точки-данных">Удаление конечной точки данных</a></li></ol></li><li class="toc-item toc-item-h5"><a class="toc-link toc-link-h5" href="#настройка-проекта-бэкенда-django">Настройка проекта бэкенда Django</a><ol class="toc-level toc-level-5"><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#подключение-к-базам-данных-sql-с-помощью-django">Подключение к базам данных SQL с помощью Django</a></li></ol></li></ol></li></ol></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#postgresql-databases-pip3-install-psycopg2-psycopg2-binary--mysql-databases-pip3-install-mysqlclient">PostgreSQL Databases pip3 install psycopg2 psycopg2-binary ## MySQL Databases pip3 install mysqlclient`.</a><ol class="toc-level toc-level-3"><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#postgresql">PostgreSQL</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#mysql">MySQL</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#sqlite">SQLite</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#выполняем-миграцию-на-python-и-создаем-суперпользователя-для-нашей-базы-данных">Выполняем миграцию на Python и создаем суперпользователя для нашей базы данных</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#создание-сервера-django-с-конечными-точками-crud">Создание сервера Django с конечными точками CRUD</a></li></ol></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#создание-фронтенда">Создание фронтенда</a><ol class="toc-level toc-level-3"><li class="toc-item toc-item-h4"><a class="toc-link toc-link-h4" href="#создание-react-проекта-с-использованием-nextjs">Создание React-проекта с использованием Next.js</a><ol class="toc-level toc-level-4"><li class="toc-item toc-item-h5"><a class="toc-link toc-link-h5" href="#сборка-компонентов">Сборка компонентов</a></li><li class="toc-item toc-item-h5"><a class="toc-link toc-link-h5" href="#настройка-наших-тестовых-файлов">Настройка наших тестовых файлов</a></li><li class="toc-item toc-item-h5"><a class="toc-link toc-link-h5" href="#создание-наших-пользовательских-крючков">Создание наших пользовательских крючков</a><ol class="toc-level toc-level-5"><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#get-запросы">GET-запросы</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#post-запросы">POST-запросы</a></li><li class="toc-item toc-item-h6"><a class="toc-link toc-link-h6" href="#update-requests">UPDATE Requests</a></li></ol></li></ol></li><li class="toc-item toc-item-h4"><a class="toc-link toc-link-h4" href="#заключение">Заключение</a></li></ol></li></ol></li></ol></details><p>Сегодня мы получим краткое представление о том, что такое работа над проектами в качестве разработчика в составе команды внутри компании. Мы будем создавать приложение для дашборда, которое имеет два бэкенда. Один будет создан с помощью Node.js, а другой - с помощью Django. Фронтенд будет создан с помощью Next.js и Tailwind. Дашборд используется для добавления аниме в базу данных. Вы можете выполнять полные CRUD-действия, фильтровать по году выпуска, а данные будут отображаться в виде графика.</p>
<figure class="igorlov-figure"><img  src="/_astro/dashboard-app_vjvhv8.Dn-nLMMN_IJk6g.webp" alt="dashboard-app_vjvhv8.gif" width="800" height="418" loading="lazy" decoding="async"><figcaption>dashboard-app_vjvhv8.gif</figcaption></figure>
<p>Этот проект будет разделен на 3 части:</p>
<ol>
<li>Рабочий процесс проекта Jira</li>
<li>Создание бэкенда</li>
<li>Создание фронтенда</li>
</ol>
<p>Вы можете найти полную кодовую базу на GitHub здесь <a href="https://github.com/andrewbaisden/anime-dashboard-app" rel="noopener noreferrer nofollow" target="_blank">Anime Dashboard App</a>.</p>
<p>Покончив со вступлением, перейдем к рабочему процессу проекта Jira.</p>
<h2 id="рабочий-процесс-проекта-jira"><a href="#jira-project-workflow"></a>Рабочий процесс проекта Jira<a aria-hidden="true" tabindex="-1" href="#рабочий-процесс-проекта-jira"><span class="icon icon-link"></span></a></h2>
<p>Владелец продукта и команда разработчиков часто получают помощь от Скрам-мастера при создании проекта. Этот этап может быть разным для каждой компании, и это лишь один из примеров того, как это может быть сделано.</p>
<ol>
<li>Создание проекта в Jira</li>
<li>Создайте эпики, истории, ошибки и задачи в разделе бэклога, а затем решите, какие из них добавить в следующий спринт.</li>
<li>Используйте confluence для документации и управления проектом</li>
<li>Начните спринт</li>
</ol>
<p>У разработчика может быть установлено несколько инструментов, в том числе:</p>
<ul>
<li>репозиторий GitHub для проекта</li>
<li>Slack или альтернатива</li>
<li>Jira или альтернативный вариант</li>
<li>IDE или редактор кода и среда разработки, настроенная для работы</li>
<li>Инструмент тестирования API для бэкенда (Postman, Insomnia, REST Client, Swagger и т.д…)</li>
</ul>
<p>Теперь давайте посмотрим на пример того, как может выглядеть рабочий процесс разработчика в проекте в следующем разделе.</p>
<h2 id="рабочий-процесс-разработчика"><a href="#developer-workflow"></a>Рабочий процесс разработчика<a aria-hidden="true" tabindex="-1" href="#рабочий-процесс-разработчика"><span class="icon icon-link"></span></a></h2>
<p>Этот пример может относиться к любому разработчику, работающему в команде. Им потребуется:</p>
<ol>
<li>Взять тикет Jira из текущего спринта или бэклога, затем назначить его себе и работать над ним, изменив его статус с to do на in progress</li>
<li>Создать новую ветку разработки для тикета с названием, соответствующим тикету, чтобы его можно было легко найти, например feature-123, bug-123, task-123 и т. д..</li>
<li>Работайте над историей и, когда закончите, внесите изменения в репозиторий, чтобы они прошли через рабочий процесс CI/CD, создав запрос на внесение изменений (PR) и изменив статус на ”на рассмотрении”.</li>
<li>Добавьте PR в историю Jira в виде веб-ссылки или аналогичного документа.</li>
<li>Поделитесь историей, над которой вы работали, в командном чате, например в Slack, с соответствующим сообщением, чтобы другой разработчик мог ознакомиться с вашими изменениями.</li>
</ol>
<p>Например, “PR для <a href="https://project/browse/feature-123" rel="noopener noreferrer nofollow" target="_blank">https://project/browse/feature-123</a> готов к просмотру”.</p>
<p>Другой разработчик проверит PR, одобрит его и объединит, если все тесты пройдут и не будет ошибок.</p>
<p>Теперь повторите процесс, вернувшись к шагу 1 и взяв другой тикет для работы.</p>
<p>После этого краткого объяснения давайте перейдем к необходимым условиям для этого проекта.</p>
<h2 id="prerequisites"><a href="#prerequisites"></a>Prerequisites<a aria-hidden="true" tabindex="-1" href="#prerequisites"><span class="icon icon-link"></span></a></h2>
<ul>
<li>Установлен PostgreSQL</li>
<li>Установлен MySQL</li>
<li>Установлен SQLite</li>
<li>Установлена система управления базами данных (Azure Data Studio или альтернатива)</li>
<li>Установлены Node и npm</li>
<li>Установлен Python с <a href="https://pypi.org/project/virtualenv/" rel="noopener noreferrer nofollow" target="_blank">virtualenv</a> или альтернативный вариант</li>
</ul>
<p>Теперь, когда все необходимые условия выполнены, давайте начнем!</p>
<h2 id="создание-бэкенда"><a href="#building-the-backend"></a>Создание бэкенда<a aria-hidden="true" tabindex="-1" href="#создание-бэкенда"><span class="icon icon-link"></span></a></h2>
<p>Предположим, что разработчик бэкенда получил тикет из Jira на настройку архитектуры бэкенда. Первым этапом будет настройка баз данных SQL.</p>
<h3 id="настройка-базы-данных-sql"><a href="#setup-a-sql-database"></a>Настройка базы данных SQL<a aria-hidden="true" tabindex="-1" href="#настройка-базы-данных-sql"><span class="icon icon-link"></span></a></h3>
<p>Нашему приложению понадобится только одна база данных, однако я включил шаги по созданию базы данных для PostgreSQL, MySQL и SQLite, так что вы можете использовать любую из них по своему усмотрению.</p>
<h4 id="настройка-баз-данных-postgresql-и-mysql"><a href="#postgresql-and-mysql-database-setup"></a>Настройка баз данных PostgreSQL и MySQL<a aria-hidden="true" tabindex="-1" href="#настройка-баз-данных-postgresql-и-mysql"><span class="icon icon-link"></span></a></h4>
<p>Подключитесь к базам данных PostgreSQL и MySQL с помощью Azure Data Studio или выбранного вами инструмента управления базами данных. Вот как выглядит моя настройка в Azure Data Studio, если вы используете Visual Studio Code, вы легко привыкнете к дизайну, потому что они оба сделаны Microsoft.</p>
<figure class="igorlov-figure"><img  src="/_astro/azure-data-studio_xjjmzb.Bl550FPo_2heARJ.webp" alt="azure-data-studio_xjjmzb.jpg" width="800" height="458" loading="lazy" decoding="async"><figcaption>azure-data-studio_xjjmzb.jpg</figcaption></figure>
<p>Вот так можно создать базу данных с помощью Azure Data Studio. Пожалуйста, убедитесь, что вы изменили базу данных с Postgres или MySQL после выполнения SQL-запроса ниже. Мы хотим создать наши таблицы в базе данных манги, а не по умолчанию.</p>
<p>Теперь создайте базу данных SQL, выполнив приведенный ниже запрос в выбранном вами приложении для работы с базами данных:</p>
<p><code>CREATE DATABASE manga;</code>.</p>
<figure class="igorlov-figure"><img  src="/_astro/dashboard-app_h4492b.D6OQh1bV_ZHxMQn.webp" alt="dashboard-app_h4492b.jpg" width="800" height="235" loading="lazy" decoding="async"><figcaption>dashboard-app_h4492b.jpg</figcaption></figure>
<p>Затем выберите базу данных, которую вы только что создали, и создайте таблицу с первичным ключом. SQL для первичных ключей различается для PostgreSQL и MySQL, однако SQL для всех остальных свойств остается одинаковым.</p>
<p>Эти SQL-запросы, по сути, создают две таблицы под названием <code>anime</code> и <code>anime_details</code> в нашей базе данных манги. Столбцы и типы данных не требуют пояснений, как вы можете видеть ниже. В обеих таблицах есть столбец <code>anime_id</code>, который мы будем использовать позже для объединения обеих таблиц с помощью предложения SQL join.</p>
<p>Скопируйте, вставьте и запустите SQL-запросы в соответствующие базы данных:</p>
<h5 id="настройка-таблиц-postgresql"><a href="#postgresql-table-setup"></a>Настройка таблиц PostgreSQL<a aria-hidden="true" tabindex="-1" href="#настройка-таблиц-postgresql"><span class="icon icon-link"></span></a></h5>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">CREATE</span><span style="color:#5DE4C7"> TABLE</span><span style="color:#ADD7FF"> anime</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#A6ACCD">    id </span><span style="color:#91B4D5">SERIAL</span><span style="color:#5DE4C7"> PRIMARY KEY</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_id </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_name </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">100</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_release </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">CREATE</span><span style="color:#5DE4C7"> TABLE</span><span style="color:#ADD7FF"> anime_details</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#A6ACCD">    id </span><span style="color:#91B4D5">SERIAL</span><span style="color:#5DE4C7"> PRIMARY KEY</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_id </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_genre </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">50</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_rating </span><span style="color:#91B4D5">INT</span></span>
<span class="line"><span style="color:#A6ACCD">);</span></span>
<span class="line"></span></code></pre>
<h6 id="настройка-таблиц-mysql"><a href="#mysql-table-setup"></a>Настройка таблиц MySQL<a aria-hidden="true" tabindex="-1" href="#настройка-таблиц-mysql"><span class="icon icon-link"></span></a></h6>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">CREATE</span><span style="color:#5DE4C7"> TABLE</span><span style="color:#ADD7FF"> anime</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#A6ACCD">    id </span><span style="color:#91B4D5">INT</span><span style="color:#A6ACCD"> AUTO_INCREMENT </span><span style="color:#5DE4C7">PRIMARY KEY</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_id </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_name </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">100</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_release </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">CREATE</span><span style="color:#5DE4C7"> TABLE</span><span style="color:#ADD7FF"> anime_details</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#A6ACCD">    id </span><span style="color:#91B4D5">INT</span><span style="color:#A6ACCD"> AUTO_INCREMENT </span><span style="color:#5DE4C7">PRIMARY KEY</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_id </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_genre </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">50</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_rating </span><span style="color:#91B4D5">INT</span></span>
<span class="line"><span style="color:#A6ACCD">);</span></span>
<span class="line"></span></code></pre>
<p>В следующем разделе мы повторим тот же процесс, но на этот раз для базы данных SQLite. Прежде чем мы начнем, создайте на вашем компьютере папку для проекта приборной панели под названием <strong>anime-dashboard-app</strong>.</p>
<h5 id="настройка-базы-данных-sqlite"><a href="#sqlite-database-setup"></a>Настройка базы данных SQLite<a aria-hidden="true" tabindex="-1" href="#настройка-базы-данных-sqlite"><span class="icon icon-link"></span></a></h5>
<p>Azure Data Studio в настоящее время не поддерживает базы данных SQLite. Поэтому вы можете либо использовать командную строку для управления базой данных, либо найти приложение с графическим интерфейсом, которое поддерживает SQLite. Вот как выглядит база данных SQLite при использовании командной строки:</p>
<figure class="igorlov-figure"><img  src="/_astro/sqllite-database_kpfzzl.DPWMOhN__eTO0P.webp" alt="sqllite-database_kpfzzl.jpg" width="800" height="422" loading="lazy" decoding="async"><figcaption>sqllite-database_kpfzzl.jpg</figcaption></figure>
<p>С помощью приложения терминала войдите в папку <strong>anime-dashboard-app</strong>, а затем с помощью командной строки создайте базу данных SQLite, используя приведенный ниже код:</p>
<p>“sqlite3 manga.db`.</p>
<p>Теперь нам нужно создать несколько таблиц для нашей базы данных SQLite. Они будут такими же, как и те, которые мы создали для баз данных PostgreSQL и MySQL, однако SQL-запросы будут другими. Скопируйте и вставьте этот код в терминал, чтобы запустить запрос:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">CREATE</span><span style="color:#5DE4C7"> TABLE</span><span style="color:#ADD7FF"> anime</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#A6ACCD">    id </span><span style="color:#91B4D5">INTEGER</span><span style="color:#5DE4C7"> PRIMARY KEY</span><span style="color:#A6ACCD"> AUTOINCREMENT,</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_id </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_name </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">100</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_release </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">CREATE</span><span style="color:#5DE4C7"> TABLE</span><span style="color:#ADD7FF"> anime_details</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#A6ACCD">    id </span><span style="color:#91B4D5">INTEGER</span><span style="color:#5DE4C7"> PRIMARY KEY</span><span style="color:#A6ACCD"> AUTOINCREMENT,</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_id </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_genre </span><span style="color:#91B4D5">VARCHAR</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">50</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_rating </span><span style="color:#91B4D5">INT</span></span>
<span class="line"><span style="color:#A6ACCD">);</span></span>
<span class="line"></span></code></pre>
<p>После того как мы создали базу данных и таблицы, следующим этапом будет добавление данных в базу, что мы и сделаем в следующем разделе.</p>
<h5 id="создание-sql-запросов-для-наших-sql-баз-данных"><a href="#creating-sql-statements-for-our-sql-databases"></a>Создание SQL-запросов для наших SQL-баз данных<a aria-hidden="true" tabindex="-1" href="#создание-sql-запросов-для-наших-sql-баз-данных"><span class="icon icon-link"></span></a></h5>
<p>Настало время создать SQL-запросы, которые мы будем использовать для обеспечения полной функциональности CRUD (Create, Read, Update, Delete) в наших базах данных. Эти SQL-запросы будут работать со всеми нашими SQL-базами данных.</p>
<p>Начнем с SQL-запроса для создания данных.</p>
<h6 id="create"><a href="#create"></a>CREATE<a aria-hidden="true" tabindex="-1" href="#create"><span class="icon icon-link"></span></a></h6>
<p>Приведенный ниже SQL-запрос вставляет данные в обе таблицы. Все, что вам нужно сделать, это запустить запрос в базах данных, которые мы создали, как и раньше:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">INSERT INTO</span><span style="color:#A6ACCD"> anime (anime_id, anime_name, anime_release)</span></span>
<span class="line"><span style="color:#5DE4C7">VALUES</span><span style="color:#A6ACCD"> (</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">1234567890</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Naruto</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">1999</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">       (</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">0987654321</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Bleach</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">2004</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">INSERT INTO</span><span style="color:#A6ACCD"> anime_details (anime_id, anime_genre, anime_rating)</span></span>
<span class="line"><span style="color:#5DE4C7">VALUES</span><span style="color:#A6ACCD"> (</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">1234567890</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Action</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">       (</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">0987654321</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Action</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span></code></pre>
<p>Теперь, когда у нас есть данные в наших базах данных, давайте проверим, можем ли мы получить к ним доступ с помощью следующих запросов оператора чтения.</p>
<h6 id="read"><a href="#read"></a>READ<a aria-hidden="true" tabindex="-1" href="#read"><span class="icon icon-link"></span></a></h6>
<p>Если вы выполните эти SQL-запросы в наших базах данных, вы должны увидеть данные, которые мы добавили в таблицы:</p>
<p><code>SELECT * FROM anime;</code>.</p>
<p><code>SELECT * FROM anime_details;</code></p>
<p>А вот как мы будем считывать данные, используя условие типа ID:</p>
<p><code>SELECT * FROM anime WHERE id = '1';</code>.</p>
<p><code>SELECT * FROM anime_details WHERE id = '1';</code></p>
<p>С помощью приведенного ниже кода мы можем выполнить внутреннее соединение и объединить обе таблицы по ключу anime_id. Этот SQL-запрос выбирает уникальные ключи для таблицы, чтобы не было дублирования:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">SELECT</span></span>
<span class="line"><span style="color:#A6ACCD">    anime.anime_id,</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_name,</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_genre,</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_release,</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_rating</span></span>
<span class="line"><span style="color:#5DE4C7">FROM</span></span>
<span class="line"><span style="color:#A6ACCD">    anime</span></span>
<span class="line"><span style="color:#5DE4C7">INNER JOIN</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_details</span></span>
<span class="line"><span style="color:#5DE4C7">ON</span></span>
<span class="line"><span style="color:#A6ACCD">    anime.anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> anime_details.anime_id;</span></span>
<span class="line"></span></code></pre>
<p>Если бы мы хотели получить все, включая дубликаты, мы могли бы использовать подстановочный знак:</p>
<p><code>SELECT * FROM anime INNER JOIN anime_details ON anime.anime_id = anime_details.anime_id;</code>.</p>
<p>Далее мы рассмотрим наши обновленные SQL-запросы.</p>
<h6 id="update"><a href="#update"></a>UPDATE<a aria-hidden="true" tabindex="-1" href="#update"><span class="icon icon-link"></span></a></h6>
<p>Для обновления данных в таблицах мы можем использовать эти SQL-запросы в нашей базе данных:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">UPDATE</span><span style="color:#A6ACCD"> anime</span></span>
<span class="line"><span style="color:#5DE4C7">   SET</span><span style="color:#A6ACCD"> anime_name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Dragonball Z</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">       anime_release </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">1989</span><span style="color:#A6ACCD">'</span></span>
<span class="line"><span style="color:#5DE4C7"> WHERE</span><span style="color:#A6ACCD"> anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">1234567890</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">UPDATE</span><span style="color:#A6ACCD"> anime_details</span></span>
<span class="line"><span style="color:#5DE4C7">   SET</span><span style="color:#A6ACCD"> anime_genre </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Adventure</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">       anime_rating </span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7"> 9</span></span>
<span class="line"><span style="color:#5DE4C7"> WHERE</span><span style="color:#A6ACCD"> anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">1234567890</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Теперь мы узнаем, как выполнять обновления с помощью внутренних объединений.</p>
<h6 id="выполнение-inner-join"><a href="#performing-an-inner-join"></a>Выполнение INNER JOIN<a aria-hidden="true" tabindex="-1" href="#выполнение-inner-join"><span class="icon icon-link"></span></a></h6>
<p>Внутренние соединения позволяют объединить две таблицы, ссылаясь на записи, которые имеют совпадающие значения в этих таблицах.</p>
<p>Вот как выполняется INNER JOIN в PostgreSQL:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">UPDATE</span><span style="color:#A6ACCD"> anime</span></span>
<span class="line"><span style="color:#5DE4C7">SET</span><span style="color:#A6ACCD"> anime_name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Attack on Titan</span><span style="color:#A6ACCD">'</span></span>
<span class="line"><span style="color:#5DE4C7">FROM</span><span style="color:#A6ACCD"> anime_details</span></span>
<span class="line"><span style="color:#5DE4C7">WHERE</span><span style="color:#A6ACCD"> anime.anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> anime_details.anime_id</span></span>
<span class="line"><span style="color:#5DE4C7">AND</span><span style="color:#A6ACCD"> anime.anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">0987654321</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">UPDATE</span><span style="color:#A6ACCD"> anime_details</span></span>
<span class="line"><span style="color:#5DE4C7">SET</span><span style="color:#A6ACCD"> anime_genre </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Fantasy</span><span style="color:#A6ACCD">'</span></span>
<span class="line"><span style="color:#5DE4C7">WHERE</span><span style="color:#A6ACCD"> anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">0987654321</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>А вот так мы бы сделалисделать INNER JOIN в MySQL:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">UPDATE</span><span style="color:#A6ACCD"> anime</span></span>
<span class="line"><span style="color:#5DE4C7">INNER JOIN</span><span style="color:#A6ACCD"> anime_details </span><span style="color:#5DE4C7">ON</span><span style="color:#A6ACCD"> anime.anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> anime_details.anime_id</span></span>
<span class="line"><span style="color:#5DE4C7">SET</span><span style="color:#A6ACCD"> anime.anime_name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Attack on Titan</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, anime_details.anime_genre </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Fantasy</span><span style="color:#A6ACCD">'</span></span>
<span class="line"><span style="color:#5DE4C7">WHERE</span><span style="color:#A6ACCD"> anime.anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">0987654321</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>SQLite не поддерживает использование INNER JOIN непосредственно в синтаксисе UPDATE, поэтому для достижения желаемого результата вместо этого используется подзапрос:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">UPDATE</span><span style="color:#A6ACCD"> anime</span></span>
<span class="line"><span style="color:#5DE4C7">   SET</span><span style="color:#A6ACCD"> anime_name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Attack on Titan</span><span style="color:#A6ACCD">'</span></span>
<span class="line"><span style="color:#5DE4C7"> WHERE</span><span style="color:#A6ACCD"> anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">0987654321</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">UPDATE</span><span style="color:#A6ACCD"> anime_details</span></span>
<span class="line"><span style="color:#5DE4C7">   SET</span><span style="color:#A6ACCD"> anime_genre </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Fantasy</span><span style="color:#A6ACCD">'</span></span>
<span class="line"><span style="color:#5DE4C7"> WHERE</span><span style="color:#A6ACCD"> anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">0987654321</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Наконец, давайте посмотрим, как можно удалять данные из наших баз данных.</p>
<h6 id="delete"><a href="#delete"></a>DELETE<a aria-hidden="true" tabindex="-1" href="#delete"><span class="icon icon-link"></span></a></h6>
<p>Для удаления данных из таблицы используйте такой SQL-запрос:</p>
<p><code>DELETE FROM anime WHERE anime_id = '1234567890';</code>.</p>
<p>Мы закончили с разделом базы данных, и теперь переходим к разделу, в котором мы будем создавать наш внутренний API.</p>
<h4 id="постройте-бэкенд-api-с-полным-crud"><a href="#build-a-backend-api-with-full-crud"></a>Постройте бэкенд API с полным CRUD<a aria-hidden="true" tabindex="-1" href="#постройте-бэкенд-api-с-полным-crud"><span class="icon icon-link"></span></a></h4>
<p>Этот раздел мы разделим на две части. Сначала мы создадим бэкенд для Node.js, а затем для Django.</p>
<h5 id="настройка-проекта-бэкенда-nodejs"><a href="#nodejs-backend-project-setup"></a>Настройка проекта бэкенда Node.js<a aria-hidden="true" tabindex="-1" href="#настройка-проекта-бэкенда-nodejs"><span class="icon icon-link"></span></a></h5>
<p>Для создания бэкенда и подключения его к нашим SQL-базам данных мы будем использовать Prisma для настройки <a href="https://www.prisma.io/docs/getting-started/setup-prisma/start-from-scratch/relational-databases-node-postgresql" rel="noopener noreferrer nofollow" target="_blank">реляционных баз данных</a>.</p>
<p>Вы все еще должны находиться в папке <strong>anime-dashboard-app</strong>, если это не так, убедитесь в этом, а затем настройте проект в Prisma с помощью этих команд:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">mkdir</span><span style="color:#ADD7FF"> manga-backend-express</span></span>
<span class="line"><span style="color:#91B4D5">cd</span><span style="color:#ADD7FF"> manga-backend-express</span></span>
<span class="line"><span style="color:#91B4D5">npm</span><span style="color:#ADD7FF"> init</span><span style="color:#ADD7FF"> -y</span></span>
<span class="line"><span style="color:#91B4D5">npm</span><span style="color:#ADD7FF"> i</span><span style="color:#ADD7FF"> express</span><span style="color:#ADD7FF"> nodemon</span><span style="color:#ADD7FF"> dotenv</span><span style="color:#ADD7FF"> cors</span><span style="color:#ADD7FF"> prisma</span></span>
<span class="line"></span></code></pre>
<p>Теперь запустите Prisma CLI с помощью этой команды:</p>
<p><code>npx prisma</code></p>
<p>А теперь давайте настроим наш проект Prisma с помощью этой команды:</p>
<p><code>npx prisma init</code>.</p>
<p>Теперь откройте проект в вашем редакторе кода, если вы используете VS Code и настроили его на открытие из терминала, вы можете использовать эту команду:</p>
<p><code>code .</code></p>
<p>Отлично, далее мы подключимся к нашей базе данных SQL с помощью Prisma.</p>
<h6 id="подключение-к-базам-данных-sql-с-помощью-prisma"><a href="#connecting-to-the-sql-databases-with-prisma"></a>Подключение к базам данных SQL с помощью Prisma<a aria-hidden="true" tabindex="-1" href="#подключение-к-базам-данных-sql-с-помощью-prisma"><span class="icon icon-link"></span></a></h6>
<p>Используйте следующие настройки для подключения к различным базам данных. Можно подключиться только к одной из этих баз данных, и если вы выполнили все шаги, то у вас должны быть настроены 3 базы данных с данными. Поэтому выберите одну из баз данных для подключения в приведенных ниже настройках:</p>
<h6 id="настройка-postgresql"><a href="#postgresql-setup"></a>Настройка PostgreSQL<a aria-hidden="true" tabindex="-1" href="#настройка-postgresql"><span class="icon icon-link"></span></a></h6>
<p>Файл находится по адресу <code>prisma/schema.prisma</code>.</p>
<p><code>datasource db { provider = "postgresql" url = env("DATABASE_URL") }</code>.</p>
<p>Файл <code>.env</code> должен находиться в корневой папке, и в нем будут храниться наши переменные окружения. Это строка соединения, которую мы будем использовать для подключения к базе данных. Вполне возможно, что ваша конфигурация может отличаться, поэтому найдите правильный путь:</p>
<p><code>DATABASE_URL="postgresql://postgres:@localhost:5432/manga?schema=public"</code>.</p>
<h6 id="настройка-mysql"><a href="#mysql-setup"></a>Настройка MySQL<a aria-hidden="true" tabindex="-1" href="#настройка-mysql"><span class="icon icon-link"></span></a></h6>
<p>Файл находится по адресу <code>prisma/schema.prisma</code>.</p>
<p><code>datasource db { provider = "mysql" url = env("DATABASE_URL") }</code>.</p>
<p>Файл <code>.env</code> должен находиться в корневой папке, и в нем будут храниться переменные окружения. Это строка соединения, которую мы будем использовать для подключения к базе данных. Вполне возможно, что ваша конфигурация может отличаться, поэтому найдите правильный путь:</p>
<p><code>DATABASE_URL="mysql://root:@localhost:3306/manga"</code>.</p>
<h6 id="настройка-sqlite"><a href="#sqlite-setup"></a>Настройка SQLite<a aria-hidden="true" tabindex="-1" href="#настройка-sqlite"><span class="icon icon-link"></span></a></h6>
<p>Файл находится по адресу <code>prisma/schema.prisma</code>.</p>
<p><code>datasource db { provider = "sqlite" url = env("DATABASE_URL") }</code>.</p>
<p>Файл <code>.env</code> должен находиться в корневой папке, и в нем будут храниться переменные окружения. Это строка соединения, которую мы будем использовать для подключения к базе данных. Вполне возможно, что ваша конфигурация может отличаться, поэтому найдите правильный путь:</p>
<p>Создайте папку внутри каталога <strong>manga-backend</strong> под названием <code>database</code>, а затем переместите созданную нами ранее базу данных SQLite под названием <code>manga.db</code> и поместите ее в папку <code>database</code>.</p>
<p><code>DATABASE_URL="file:../database/manga.db"</code>.</p>
<p>Мы делаем хорошие успехи, поэтому перейдем к следующему разделу, в котором мы создадим схему нашей базы данных.</p>
<h6 id="создание-схемы-базы-данных"><a href="#creating-the-database-schema"></a>Создание схемы базы данных<a aria-hidden="true" tabindex="-1" href="#создание-схемы-базы-данных"><span class="icon icon-link"></span></a></h6>
<p>Мы уже создали нашу базу данных, поэтому мы можем использовать приведенные ниже команды для автоматического создания наших моделей и схемы. Выполните эти команды внутри нашего проекта <strong>manga-backend</strong>, чтобы создать схему для нашей базы данных на основе таблиц, которые мы создали для наших баз данных.</p>
<p><code>npx prisma db pull</code></p>
<p><code>npx prisma generate</code></p>
<p>В качестве альтернативы мы можем использовать <a href="https://www.prisma.io/docs/getting-started/setup-prisma/start-from-scratch/relational-databases/using-prisma-migrate-node-postgresql" rel="noopener noreferrer nofollow" target="_blank">Prisma Migrate</a>, что означает, что нам придется создавать модели и схемы баз данных вручную.</p>
<h6 id="создание-express-сервера-с-конечными-точками-crud"><a href="#creating-the-express-server-with-crud-endpoints"></a>Создание Express-сервера с конечными точками CRUD<a aria-hidden="true" tabindex="-1" href="#создание-express-сервера-с-конечными-точками-crud"><span class="icon icon-link"></span></a></h6>
<p>Сначала обновите файл <code>.env</code>, добавив в него переменные порта и окружения разработки:</p>
<p><code>PORT="8000" ENVIRONMENT="development"</code>.</p>
<p>Теперь создайте файл <code>index.js</code> в корневой папке для <strong>manga-backend-express</strong> и добавьте в него следующий кодсоздадим наш Express-сервер, который подключается к нашей базе данных. Он содержит все наши конечные точки CRUD и даже одну для таблиц INNER JOIN, которая использует необработанные SQL-запросы:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> express</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> require</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">express</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#A6ACCD"> { </span><span style="color:#E4F0FB">PrismaClient</span><span style="color:#A6ACCD"> } </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> require</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">@prisma/client</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">require</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">dotenv</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">config</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> cors</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> require</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">cors</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> prisma</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7"> new</span><span style="color:#E4F0FBD0"> PrismaClient</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> app</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> express</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">app</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">use</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FBD0">cors</span><span style="color:#A6ACCD">());</span></span>
<span class="line"><span style="color:#E4F0FB">app</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">use</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">express</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">urlencoded</span><span style="color:#A6ACCD">({</span><span style="color:#ADD7FF"> extended</span><span style="color:#A6ACCD">:</span><span style="color:#D0679D"> false</span><span style="color:#A6ACCD"> }));</span></span>
<span class="line"><span style="color:#E4F0FB">app</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">use</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">express</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">json</span><span style="color:#A6ACCD">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// GET ALL</span></span>
<span class="line"><span style="color:#E4F0FB">app</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">get</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">/api/anime</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#5DE4C7">async</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">req</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">res</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> allAnime</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FB"> prisma</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">findMany</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#E4F0FB">	console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">allAnime</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">	res</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">json</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">allAnime</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// GET ONE</span></span>
<span class="line"><span style="color:#E4F0FB">app</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">get</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">/api/anime/:id</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#5DE4C7">async</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">req</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">res</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> { </span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD"> } </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB"> req</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">params</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> anime</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FB"> prisma</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">findUnique</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">		where</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> id</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FBD0"> Number</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD">)</span><span style="color:#A6ACCD"> },</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"><span style="color:#E4F0FB">	res</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">json</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">anime</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">	console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">anime</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// POST</span></span>
<span class="line"><span style="color:#E4F0FB">app</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">post</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">/api/anime</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#5DE4C7">async</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">req</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">res</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> { </span><span style="color:#E4F0FB">anime_id</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">anime_name</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">anime_release</span><span style="color:#A6ACCD"> } </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB"> req</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">body</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> result</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FB"> prisma</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">		data</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span><span style="color:#E4F0FB"> anime_id</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> anime_name</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> anime_release</span><span style="color:#A6ACCD"> },</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"><span style="color:#E4F0FB">	res</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">json</span><span style="color:#A6ACCD">({</span><span style="color:#ADD7FF"> msg</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">Anime added</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD"> });</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// UPDATE</span></span>
<span class="line"><span style="color:#E4F0FB">app</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">put</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">/api/anime/:id</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#5DE4C7">async</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">req</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">res</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> { </span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD"> } </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB"> req</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">params</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> { </span><span style="color:#E4F0FB">anime_id</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">anime_name</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">anime_release</span><span style="color:#A6ACCD"> } </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB"> req</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">body</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> post</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FB"> prisma</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">update</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">		where</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> id</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FBD0"> Number</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD">)</span><span style="color:#A6ACCD"> },</span></span>
<span class="line"><span style="color:#ADD7FF">		data</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span><span style="color:#E4F0FB"> anime_id</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> anime_name</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> anime_release</span><span style="color:#A6ACCD"> },</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"><span style="color:#E4F0FB">	res</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">json</span><span style="color:#A6ACCD">({</span><span style="color:#ADD7FF"> msg</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> `</span><span style="color:#5DE4C7">Anime </span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD">}</span><span style="color:#5DE4C7"> updated</span><span style="color:#A6ACCD">`</span><span style="color:#A6ACCD"> });</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// DELETE</span></span>
<span class="line"><span style="color:#E4F0FB">app</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">delete</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">/api/anime/:id</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#5DE4C7">async</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">req</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">res</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> { </span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD"> } </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB"> req</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">params</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> post</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FB"> prisma</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">delete</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#ADD7FF">		where</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> id</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FBD0"> Number</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD">)</span><span style="color:#A6ACCD"> },</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"><span style="color:#E4F0FB">	res</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">json</span><span style="color:#A6ACCD">({</span><span style="color:#ADD7FF"> msg</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> `</span><span style="color:#5DE4C7">Anime </span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD">}</span><span style="color:#5DE4C7"> deleted</span><span style="color:#A6ACCD">`</span><span style="color:#A6ACCD"> });</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// GET: Внутреннее соединение (с использованием синтаксиса необработанного SQL-запроса)</span></span>
<span class="line"><span style="color:#E4F0FB">app</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">get</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">/api/joinedtables</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#5DE4C7">async</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">req</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">res</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#E4F0FB"> users</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FB"> prisma</span><span style="color:#A6ACCD">.</span><span style="color:#ADD7FF">$queryRaw</span><span style="color:#A6ACCD">`</span></span>
<span class="line"><span style="color:#5DE4C7">    SELECT * FROM anime INNER JOIN anime_details ON anime.anime_id = anime_details.anime_id;</span></span>
<span class="line"><span style="color:#A6ACCD">  `</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#E4F0FB">	res</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">json</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">users</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">	console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">users</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> port</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> process</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">env</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">PORT</span><span style="color:#91B4D5"> ||</span><span style="color:#5DE4C7"> 8000</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">if (</span><span style="color:#E4F0FB">process</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">env</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">ENVIRONMENT</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">development</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FB">	app</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">listen</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">port</span><span style="color:#A6ACCD">, () </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">`</span><span style="color:#5DE4C7">Server running on port </span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">port</span><span style="color:#A6ACCD">}</span><span style="color:#5DE4C7">, http://localhost:</span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">port</span><span style="color:#A6ACCD">}`</span><span style="color:#A6ACCD">));</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Наконец, добавьте эти скрипты запуска в файл <code>package.json</code>, чтобы мы могли запустить наш сервер. У нас есть один, который использует node, и другой для нашего сервера разработки, который использует nodemon, чтобы наш сервер мог автоматически обновляться без необходимости останавливать и запускать сервер каждый раз, когда мы вносим изменения.</p>
<p><code>Скрипты</code>: { “start”: “node index.js”, “dev”: “nodemon index.js” },`.</p>
<p>Запустите бэкенд с помощью любой из этих команд и используйте инструмент тестирования API, например Postman, для проверки конечных точек:</p>
<p><code>npm run start npm run dev</code>.</p>
<p>Посмотрите на примеры ниже, чтобы увидеть данные и конечные точки.</p>
<h6 id="post-конечная-точка-данных"><a href="#post-data-endpoint"></a>POST-конечная точка данных<a aria-hidden="true" tabindex="-1" href="#post-конечная-точка-данных"><span class="icon icon-link"></span></a></h6>
<p>Конечная точка: <a href="http://localhost:8000/api/anime/" rel="noopener noreferrer nofollow" target="_blank">http://localhost:8000/api/anime/</a></p>
<figure class="igorlov-figure"><img  src="/_astro/dashboard-app-post_bi5i4d.DljAmFur_Z2nh8Oc.webp" alt="dashboard-app-post_bi5i4d.jpg" width="800" height="477" loading="lazy" decoding="async"><figcaption>dashboard-app-post_bi5i4d.jpg</figcaption></figure>
<h6 id="get-все-данные-конечной-точки"><a href="#get-all-data-endpoint"></a>GET все данные конечной точки<a aria-hidden="true" tabindex="-1" href="#get-все-данные-конечной-точки"><span class="icon icon-link"></span></a></h6>
<p>Конечная точка: <a href="http://localhost:8000/api/anime" rel="noopener noreferrer nofollow" target="_blank">http://localhost:8000/api/anime</a></p>
<figure class="igorlov-figure"><img  src="/_astro/dashboard-app-get-all_azckai.CV7Ad82q_1KPHCS.webp" alt="dashboard-app-get-all_azckai.jpg" width="800" height="477" loading="lazy" decoding="async"><figcaption>dashboard-app-get-all_azckai.jpg</figcaption></figure>
<h6 id="get-по-id-данных-конечной-точки"><a href="#get-by-id-data-endpoint"></a>GET по ID данных конечной точки<a aria-hidden="true" tabindex="-1" href="#get-по-id-данных-конечной-точки"><span class="icon icon-link"></span></a></h6>
<p>Конечная точка: <a href="http://localhost:8000/api/anime/1" rel="noopener noreferrer nofollow" target="_blank">http://localhost:8000/api/anime/1</a></p>
<figure class="igorlov-figure"><img  src="/_astro/dashboard-app-get-one_e4aabl.Crixj9bR_VSIIy.webp" alt="dashboard-app-get-one_e4aabl.jpg" width="800" height="479" loading="lazy" decoding="async"><figcaption>dashboard-app-get-one_e4aabl.jpg</figcaption></figure>
<h6 id="put-конечная-точка-данных"><a href="#put-data-endpoint"></a>PUT конечная точка данных<a aria-hidden="true" tabindex="-1" href="#put-конечная-точка-данных"><span class="icon icon-link"></span></a></h6>
<p>Конечная точка: <a href="http://localhost:8000/api/anime/1" rel="noopener noreferrer nofollow" target="_blank">http://localhost:8000/api/anime/1</a></p>
<figure class="igorlov-figure"><img  src="/_astro/dashboard-app-put_a36cto.BpHcqY-b_ZCQIml.webp" alt="dashboard-app-put_a36cto.jpg" width="800" height="477" loading="lazy" decoding="async"><figcaption>dashboard-app-put_a36cto.jpg</figcaption></figure>
<h6 id="удаление-конечной-точки-данных"><a href="#delete-data-endpoint"></a>Удаление конечной точки данных<a aria-hidden="true" tabindex="-1" href="#удаление-конечной-точки-данных"><span class="icon icon-link"></span></a></h6>
<p>Конечная точка: <a href="http://localhost:8000/api/anime/1" rel="noopener noreferrer nofollow" target="_blank">http://localhost:8000/api/anime/1</a></p>
<figure class="igorlov-figure"><img  src="/_astro/dashboard-app-put_a36cto.BpHcqY-b_ZCQIml.webp" alt="dashboard-app-put_a36cto.jpg" width="800" height="477" loading="lazy" decoding="async"><figcaption>dashboard-app-put_a36cto.jpg</figcaption></figure>
<p>Наш бэкенд Express должен быть подключен к одной из наших баз данных SQL. В следующем разделе мы создадим бэкенд для Django.</p>
<h5 id="настройка-проекта-бэкенда-django"><a href="#django-backend-project-setup"></a>Настройка проекта бэкенда Django<a aria-hidden="true" tabindex="-1" href="#настройка-проекта-бэкенда-django"><span class="icon icon-link"></span></a></h5>
<p>Прежде чем начать, мы должны остановить работу нашего Express-сервера, потому что оба сервера будут использовать порт 8000, а на этом порту может работать только один сервер, а не оба. Поэтому убедитесь, что вы находитесь в корневой папке <strong>anime-dashboard-app</strong>, а затем создайте виртуальную среду Python с помощью этих команд в терминале:</p>
<blockquote>
<p>Возможно, вам потребуется использовать другую команду Python для запуска этих предстоящих сценариев кода Python, все зависит от того, как настроена ваша среда разработки. Так что, возможно, вам придется использовать <code>python</code> или <code>python3</code> для запуска команд. То же самое относится и к использованию <code>pip</code> или <code>pip3</code> для установки пакетов.</p>
</blockquote>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">$</span><span style="color:#ADD7FF"> virtualenv</span><span style="color:#ADD7FF"> manga-backend-django</span></span>
<span class="line"><span style="color:#91B4D5">$</span><span style="color:#ADD7FF"> source</span><span style="color:#ADD7FF"> manga-backend-django/bin/activate</span></span>
<span class="line"><span style="color:#91B4D5">$</span><span style="color:#ADD7FF"> pip3</span><span style="color:#ADD7FF"> install</span><span style="color:#ADD7FF"> django</span></span>
<span class="line"><span style="color:#91B4D5">$</span><span style="color:#ADD7FF"> pip3</span><span style="color:#ADD7FF"> install</span><span style="color:#ADD7FF"> djangorestframework</span></span>
<span class="line"><span style="color:#91B4D5">$</span><span style="color:#ADD7FF"> pip</span><span style="color:#ADD7FF"> install</span><span style="color:#ADD7FF"> django-cors-headers</span></span>
<span class="line"></span></code></pre>
<p>С помощью этих команд мы создаем виртуальную среду Python и устанавливаем пакеты для Django и Django Rest Framework. Без виртуальной среды они были бы установлены глобально на наших компьютерах.</p>
<p>Выполните эту команду из корня папки <strong>anime-dashboard-app</strong>, чтобы активировать Pythв среде virtualenv:</p>
<p><code>source manga-backend-django/bin/activate</code></p>
<p>Когда вы захотите деактивировать окружение, вы можете использовать эту команду. Сейчас нам это не нужно.</p>
<p><code>deactivate</code></p>
<h6 id="подключение-к-базам-данных-sql-с-помощью-django"><a href="#connecting-to-the-sql-databases-with-django"></a>Подключение к базам данных SQL с помощью Django<a aria-hidden="true" tabindex="-1" href="#подключение-к-базам-данных-sql-с-помощью-django"><span class="icon icon-link"></span></a></h6>
<p>Подключение к различным базам данных требует от нас установки драйверов. Установите следующие драйверы для баз данных, к которым вы собираетесь подключиться. Нам нужно сделать это только для PostgreSQL и MySQL, потому что Django уже должен работать с базами данных SQLite.</p>
<h3 id="postgresql-databases-pip3-install-psycopg2-psycopg2-binary--mysql-databases-pip3-install-mysqlclient">PostgreSQL Databases pip3 install psycopg2 psycopg2-binary ## MySQL Databases pip3 install mysqlclient`.<a aria-hidden="true" tabindex="-1" href="#postgresql-databases-pip3-install-psycopg2-psycopg2-binary--mysql-databases-pip3-install-mysqlclient"><span class="icon icon-link"></span></a></h3>
<p>Теперь нам нужно создать приложение Django, поэтому выполните следующие команды в той же папке:</p>
<p><code>cd manga-backend-django django-admin startproject manga cd manga</code>.</p>
<p>Теперь откройте проект <strong>manga-backend-django</strong> в редакторе кода, если вы этого еще не сделали, потому что мы будем добавлять код в файлы нашей кодовой базы Django.</p>
<p>Далее нам нужно подключиться к нашей базе данных, поэтому используйте примеры подключения к базе данных, приведенные ниже, в качестве ссылки для каждой базы данных и настройте их для своей. Откройте файл <code>manga/manga/settings.py</code> в вашем проекте и найдите раздел databases. Объект подключения должен быть очень похож на тот, который мы использовали для нашего приложения Express с Prisma.</p>
<h6 id="postgresql"><a href="#postgresql"></a>PostgreSQL<a aria-hidden="true" tabindex="-1" href="#postgresql"><span class="icon icon-link"></span></a></h6>
<p><code>DATABASES = { 'default': { 'ENGINE': 'django.db.backends.postgresql', 'NAME': 'manga', 'USER': 'postgres', 'PASSWORD': '', 'HOST': 'localhost', 'PORT': '5432', } }</code></p>
<h6 id="mysql"><a href="#mysql"></a>MySQL<a aria-hidden="true" tabindex="-1" href="#mysql"><span class="icon icon-link"></span></a></h6>
<p><code>DATABASES = { 'default': { 'ENGINE': 'django.db.backends.mysql', 'NAME': 'manga', 'USER': 'root', 'PASSWORD': '', 'HOST': 'localhost', 'PORT': '3306', } }</code></p>
<h6 id="sqlite"><a href="#sqlite"></a>SQLite<a aria-hidden="true" tabindex="-1" href="#sqlite"><span class="icon icon-link"></span></a></h6>
<p>При настройке для баз данных SQLite мы должны убедиться, что наша база данных SQLite находится в правильной папке. Базовая директория - это корневая папка проекта, например, <code>manga-backend-django/database</code>. Вы можете просто скопировать папку базы данных из проекта <strong>manga-backend-express</strong> и поместить ее в корневую папку этого проекта.</p>
<p><code>DATABASES = { 'default': { 'ENGINE': 'django.db.backends.sqlite3', 'NAME': BASE_DIR / 'database/db.manga', } }</code></p>
<p>Отлично, теперь давайте поработаем над следующим шагом, который будет заключаться в выполнении миграции и создании суперпользователя для базы данных.</p>
<h6 id="выполняем-миграцию-на-python-и-создаем-суперпользователя-для-нашей-базы-данных"><a href="#doing-a-python-migration-and-creating-a-super-user-for-our-database"></a>Выполняем миграцию на Python и создаем суперпользователя для нашей базы данных<a aria-hidden="true" tabindex="-1" href="#выполняем-миграцию-на-python-и-создаем-суперпользователя-для-нашей-базы-данных"><span class="icon icon-link"></span></a></h6>
<p>Убедитесь, что вы находитесь в папке <code>manga</code> с файлом <code>manage.py</code> и выполните следующие команды. Мы будем использовать миграцию Python для создания всех таблиц для нашей базы данных:</p>
<p><code>python3 manage.py migrate</code>.</p>
<p>Теперь давайте создадим суперпользователя для базы данных, чтобы мы могли получить к ней доступ. Запустите эту команду и выполните все шаги. От вас требуется как минимум имя пользователя и пароль:</p>
<p><code>python3 manage.py createsuperuser</code>.</p>
<p>Завершив настройку, давайте создадим Django-сервер с конечными точками CRUD.</p>
<h6 id="создание-сервера-django-с-конечными-точками-crud"><a href="#creating-the-django-server-with-crud-endpoints"></a>Создание сервера Django с конечными точками CRUD<a aria-hidden="true" tabindex="-1" href="#создание-сервера-django-с-конечными-точками-crud"><span class="icon icon-link"></span></a></h6>
<p>Сначала нам нужно создать приложение под названием API, поэтому запустите этот код из той же папки с файлом <code>manage.py</code>, чтобы создать его:</p>
<p><code>django-admin startapp api</code>.</p>
<p>Теперь настройте Django Rest Framework в <code>settings.py</code>, добавив эти пакеты в массив <code>INSTALLED_APPS = []</code>:</p>
<p>`‘api.apps.ApiConfig’, ‘rest_framework’, ‘corsheaders’,“.</p>
<p>Чтобы избежать ошибок CORS на фронт-энде, нам нужно будет добавить еще несколько конфигураций в наш файл `settings.py. Сначала добавьте эти модули к существующему массиву MIDDLEWARE в файле:</p>
<p><code> django.middleware.common.CommonMiddleware</code>, <code> corsheaders.middleware.CorsMiddleware</code>,“</p>
<p>Затем добавьте эти конфигурации CORS куда-нибудь в файл:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E4F0FB">CORS_ALLOWED_ORIGINS</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> [</span></span>
<span class="line"><span style="color:#A6ACCD">    "</span><span style="color:#5DE4C7">http://localhost:3000</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">    # </span><span style="color:#E4F0FB">Добавьте</span><span style="color:#E4F0FB"> сюда</span><span style="color:#E4F0FB"> URL</span><span style="color:#E4F0FB"> вашего</span><span style="color:#E4F0FB"> фронтенда</span></span>
<span class="line"><span style="color:#A6ACCD">]</span></span>
<span class="line"><span style="color:#E4F0FB">CORS_ALLOW_METHODS</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> [</span></span>
<span class="line"><span style="color:#A6ACCD">    '</span><span style="color:#5DE4C7">DELETE</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">GET</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">OPTIONS</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">PATCH</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">POST</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">PUT</span><span style="color:#A6ACCD">'</span></span>
<span class="line"><span style="color:#A6ACCD">]</span></span>
<span class="line"><span style="color:#E4F0FB">CORS_ALLOW_HEADERS</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> [</span></span>
<span class="line"><span style="color:#A6ACCD">    '</span><span style="color:#5DE4C7">accept</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">accept-encoding</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">authorization</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">content-type</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">    '</span><span style="color:#5DE4C7">dnt</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">origin</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">user-agent</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">x-csrftoken</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">x-requested-with</span><span style="color:#A6ACCD">'</span></span>
<span class="line"><span style="color:#A6ACCD">]</span></span>
<span class="line"></span></code></pre>
<p>Теперь нам нужно создать наши модели баз данных, поэтому добавьте этот код в файл <code>api/models.py</code>:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> django.db </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> models</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">class</span><span style="color:#ADD7FF"> Anime</span><span style="color:#A6ACCD">(</span><span style="color:#ADD7FF">models</span><span style="color:#A6ACCD">.</span><span style="color:#ADD7FF">Model</span><span style="color:#A6ACCD">):</span></span>
<span class="line"><span style="color:#A6ACCD">    id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> models.AutoField(</span><span style="color:#E4F0FB">primary_key</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">True</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> models.CharField(</span><span style="color:#E4F0FB">max_length</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">null</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">True</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_name </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> models.CharField(</span><span style="color:#E4F0FB">max_length</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">100</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">null</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">True</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_release </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> models.CharField(</span><span style="color:#E4F0FB">max_length</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">null</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">True</span><span style="color:#A6ACCD">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">    def</span><span style="color:#A6ACCD"> __str__(</span><span style="color:#E4F0FB">self</span><span style="color:#A6ACCD">):</span></span>
<span class="line"><span style="color:#5DE4C7C0">        return</span><span style="color:#ADD7FF;font-style:italic"> self</span><span style="color:#A6ACCD">.anime_name</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">class</span><span style="color:#ADD7FF"> AnimeDetails</span><span style="color:#A6ACCD">(</span><span style="color:#ADD7FF">models</span><span style="color:#A6ACCD">.</span><span style="color:#ADD7FF">Model</span><span style="color:#A6ACCD">):</span></span>
<span class="line"><span style="color:#A6ACCD">    id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> models.AutoField(</span><span style="color:#E4F0FB">primary_key</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">True</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_id </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> models.CharField(</span><span style="color:#E4F0FB">max_length</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">null</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">True</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_genre </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> models.CharField(</span><span style="color:#E4F0FB">max_length</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">50</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">null</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">True</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">    anime_rating </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> models.IntegerField(</span><span style="color:#E4F0FB">null</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">True</span><span style="color:#A6ACCD">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">    def</span><span style="color:#A6ACCD"> __str__(</span><span style="color:#E4F0FB">self</span><span style="color:#A6ACCD">):</span></span>
<span class="line"><span style="color:#5DE4C7C0">        return</span><span style="color:#ADD7FF;font-style:italic"> self</span><span style="color:#A6ACCD">.anime_id</span></span>
<span class="line"></span></code></pre>
<p>После определения моделей выполните следующие команды для создания необходимых таблиц базы данных:</p>
<p><code>python manage.py makemigrations python manage.py migrate</code>.</p>
<p>Это создаст таблицы “api_anime” и “api_animedetails” в вашей базе данных а также несколько других. Существующие таблицы для “anime” и “anime_details” уже есть, поэтому для моделей будут созданы новые. Вы можете посмотреть, как это выглядит в Azure Data Studio, здесь:</p>
<figure class="igorlov-figure"><img  src="/_astro/django-db-tables_otkmvj.nutv6dEq_1JuBac.webp" alt="django-db-tables_otkmvj.jpg" width="516" height="884" loading="lazy" decoding="async"><figcaption>django-db-tables_otkmvj.jpg</figcaption></figure>
<p>Следующий шаг - создание сериализаторов и представлений API. Сериализаторы преобразуют сложные данные, такие как наборы запросов и экземпляры моделей, в родные для Python типы данных, которые могут быть легко отображены в виде JSON, XML или других типов контента. Создайте файл <code>api/serializers.py</code> и добавьте в него этот код:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> rest_framework </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> serializers</span></span>
<span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> .models </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> Anime, AnimeDetails</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">class</span><span style="color:#ADD7FF"> AnimeSerializer</span><span style="color:#A6ACCD">(</span><span style="color:#ADD7FF">serializers</span><span style="color:#A6ACCD">.</span><span style="color:#ADD7FF">ModelSerializer</span><span style="color:#A6ACCD">):</span></span>
<span class="line"><span style="color:#91B4D5">    class</span><span style="color:#ADD7FF"> Meta</span><span style="color:#A6ACCD">:</span></span>
<span class="line"><span style="color:#A6ACCD">        model </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> Anime</span></span>
<span class="line"><span style="color:#A6ACCD">        fields </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">__all__</span><span style="color:#A6ACCD">'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">class</span><span style="color:#ADD7FF"> AnimeDetailsSerializer</span><span style="color:#A6ACCD">(</span><span style="color:#ADD7FF">serializers</span><span style="color:#A6ACCD">.</span><span style="color:#ADD7FF">ModelSerializer</span><span style="color:#A6ACCD">):</span></span>
<span class="line"><span style="color:#91B4D5">    class</span><span style="color:#ADD7FF"> Meta</span><span style="color:#A6ACCD">:</span></span>
<span class="line"><span style="color:#A6ACCD">        model </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> AnimeDetails</span></span>
<span class="line"><span style="color:#A6ACCD">        fields </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">__all__</span><span style="color:#A6ACCD">'</span></span>
<span class="line"></span></code></pre>
<p>А теперь добавьте этот код в файл <code>api/views.py</code>, в котором будут возвращаться данные нашей базы данных:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> django.shortcuts </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> render</span></span>
<span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> rest_framework </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> viewsets</span></span>
<span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> .models </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> Anime, AnimeDetails</span></span>
<span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> .serializers </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> AnimeSerializer, AnimeDetailsSerializer</span></span>
<span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> rest_framework.views </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> APIView</span></span>
<span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> rest_framework.response </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> Response</span></span>
<span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> django.db </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> connection</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">class</span><span style="color:#ADD7FF"> AnimeViewSet</span><span style="color:#A6ACCD">(</span><span style="color:#ADD7FF">viewsets</span><span style="color:#A6ACCD">.</span><span style="color:#ADD7FF">ModelViewSet</span><span style="color:#A6ACCD">):</span></span>
<span class="line"><span style="color:#A6ACCD">    queryset </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> Anime.objects.all()</span></span>
<span class="line"><span style="color:#A6ACCD">    serializer_class </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> AnimeSerializer</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">class</span><span style="color:#ADD7FF"> AnimeDetailsViewSet</span><span style="color:#A6ACCD">(</span><span style="color:#ADD7FF">viewsets</span><span style="color:#A6ACCD">.</span><span style="color:#ADD7FF">ModelViewSet</span><span style="color:#A6ACCD">):</span></span>
<span class="line"><span style="color:#A6ACCD">    queryset </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> AnimeDetails.objects.all()</span></span>
<span class="line"><span style="color:#A6ACCD">    serializer_class </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> AnimeDetailsSerializer</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">class</span><span style="color:#ADD7FF"> JoinedTablesView</span><span style="color:#A6ACCD">(</span><span style="color:#ADD7FF">APIView</span><span style="color:#A6ACCD">):</span></span>
<span class="line"><span style="color:#91B4D5">    def</span><span style="color:#ADD7FF"> get</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">self</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">request</span><span style="color:#A6ACCD">):</span></span>
<span class="line"><span style="color:#5DE4C7C0">        try</span><span style="color:#A6ACCD">:</span></span>
<span class="line"><span style="color:#5DE4C7C0">            with</span><span style="color:#A6ACCD"> connection.cursor() </span><span style="color:#5DE4C7C0">as</span><span style="color:#A6ACCD"> cursor:</span></span>
<span class="line"><span style="color:#A6ACCD">                cursor.execute(</span><span style="color:#A6ACCD">"""</span></span>
<span class="line"><span style="color:#5DE4C7">                    SELECT *</span></span>
<span class="line"><span style="color:#5DE4C7">                    FROM api_anime</span></span>
<span class="line"><span style="color:#5DE4C7">                    INNER JOIN api_animedetails</span></span>
<span class="line"><span style="color:#5DE4C7">                    ON api_anime.anime_id = api_animedetails.anime_id;</span></span>
<span class="line"><span style="color:#A6ACCD">                """</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">                columns </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> [col[</span><span style="color:#5DE4C7">0</span><span style="color:#A6ACCD">] </span><span style="color:#5DE4C7C0">for</span><span style="color:#A6ACCD"> col </span><span style="color:#5DE4C7C0">in</span><span style="color:#A6ACCD"> cursor.description]</span></span>
<span class="line"><span style="color:#A6ACCD">                data </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> [</span><span style="color:#A6ACCDC0">dict</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FBD0">zip</span><span style="color:#A6ACCD">(columns, row)) </span><span style="color:#5DE4C7C0">for</span><span style="color:#A6ACCD"> row </span><span style="color:#5DE4C7C0">in</span><span style="color:#A6ACCD"> cursor.fetchall()]</span></span>
<span class="line"><span style="color:#5DE4C7C0">                return</span><span style="color:#A6ACCD"> Response(data)</span></span>
<span class="line"><span style="color:#5DE4C7C0">        except</span><span style="color:#A6ACCD"> OperationalError </span><span style="color:#5DE4C7C0">as</span><span style="color:#A6ACCD"> e:</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">            # Зафиксируйте исключение или обработайте его соответствующим образом</span></span>
<span class="line"><span style="color:#5DE4C7C0">            return</span><span style="color:#A6ACCD"> Response({</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">error</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">: f </span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">Database error: {e}</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">}, </span><span style="color:#E4F0FB">status</span><span style="color:#91B4D5">=</span><span style="color:#5DE4C7">500</span><span style="color:#A6ACCD">)</span></span>
<span class="line"></span></code></pre>
<p>Итак, далее мы создадим файл <code>api/urls.py</code> с этим кодом, в котором мы будем выполнять маршрутизацию для наших конечных точек URL:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> django.urls </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> path, include</span></span>
<span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> rest_framework.routers </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> DefaultRouter</span></span>
<span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> .views </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> AnimeViewSet, AnimeDetailsViewSet, JoinedTablesView</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">router </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> DefaultRouter()</span></span>
<span class="line"><span style="color:#A6ACCD">router.register(</span><span style="color:#91B4D5">r</span><span style="color:#A6ACCD">"</span><span style="color:#5FB3A1">anime</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">, AnimeViewSet)</span></span>
<span class="line"><span style="color:#A6ACCD">router.register(</span><span style="color:#91B4D5">r</span><span style="color:#A6ACCD">"</span><span style="color:#5FB3A1">anime-details</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">, AnimeDetailsViewSet)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">urlpatterns </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> [</span></span>
<span class="line"><span style="color:#A6ACCD">    path(</span><span style="color:#A6ACCD">""</span><span style="color:#A6ACCD">, include(router.urls)),</span></span>
<span class="line"><span style="color:#A6ACCD">    path(</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">joinedtables/</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">, JoinedTablesView.as_view(), </span><span style="color:#E4F0FB">name</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">joined-tables</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">]</span></span>
<span class="line"></span></code></pre>
<p>Наконец, замените код в файле <code>manga/urls.py</code> на этот код, который содержит наши корневые конечные точки:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> django.contrib </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> admin</span></span>
<span class="line"><span style="color:#5DE4C7">from</span><span style="color:#A6ACCD"> django.urls </span><span style="color:#5DE4C7">import</span><span style="color:#A6ACCD"> path, include</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">urlpatterns </span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD"> [</span></span>
<span class="line"><span style="color:#A6ACCD">    path(</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">admin/</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">, admin.site.urls),</span></span>
<span class="line"><span style="color:#A6ACCD">    path(</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">api/</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">, include(</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">api.urls</span><span style="color:#A6ACCD">"</span><span style="color:#A6ACCD">)),  </span><span style="color:#767C9DB0;font-style:italic"># Включить URL-адреса приложения 'api'</span></span>
<span class="line"><span style="color:#A6ACCD">]</span></span>
<span class="line"></span></code></pre>
<p>После определения представлений и URL-адресов мы должны выполнить следующие команды для создания необходимых таблиц базы данных. Если вы получаете какие-либо ошибки в консоли, они, скорее всего, связаны с отступами в Python, поэтому попробуйте отформатировать файлы, вызывающие проблемы:</p>
<p><code>python3 manage.py makemigrations python3 manage.py migrate</code>.</p>
<p>На этом мы закончим с этим разделом, поэтому запустите сервер разработки Django, используя приведенный ниже код:</p>
<p><code>python3 manage.py runserver</code>.</p>
<p>Django API должен быть доступен по адресам <a href="http://127.0.0.1:8000/api/anime/" rel="noopener noreferrer nofollow" target="_blank">http://127.0.0.1:8000/api/anime/</a>, <a href="http://127.0.0.1:8000/api/anime-details/" rel="noopener noreferrer nofollow" target="_blank">http://127.0.0.1:8000/api/anime-details/</a> и <a href="http://127.0.0.1:8000/api/joinedtables/" rel="noopener noreferrer nofollow" target="_blank">http://127.0.0.1:8000/api/joinedtables/</a> для выполнения CRUD операций над вашими моделями <code>Anime</code> и <code>AnimeDetails</code>. Как вы можете видеть, Django имеет встроенный фреймворк для тестирования API, называемый Django Rest Framework, поэтому вам не нужно использовать внешний инструмент тестирования API, такой как Postman.</p>
<p>Мы также можем получить доступ к таблицам базы данных в нашей системе управления базами данных (Azure Data Studio) и выполнить над ними CRUD. Просто помните, что в нашем Django-приложении таблицы базы данных будут называться <code>api_anime</code> и <code>api_animedetails</code>.</p>
<p><strong>Примечание: Если при использовании API-тестирования с бэкендом Django вы видите следующие ошибки, значит, вам нужно добавить слэш в конце конечной точки URL.</strong>.</p>
<blockquote>
<p>RuntimeError: Вы вызвали этот URL через POST, но URL не заканчивается на слеш и у вас установлен параметр APPEND_SLASH. Django не может перенаправить на URL со слешем, сохраняя данные POST. Измените форму, чтобы она указывала на localhost:8000/api/anime/ (обратите внимание на слэш в конце), или установите APPEND_SLASH=False в настройках Django.</p>
<p>RuntimeError: Вы вызвали этот URL через PUT, но URL не заканчивается на слеш и у вас установлен параметр APPEND_SLASH. Django не может перенаправить на URL со слешем, сохраняя данные PUT. Измените форму, чтобы она указывала на localhost:8000/api/anime/1/ (обратите внимание на слеш в конце), или установите APPEND_SLASH=False в настройках Django.</p>
</blockquote>
<p>Если вы столкнулись с новыми ошибками, то, скорее всего, они вызваны неправильным отступом в Python. Мы завершили этот раздел, теперь давайтеТеперь перейдем к последнему разделу, в котором мы создадим фронтенд.</p>
<h3 id="создание-фронтенда"><a href="#building-the-frontend"></a>Создание фронтенда<a aria-hidden="true" tabindex="-1" href="#создание-фронтенда"><span class="icon icon-link"></span></a></h3>
<p>Итак, на этот раз предположим, что разработчик фронтенда получил тикет из Jira на создание пользовательского интерфейса фронтенда. Первым этапом будет создание проекта с использованием фреймворка, в данном случае это будет Next.js.</p>
<p>В этом примере мы интегрируем библиотеку графиков на фронтенде, которая соединяется с бэкендом, имеющим полную функциональность CRUD.</p>
<p>Вот краткое описание того, что мы будем делать:</p>
<ol>
<li>Создайте проект React с помощью Next.js</li>
<li>Установите Jest и библиотеку тестирования React с возможностью установки обычных тестов и покрытия тестирования</li>
<li>Соберите компоненты и используйте рабочий процесс TDD</li>
</ol>
<p>Теперь, когда у нас есть обзор задач, давайте приступим.</p>
<h4 id="создание-react-проекта-с-использованием-nextjs"><a href="#create-a-react-project-using-nextjs"></a>Создание React-проекта с использованием Next.js<a aria-hidden="true" tabindex="-1" href="#создание-react-проекта-с-использованием-nextjs"><span class="icon icon-link"></span></a></h4>
<p>Первое, что нам нужно сделать, это с помощью командной строки вернуться в корневую папку нашего проекта, которая называется <strong>anime-dashboard-app</strong>. Теперь создайте проект Next.js и убедитесь, что вы выбрали <strong>Yes</strong> для Tailwind CSS, потому что он нам понадобится позже. Вы можете использовать настройки, которые я использовал здесь:</p>
<p><code>npx create-next-app manga-client</code>.</p>
<p>✔ Хотите ли вы использовать TypeScript? … Нет / <strong>Да</strong>
✔ Хотите ли вы использовать ESLint? … <strong>Нет</strong> / Да
✔ Хотите ли вы использовать Tailwind CSS? … Нет / <strong>Да</strong>
✔ Хотите ли вы использовать каталог <code>src/</code>? … Нет / <strong>Да</strong>
✔ Хотите ли вы использовать App Router? (рекомендуется) … Нет / <strong>Да</strong>
✔ Хотите ли вы настроить стандартный псевдоним импорта (@/*)? … <strong>Нет</strong> / Да</p>
<p>Давайте быстро обсудим тему разделения забот. В информатике разделение задач - это идея дизайна, которая разделяет компьютерную программу на различные части. Каждая часть занимается отдельным вопросом, набором данных, которые влияют на кодирование компьютерной программы. Учитывая это, мы позаботимся о том, чтобы наши папки были четко определены и чтобы в отдельной папке хранились все наши тесты.</p>
<p>Теперь мы создадим структуру папок проекта для наших компонентов, пользовательских хуков и тестовых файлов. У каждого компонента должен быть тест. Убедитесь, что вы запустили этот скрипт из корня папки <strong>manga-client</strong> в терминале:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">mkdir</span><span style="color:#ADD7FF"> __tests__</span></span>
<span class="line"><span style="color:#91B4D5">touch</span><span style="color:#ADD7FF"> __tests__/FormDelete.test.js</span></span>
<span class="line"><span style="color:#91B4D5">touch</span><span style="color:#ADD7FF"> __tests__/FormPostUpdate.test.js</span></span>
<span class="line"><span style="color:#91B4D5">touch</span><span style="color:#ADD7FF"> jest.config.mjs</span></span>
<span class="line"><span style="color:#91B4D5">cd</span><span style="color:#ADD7FF"> src/app</span></span>
<span class="line"><span style="color:#91B4D5">mkdir</span><span style="color:#ADD7FF"> components</span></span>
<span class="line"><span style="color:#91B4D5">cd</span><span style="color:#ADD7FF"> components</span></span>
<span class="line"><span style="color:#91B4D5">mkdir</span><span style="color:#ADD7FF"> hooks</span></span>
<span class="line"><span style="color:#91B4D5">mkdir</span><span style="color:#ADD7FF"> FormDelete</span></span>
<span class="line"><span style="color:#91B4D5">mkdir</span><span style="color:#ADD7FF"> FormPostUpdate</span></span>
<span class="line"><span style="color:#91B4D5">cd</span><span style="color:#ADD7FF"> FormDelete</span></span>
<span class="line"><span style="color:#91B4D5">touch</span><span style="color:#ADD7FF"> FormDelete.js</span></span>
<span class="line"><span style="color:#91B4D5">cd</span><span style="color:#ADD7FF"> ..</span></span>
<span class="line"><span style="color:#91B4D5">cd</span><span style="color:#ADD7FF"> FormPostUpdate</span></span>
<span class="line"><span style="color:#91B4D5">touch</span><span style="color:#ADD7FF"> FormPostUpdate.js</span></span>
<span class="line"><span style="color:#91B4D5">cd</span><span style="color:#ADD7FF"> ..</span></span>
<span class="line"><span style="color:#91B4D5">cd</span><span style="color:#ADD7FF"> ..</span></span>
<span class="line"><span style="color:#91B4D5">touch</span><span style="color:#ADD7FF"> hooks/useFetch.js</span></span>
<span class="line"><span style="color:#91B4D5">touch</span><span style="color:#ADD7FF"> hooks/useFetchSWR.js</span></span>
<span class="line"><span style="color:#91B4D5">touch</span><span style="color:#ADD7FF"> hooks/usePost.js</span></span>
<span class="line"><span style="color:#91B4D5">touch</span><span style="color:#ADD7FF"> hooks/useUpdate.js</span></span>
<span class="line"><span style="color:#91B4D5">touch</span><span style="color:#ADD7FF"> hooks/useDelete.js</span></span>
<span class="line"><span style="color:#91B4D5">cd</span><span style="color:#ADD7FF"> ../..</span></span>
<span class="line"></span></code></pre>
<p>Далее мы установим зависимости для нашего проекта, поэтому установите необходимые пакеты с помощью этих команд:</p>
<p><code>npm i --save-dev jest @types/jest @testing-library/jest-dom @testing-library/react @testing-library/user-event jest-environment-jsdom react-test-renderer swr</code>.</p>
<p>Итак, если ваш проект не открыт в редакторе кода, сделайте это сейчас. Следующим шагом будет добавление этих скриптов запуска Jest в файл <code>package.json</code>, который мы будем использовать для тестирования наших компонентов:</p>
<p><code>"test": "jest --watchAll", "coverage": "jest --collect-coverage --collectCoverageFrom='./src/app/components/**' --coveragePathIgnorePatterns="\\.snap$""</code>.</p>
<p>Теперь, когда наши тестовые сценарии настроены, нам нужно добавить этот код в файл <code>jest.config.mjs</code>, который мы создали, чтобы у нас была рабочая конфигурация Jest, готовая к тому, что мы захотим запустить некоторые тесты:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">nextJest</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">next/jest.js</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> createJestConfig</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> nextJest</span><span style="color:#A6ACCD">({</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	// Укажите путь к вашему приложению Next.js для загрузки next.config.js и .env файлов в тестовом окружении</span></span>
<span class="line"><span style="color:#ADD7FF">	dir</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">./</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// Добавьте любой пользовательский конфиг, который будет передан Jest</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">/** </span><span style="color:#A6ACCD;font-style:italic">@</span><span style="color:#91B4D5;font-style:italic">type</span><span style="color:#A6ACCD;font-style:italic"> {</span><span style="color:#A6ACCDC0;font-style:italic">import('jest').Config</span><span style="color:#A6ACCD;font-style:italic">}</span><span style="color:#767C9DB0;font-style:italic"> */</span></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> config</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	// Добавляем дополнительные параметры настройки перед запуском каждого теста</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">	// setupFilesAfterEnv: ['&#x3C;rootDir>/jest.setup.js'],</span></span>
<span class="line"><span style="color:#ADD7FF">	testEnvironment</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">jest-environment-jsdom</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">	coverageThreshold</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">		global</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">			branches</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 80</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">			functions</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 80</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">			lines</span><span style="color:#A6ACCD">:</span><span style="color:#5DE4C7"> 80</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">			statements</span><span style="color:#A6ACCD">:</span><span style="color:#91B4D5"> -</span><span style="color:#5DE4C7">10</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">		},</span></span>
<span class="line"><span style="color:#A6ACCD">	},</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// createJestConfig экспортируется таким образом для того, чтобы next/jest мог загрузить конфиг Next.js, который является асинхронным</span></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#E4F0FBD0">createJestConfig</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">config</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span></code></pre>
<p>Эти сценарии запуска тестов должны работать. Если вы запустите их сейчас, тесты будут провалены, потому что мы еще не добавили никакого кода в наши тестовые файлы.</p>
<p><code>npm run test npm run coverage</code></p>
<p>Итак, наш фронтенд-проект создан, осталось только собрать компоненты и тесты, и тогда наше аниме-приложение для дашборда будет готово!</p>
<h5 id="сборка-компонентов"><a href="#build-components"></a>Сборка компонентов<a aria-hidden="true" tabindex="-1" href="#сборка-компонентов"><span class="icon icon-link"></span></a></h5>
<p>Начнем с наших компонентов, добавив в файлы компонентов следующий код.</p>
<p>Первым будет наш компонент удаления формы, который находится в папке components. Он расположен по адресу <code>FormDelete/FormDelete.js</code>. Этот компонент не требует пояснений, он будет использоваться для удаления аниме из нашей базы данных.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useDelete</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@/app/hooks/useDelete</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> FormDelete</span><span style="color:#A6ACCD">()</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> setId</span><span style="color:#A6ACCD">]</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> {</span><span style="color:#E4F0FB"> deleteRequest</span><span style="color:#A6ACCD"> }</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useDelete</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> handleDeleteForm</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7"> async </span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">		e</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">preventDefault</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#A6ACCD">		if</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">id</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">)</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">			console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Form needs an id to be submitted</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">		}</span><span style="color:#A6ACCD"> else</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#D0679D">			try</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">				deleteRequest</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">`</span><span style="color:#5DE4C7">http://127.0.0.1:8000/api/anime/</span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD">}</span><span style="color:#5DE4C7">/</span><span style="color:#A6ACCD">`</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">				console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">`</span><span style="color:#5DE4C7">Anime </span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD">}</span><span style="color:#5DE4C7"> deleted</span><span style="color:#A6ACCD">`</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">				setId</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">			}</span><span style="color:#D0679D"> catch</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">)</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">				console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">			}</span></span>
<span class="line"><span style="color:#A6ACCD">		}</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">form</span><span style="color:#91B4D5;font-style:italic"> onSubmit</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#E4F0FBD0"> handleDeleteForm</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">)</span><span style="color:#E4F0FB">}></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-2 flex flex-wrap items-center bg-sky-200</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">label</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">w-24 p-2</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>ID&#x3C;/</span><span style="color:#5DE4C7">label</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">input</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						value</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{id}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						onChange</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#E4F0FBD0"> setId</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">target</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">value</span><span style="color:#A6ACCD">)</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">grow p-2</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						required</span></span>
<span class="line"><span style="color:#E4F0FB">					/></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">button</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">submit</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">cursor-pointer rounded-lg bg-sky-600 p-2 font-bold text-white</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#E4F0FB">					></span></span>
<span class="line"><span style="color:#E4F0FB">						Submit</span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;/</span><span style="color:#5DE4C7">button</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;/</span><span style="color:#5DE4C7">form</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Далее идет форма для добавления и обновления аниме в базе данных, файл находится по адресу <code>FormPostUpdate/FormPostUpdate.js</code>. Добавьте код в этот файл:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD">,</span><span style="color:#A6ACCD"> {</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> usePost</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">../../hooks/usePost</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useUpdate</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">.././hooks/useUpdate</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> FormPostUpdate</span><span style="color:#A6ACCD">({</span><span style="color:#E4F0FB"> crudType</span><span style="color:#A6ACCD"> })</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> setId</span><span style="color:#A6ACCD">]</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">animeId</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> setAnimeId</span><span style="color:#A6ACCD">]</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">animeName</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> setAnimeName</span><span style="color:#A6ACCD">]</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">animeRelease</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> setAnimeRelease</span><span style="color:#A6ACCD">]</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> {</span><span style="color:#E4F0FB"> postRequest</span><span style="color:#A6ACCD"> }</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> usePost</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> {</span><span style="color:#E4F0FB"> updateRequest</span><span style="color:#A6ACCD"> }</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useUpdate</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> handlePostUpdateForm</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7"> async </span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> type</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">		e</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">preventDefault</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#A6ACCD">		if</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">animeId</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> ''</span><span style="color:#91B4D5"> ||</span><span style="color:#E4F0FB"> animeName</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> ''</span><span style="color:#91B4D5"> ||</span><span style="color:#E4F0FB"> animeRelease</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">)</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">			console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Form needs data to be submitted</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">		}</span><span style="color:#A6ACCD"> else</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#D0679D">			try</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">				const</span><span style="color:#E4F0FB"> anime</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">					anime_id</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> animeId</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">					anime_name</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> animeName</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">					anime_release</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> animeRelease</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">				};</span></span>
<span class="line"><span style="color:#A6ACCD">				if</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">type</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">posted</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">)</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">					postRequest</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">http://127.0.0.1:8000/api/anime/</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> anime</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">					console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">`</span><span style="color:#5DE4C7">Anime </span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">type</span><span style="color:#A6ACCD">}`</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">					setId</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">					setAnimeId</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">					setAnimeName</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">					setAnimeRelease</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">				}</span><span style="color:#A6ACCD"> else</span><span style="color:#A6ACCD"> if</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">type</span><span style="color:#91B4D5"> ===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">updated</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> &#x26;&#x26;</span><span style="color:#E4F0FB"> id</span><span style="color:#91B4D5"> !==</span><span style="color:#A6ACCD"> ''</span><span style="color:#A6ACCD">)</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">					updateRequest</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">`</span><span style="color:#5DE4C7">http://127.0.0.1:8000/api/anime/</span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD">}</span><span style="color:#5DE4C7">/</span><span style="color:#A6ACCD">`</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> anime</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">					console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">`</span><span style="color:#5DE4C7">Anime </span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">type</span><span style="color:#A6ACCD">}`</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">					setId</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">					setAnimeId</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">					setAnimeName</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">					setAnimeRelease</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">				}</span></span>
<span class="line"><span style="color:#A6ACCD">			}</span><span style="color:#D0679D"> catch</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">)</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">				console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">			}</span></span>
<span class="line"><span style="color:#A6ACCD">		}</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">form</span><span style="color:#91B4D5;font-style:italic"> onSubmit</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#E4F0FBD0"> handlePostUpdateForm</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> crudType</span><span style="color:#A6ACCD">)</span><span style="color:#E4F0FB">}></span></span>
<span class="line"><span style="color:#E4F0FB">				{crudType </span><span style="color:#91B4D5">===</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">updated</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-2 flex flex-wrap items-center bg-sky-200</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">						&#x3C;</span><span style="color:#5DE4C7">label</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">w-24 p-2</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>ID&#x3C;/</span><span style="color:#5DE4C7">label</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">						&#x3C;</span><span style="color:#5DE4C7">input</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">							type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">							value</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{id}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">							onChange</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#E4F0FBD0"> setId</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">target</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">value</span><span style="color:#A6ACCD">)</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">							className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">grow p-2</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">							required</span></span>
<span class="line"><span style="color:#E4F0FB">						/></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">				)</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;>&#x3C;/></span></span>
<span class="line"><span style="color:#A6ACCD">				)</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-2 flex flex-wrap items-center bg-sky-200</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">label</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">w-24 p-2</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>Anime ID&#x3C;/</span><span style="color:#5DE4C7">label</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">input</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						value</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{animeId}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						onChange</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#E4F0FBD0"> setAnimeId</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">target</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">value</span><span style="color:#A6ACCD">)</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">grow p-2</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						required</span></span>
<span class="line"><span style="color:#E4F0FB">					/></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-2 flex flex-wrap items-center bg-sky-200</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">label</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">w-24 p-2</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>Name&#x3C;/</span><span style="color:#5DE4C7">label</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">input</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						value</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{animeName}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						onChange</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#E4F0FBD0"> setAnimeName</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">target</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">value</span><span style="color:#A6ACCD">)</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">grow p-2</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						required</span></span>
<span class="line"><span style="color:#E4F0FB">					/></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-2 flex flex-wrap items-center bg-sky-200</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">label</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">w-24 p-2</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>Релиз&#x3C;/</span><span style="color:#5DE4C7">label</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">input</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						value</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{animeRelease}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						onChange</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#E4F0FBD0"> setAnimeRelease</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">target</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">value</span><span style="color:#A6ACCD">)</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">grow p-2</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						required</span></span>
<span class="line"><span style="color:#E4F0FB">					/></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">button</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">submit</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">						className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">cursor-pointer rounded-lg bg-sky-600 p-2 font-bold text-white</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#E4F0FB">					></span></span>
<span class="line"><span style="color:#E4F0FB">						{</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD"> '</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">						Submit{</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD"> '</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;/</span><span style="color:#5DE4C7">button</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;/</span><span style="color:#5DE4C7">form</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Далее давайте займемся файлом <code>Page.js</code>, который является главным файлом для всего нашего приложения. Именно здесь будут располагаться все наши компоненты, поэтому замените весь код на этот:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">FormPostUpdate</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">./components/FormPostUpdate/FormPostUpdate</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">FormDelete</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">./app/components/FormDelete/FormDelete</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useFetch</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">./hooks/useFetch</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useFetchSWR</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">./hooks/useFetchSWR</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> Home</span><span style="color:#A6ACCD">()</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  // Откомментируйте код ниже и закомментируйте код "useFetch", если вы хотите использовать SWR для получения данных --> https://swr.vercel.app/docs/with-nextjs</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  // const { data, error, isLoading } = useFetchSWR(</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  // 'http://127.0.0.1:8000/api/anime/'</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  // );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">  // Используется Fetch API для получения данных</span></span>
<span class="line"><span style="color:#91B4D5">  const</span><span style="color:#A6ACCD"> {</span><span style="color:#E4F0FB"> data</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> error</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> isLoading</span><span style="color:#A6ACCD"> }</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useFetch</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">http://127.0.0.1:8000/api/anime/</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">  if</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">)</span><span style="color:#5DE4C7C0"> return</span><span style="color:#E4F0FB"> &#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">>An error has occurred.&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">  if</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">isLoading</span><span style="color:#A6ACCD">)</span><span style="color:#5DE4C7C0"> return</span><span style="color:#E4F0FB"> &#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">>Loading...&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">  console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">data</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">  return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">    &#x3C;></span></span>
<span class="line"><span style="color:#E4F0FB">      &#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">container mx-auto mt-10</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">        &#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-sky-300 rounded-lg p-4 mb-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">          &#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text-xl mb-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>POST: Добавить форму Аниме&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">          &#x3C;</span><span style="color:#5DE4C7">FormPostUpdate</span><span style="color:#91B4D5;font-style:italic"> crudType</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">posted</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">        &#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">        &#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-sky-300 rounded-lg p-4 mb-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">          &#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text-xl mb-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>UPDATE: Обновить форму Аниме&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">          &#x3C;</span><span style="color:#5DE4C7">p</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-yellow-100 p-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">> Выберите ID из списка. Вы можете изменить данные для ID, названия и релиза аниме.  &#x3C;</span><span style="color:#5DE4C7">FormPostUpdate</span><span style="color:#91B4D5;font-style:italic"> crudType</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">updated</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">        &#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">        &#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-sky-300 rounded-lg p-4 mb-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">          &#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text-xl mb-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>DELETE: Delete Anime Form&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">          &#x3C;</span><span style="color:#5DE4C7">FormDelete</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">        &#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">        &#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-sky-700 rounded-lg p-4 mb-4 text-white</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">          &#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text-xl</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>GET: Список данных аниме&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">          {data</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">map</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">anime</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">            &#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> key</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">id}></span></span>
<span class="line"><span style="color:#E4F0FB">              &#x3C;</span><span style="color:#5DE4C7">ul</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-sky-800 mb-4 p-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                &#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                  &#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text-lg font-bold</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>{anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime_name}&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                &#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                &#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">>ID: {anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">id}&#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                &#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">>Anime ID: {anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime_id}&#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                &#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">>Anime Release Year: {anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime_release}&#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">              &#x3C;/</span><span style="color:#5DE4C7">ul</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">            &#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">          ))</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">        &#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">      &#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">    &#x3C;/></span></span>
<span class="line"><span style="color:#E4F0FB">  );</span></span>
<span class="line"><span style="color:#E4F0FB">}</span></span>
<span class="line"></span></code></pre>
<p>Наши основные компоненты готовы, в следующем разделе мы создадим несколько тестовых файлов.</p>
<h5 id="настройка-наших-тестовых-файлов"><a href="#setting-up-our-test-files"></a>Настройка наших тестовых файлов<a aria-hidden="true" tabindex="-1" href="#настройка-наших-тестовых-файлов"><span class="icon icon-link"></span></a></h5>
<p>Для двух компонентов формы, которые мы создали, будет два тестовых файла. Эти тестовые файлы не имеют полного покрытия тестами, они проверяют только то, что компонент отрисовался без сбоев. Вы можете добавить больше тестов, если захотите. Наш тестовый файл находится в корневой папке проекта и называется <code>__tests__</code>.</p>
<p>Начните с добавления этого теста в файл удаления формы, расположенный в <code>FormDelete.test.js</code>.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> render</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@testing-library/react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">FormDelete</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">../src/app/components/FormDelete/FormDelete</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">describe</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">component renders</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">	test</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">component does not crash</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		render</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">&#x3C;</span><span style="color:#5DE4C7">FormDelete</span><span style="color:#E4F0FB"> /></span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span></code></pre>
<p>И, наконец, добавьте этот код в файл пост-обновления формы, расположенный в <code>FormPostUpdate.test.js</code>.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> render</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@testing-library/react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">FormPostUpdate</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">../src/app/components/FormPostUpdate/FormPostUpdate</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">describe</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Form component</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">	test</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">рендерит без сбоев</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		render</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">&#x3C;</span><span style="color:#5DE4C7">FormPostUpdate</span><span style="color:#E4F0FB"> /></span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span></code></pre>
<p>Теперь давайте создадим наши многоразовые крючки в следующем разделе для всех CRUD-запросов бэкенда, которые мы создали ранее.</p>
<h5 id="создание-наших-пользовательских-крючков"><a href="#creating-our-custom-hooks"></a>Создание наших пользовательских крючков<a aria-hidden="true" tabindex="-1" href="#создание-наших-пользовательских-крючков"><span class="icon icon-link"></span></a></h5>
<p>Первый пользовательский хук, который мы создадим, будет предназначен для получения данных из нашего бэкенда.</p>
<h6 id="get-запросы"><a href="#get-requests"></a>GET-запросы<a aria-hidden="true" tabindex="-1" href="#get-запросы"><span class="icon icon-link"></span></a></h6>
<p>В этой секции доступны два пользовательских хука, но нам нужно использовать только один из них. Эта версия использует Fetch API, и файл находится в <code>hooks/useFetch.js</code>, так что добавьте этот код в файл. Он также имеет настройку опроса, что означает, что он может автоматически периодически получать данные из нашего API, так что нам не придется вручную обновлять страницу после выполнения CRUD-действия.</p>
<p>Это простая функция, которая вызывает функцию fetch data каждые 2 секунды и может быть настроена на увеличение или уменьшение времени. Это простая в реализации функция, которая не требует использования сторонних библиотек, таких как WebSockets. Конечно, использование WebSockets было бы гораздо лучшей реализацией, но для этого простого демонстрационного приложения вполне достаточно.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD">,</span><span style="color:#ADD7FF"> useEffect</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> function</span><span style="color:#ADD7FF"> useFetch</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">url</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">data</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setData</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">([]);</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setError</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">null</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">isLoading</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setIsLoading</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">null</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">	useEffect</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">		const</span><span style="color:#ADD7FF"> fetchData</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7"> async</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#D0679D">			try</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">				const</span><span style="color:#E4F0FB"> json</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FBD0"> fetch</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">url</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">r</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> r</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">json</span><span style="color:#A6ACCD">());</span></span>
<span class="line"><span style="color:#E4F0FBD0">				setIsLoading</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">false</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">				setData</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">json</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">			} </span><span style="color:#D0679D">catch</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FBD0">				setError</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">				setIsLoading</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">false</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">			}</span></span>
<span class="line"><span style="color:#A6ACCD">		};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">		fetchData</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">		const</span><span style="color:#E4F0FB"> pollInterval</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> setInterval</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">			fetchData</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#A6ACCD">		}, </span><span style="color:#5DE4C7">2000</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">		return</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">			clearInterval</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">pollInterval</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">		};</span></span>
<span class="line"><span style="color:#A6ACCD">	}, [</span><span style="color:#E4F0FB">url</span><span style="color:#A6ACCD">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> {</span><span style="color:#E4F0FB"> data</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> error</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> isLoading</span><span style="color:#A6ACCD"> };</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Эта альтернативная версия использует <a href="https://swr.vercel.app/" rel="noopener noreferrer nofollow" target="_blank">SWR</a> и файл находится в <code>hooks/useFetchSWR</code>, поэтому добавьте код в него. Вы можете выбрать, какую версию использовать, посмотрев на комментарии в основном файле <code>page.js</code>.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">useSWR</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">swr</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> fetcher</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">url</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FBD0"> fetch</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">url</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">then</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">res</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> res</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">json</span><span style="color:#A6ACCD">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> function</span><span style="color:#ADD7FF"> useFetchSWR</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">url</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> { </span><span style="color:#E4F0FB">data</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">isLoading</span><span style="color:#A6ACCD"> } </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useSWR</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">url</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">fetcher</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> {</span><span style="color:#E4F0FB"> data</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> error</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> isLoading</span><span style="color:#A6ACCD"> };</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Итак, переходим к работе над хуком пост-запроса.</p>
<h6 id="post-запросы"><a href="#post-requests"></a>POST-запросы<a aria-hidden="true" tabindex="-1" href="#post-запросы"><span class="icon icon-link"></span></a></h6>
<p>Файл находится в <code>hooks/usePost.js</code>, и этот хук используется для добавления аниме в нашу базу данных, поэтому добавьте этот код в файл:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> function</span><span style="color:#ADD7FF"> usePost</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">isLoading</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setIsLoading</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">false</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setError</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">null</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">response</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setResponse</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">null</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#ADD7FF"> postRequest</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7"> async</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">url</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">formData</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setIsLoading</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">true</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setError</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">null</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FBD0">		setResponse</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">null</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D0679D">		try</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">			const</span><span style="color:#E4F0FB"> response</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FBD0"> fetch</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">url</span><span style="color:#A6ACCD">, {</span></span>
<span class="line"><span style="color:#ADD7FF">				method</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">POST</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">				headers</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#A6ACCD">					'</span><span style="color:#5DE4C7">Content-Type</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">:</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">application/json</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">				},</span></span>
<span class="line"><span style="color:#ADD7FF">				body</span><span style="color:#A6ACCD">:</span><span style="color:#ADD7FF"> JSON</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">stringify</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">formData</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">			});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">			const</span><span style="color:#E4F0FB"> responseData</span><span style="color:#91B4D5"> =</span><span style="color:#5DE4C7C0"> await</span><span style="color:#E4F0FB"> response</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">json</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">			if (</span><span style="color:#E4F0FB">response</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">ok</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FBD0">				setResponse</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">responseData</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">			} else {</span></span>
<span class="line"><span style="color:#E4F0FBD0">				setError</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">responseData</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">			}</span></span>
<span class="line"><span style="color:#A6ACCD">		} </span><span style="color:#D0679D">catch</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FBD0">			setError</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">		} </span><span style="color:#D0679D">finally</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">			setIsLoading</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">false</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">		}</span></span>
<span class="line"><span style="color:#A6ACCD">	};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> {</span><span style="color:#E4F0FB"> isLoading</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> error</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> response</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> postRequest</span><span style="color:#A6ACCD"> };</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Итак, перейдем к хуку обновления.</p>
<h6 id="update-requests"><a href="#update-requests"></a>UPDATE Requests<a aria-hidden="true" tabindex="-1" href="#update-requests"><span class="icon icon-link"></span></a></h6>
<p>Мы можем найти файл в <code>hooks/useUpdate.js</code> Этот хук предназначен для обновления наших данных в базе данных, поэтому добавьте этот код в файл:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useState</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> function</span><span style="color:#ADD7FF"> useUpdate</span><span style="color:#A6ACCD">() {</span></span>
<span class="line"><span style="color:#91B4D5">  const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">isLoading</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setIsLoading</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">false</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">  const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">setError</span><span style="color:#A6ACCD">] </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FBD0"> useState</span><span style="color:#A6ACCD">(</span><span style="color:#D0679D">null</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">  const</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">respoundefined</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">  const</span><span style="color:#E4F0FB"> filterDate</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> data</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">filter</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">a</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> a</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime_release</span><span style="color:#91B4D5"> ===</span><span style="color:#E4F0FB"> animeDate</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">  console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">filterDate</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">  setFilterAnimeDate</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">filterDate</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">  setAnimeDate</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">''</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">  return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#A6ACCD">    &#x3C;></span></span>
<span class="line"><span style="color:#A6ACCD">      &#x3C;</span><span style="color:#E4F0FB">div</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">        &#x3C;</span><span style="color:#E4F0FB">HighchartsReact</span><span style="color:#E4F0FB"> highcharts</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">{</span><span style="color:#E4F0FB">Highcharts</span><span style="color:#A6ACCD">} </span><span style="color:#E4F0FB">options</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">{</span><span style="color:#E4F0FB">chartOptions</span><span style="color:#A6ACCD">} </span><span style="color:#91B4D5">/></span></span>
<span class="line"><span style="color:#A6ACCD">        &#x3C;</span><span style="color:#E4F0FB">p</span><span style="color:#E4F0FB"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-green-300 p-4 mb-4 mt-4 rounded-lg</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5">></span></span>
<span class="line"><span style="color:#E4F0FB">          Hovering</span><span style="color:#E4F0FB"> over</span><span style="color:#A6ACCD">: &#x3C;</span><span style="color:#E4F0FB">span</span><span style="color:#E4F0FB"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">font-bold</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5">></span><span style="color:#A6ACCD">{</span><span style="color:#E4F0FB">hoverData</span><span style="color:#A6ACCD">}</span><span style="color:#91B4D5">&#x3C;/</span><span style="color:#E4F0FB">span</span><span style="color:#91B4D5">></span></span>
<span class="line"><span style="color:#A6ACCD">        &#x3C;/</span><span style="color:#E4F0FB">p</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">      &#x3C;/</span><span style="color:#E4F0FB">div</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">      &#x3C;</span><span style="color:#E4F0FB">form</span><span style="color:#E4F0FB"> onSubmit</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">{</span><span style="color:#E4F0FB">handleFilterAnime</span><span style="color:#A6ACCD">}</span><span style="color:#91B4D5">></span></span>
<span class="line"><span style="color:#A6ACCD">        &#x3C;</span><span style="color:#E4F0FB">div</span><span style="color:#E4F0FB"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-sky-300 rounded-lg p-4 mb-4</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5">></span></span>
<span class="line"><span style="color:#A6ACCD">          &#x3C;</span><span style="color:#E4F0FB">div</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">            &#x3C;</span><span style="color:#E4F0FB">h1</span><span style="color:#E4F0FB"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text-xl mb-4</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5">></span><span style="color:#E4F0FB">Filter</span><span style="color:#E4F0FB"> by</span><span style="color:#E4F0FB"> release</span><span style="color:#E4F0FB"> year</span><span style="color:#91B4D5">&#x3C;/</span><span style="color:#E4F0FB">h1</span><span style="color:#91B4D5">></span></span>
<span class="line"><span style="color:#A6ACCD">            &#x3C;</span><span style="color:#E4F0FB">div</span><span style="color:#E4F0FB"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-sky-200 flex flex-wrap items-center mb-2</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5">></span></span>
<span class="line"><span style="color:#A6ACCD">              &#x3C;</span><span style="color:#E4F0FB">label</span><span style="color:#E4F0FB"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">p-2 w-24</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5">></span><span style="color:#E4F0FB">Date</span><span style="color:#A6ACCD">:</span><span style="color:#91B4D5">&#x3C;/</span><span style="color:#E4F0FB">label</span><span style="color:#91B4D5">></span></span>
<span class="line"><span style="color:#A6ACCD">              &#x3C;</span><span style="color:#E4F0FB">input</span></span>
<span class="line"><span style="color:#E4F0FB">                type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#E4F0FB">                value</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">{</span><span style="color:#E4F0FB">animeDate</span><span style="color:#A6ACCD">}</span></span>
<span class="line"><span style="color:#E4F0FB">                onChange</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">{</span><span style="color:#E4F0FB">(e) => </span><span style="color:#ADD7FF">setAnimeDate</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">e.target.value</span><span style="color:#A6ACCD">)}</span></span>
<span class="line"><span style="color:#E4F0FB">                className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">grow p-2</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#E4F0FB">                required</span></span>
<span class="line"><span style="color:#A6ACCD">              /></span></span>
<span class="line"><span style="color:#A6ACCD">            &#x3C;/</span><span style="color:#E4F0FB">div</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">            &#x3C;</span><span style="color:#E4F0FB">div</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">              &#x3C;</span><span style="color:#E4F0FB">button</span></span>
<span class="line"><span style="color:#E4F0FB">                type</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">submit</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#E4F0FB">                className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-sky-600 p-2 text-white cursor-pointer font-bold rounded-lg</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#A6ACCD">              ></span></span>
<span class="line"><span style="color:#E4F0FB">                Submit</span></span>
<span class="line"><span style="color:#A6ACCD">              &#x3C;/</span><span style="color:#E4F0FB">button</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">            &#x3C;/</span><span style="color:#E4F0FB">div</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">          &#x3C;/</span><span style="color:#E4F0FB">div</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">        &#x3C;/</span><span style="color:#E4F0FB">div</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">      &#x3C;/</span><span style="color:#E4F0FB">form</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">      &#x3C;</span><span style="color:#E4F0FB">div</span><span style="color:#E4F0FB"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-green-600 p-4 rounded-lg</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5">></span></span>
<span class="line"><span style="color:#A6ACCD">        &#x3C;</span><span style="color:#E4F0FB">h1</span><span style="color:#E4F0FB"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text-xl text-white</span><span style="color:#A6ACCD">"</span><span style="color:#91B4D5">></span><span style="color:#E4F0FB">Release</span><span style="color:#E4F0FB"> Year</span><span style="color:#91B4D5">&#x3C;/</span><span style="color:#E4F0FB">h1</span><span style="color:#91B4D5">></span></span>
<span class="line"><span style="color:#A6ACCD">        {</span><span style="color:#E4F0FB">filterAnimeDate</span><span style="color:#A6ACCD"> === 0 ? (</span></span>
<span class="line"><span style="color:#A6ACCD">          &#x3C;>&#x3C;/></span></span>
<span class="line"><span style="color:#A6ACCD">        ) : (</span></span>
<span class="line"><span style="color:#A6ACCD">          &#x3C;></span></span>
<span class="line"><span style="color:#A6ACCD">            {</span><span style="color:#E4F0FB">filterAnimeDate</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">map</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">anime</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">              &#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> key</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">id} </span><span style="color:#91B4D5;font-style:italic">className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mt-4 text-white</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                &#x3C;</span><span style="color:#5DE4C7">ul</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-green-700 mb-4 p-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                  &#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                    &#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text-lg font-bold</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>{anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime_name}&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                  &#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                  &#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">>ID: {anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">id}&#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                  &#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">>Anime ID: {anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime_id}&#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                  &#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">>Anime Release Year: {anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime_release}&#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">                &#x3C;/</span><span style="color:#5DE4C7">ul</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">              &#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">            ))}</span></span>
<span class="line"><span style="color:#A6ACCD">          &#x3C;/></span></span>
<span class="line"><span style="color:#A6ACCD">        )}</span></span>
<span class="line"><span style="color:#A6ACCD">      &#x3C;/</span><span style="color:#E4F0FB">div</span><span style="color:#A6ACCD">></span></span>
<span class="line"><span style="color:#A6ACCD">    &#x3C;/></span></span>
<span class="line"><span style="color:#A6ACCD">  );</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Ок, почти готово, теперь создайте тестовый файл <code>Chart.test.js</code> внутри папки <code>__tests__</code> и добавьте этот код для тестового файла графика:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> render</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">@testing-library/react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">Chart</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">../src/app/components/Chart/Chart</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FBD0">describe</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">it renders</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">	test</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Chart component loads</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FBD0">		render</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">&#x3C;</span><span style="color:#5DE4C7">Chart</span><span style="color:#E4F0FB"> /></span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"><span style="color:#A6ACCD">});</span></span>
<span class="line"></span></code></pre>
<p>Наконец, обновите файл <code>Page.js</code> с этим кодом, чтобы наш компонент графика теперь мог отображаться на странице, и все готово!</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">React</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">react</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">FormPostUpdate</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">./components/FormPostUpdate/FormPostUpdate</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">FormDelete</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">../app/components/FormDelete/FormDelete</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useFetch</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">./hooks/useFetch</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">{</span><span style="color:#ADD7FF"> useFetchSWR</span><span style="color:#A6ACCD"> }</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">./hooks/useFetchSWR</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">Chart</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">./components/Chart/Chart</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export default </span><span style="color:#91B4D5">function</span><span style="color:#ADD7FF"> Home</span><span style="color:#A6ACCD">()</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> {</span><span style="color:#E4F0FB"> data</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> error</span><span style="color:#A6ACCD">,</span><span style="color:#E4F0FB"> isLoading</span><span style="color:#A6ACCD"> }</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> useFetch</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">http://127.0.0.1:8000/api/anime/</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">	if</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">error</span><span style="color:#A6ACCD">)</span><span style="color:#5DE4C7C0"> return</span><span style="color:#E4F0FB"> &#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">>An error has occurred.&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">	if</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">isLoading</span><span style="color:#A6ACCD">)</span><span style="color:#5DE4C7C0"> return</span><span style="color:#E4F0FB"> &#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">>Loading...&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">	console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">data</span><span style="color:#A6ACCD">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">container mx-auto mt-10 grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-4 rounded-lg bg-sky-300 p-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">						&#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-4 text-xl</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>POST: Add Anime Form&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">						&#x3C;</span><span style="color:#5DE4C7">FormPostUpdate</span><span style="color:#91B4D5;font-style:italic"> crudType</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">posted</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-4 rounded-lg bg-sky-300 p-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">						&#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-4 text-xl</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>UPDATE: Update Anime Form&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">						&#x3C;</span><span style="color:#5DE4C7">p</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">bg-yellow-100 p-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">							Select an ID from the list. You can change the data for Anime ID, Name and Release.</span></span>
<span class="line"><span style="color:#E4F0FB">							&#x3C;</span><span style="color:#5DE4C7">FormPostUpdate</span><span style="color:#91B4D5;font-style:italic"> crudType</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">updated</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">						&#x3C;/</span><span style="color:#5DE4C7">p</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-4 rounded-lg bg-sky-300 p-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">						&#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-4 text-xl</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>DELETE: Delete Anime Form&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">						&#x3C;</span><span style="color:#5DE4C7">FormDelete</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-4 rounded-lg bg-sky-700 p-4 text-white</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">						&#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">text-xl</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>GET: Anime Data List&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">						{data</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">map</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">anime</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">							&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#91B4D5;font-style:italic"> key</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">id}></span></span>
<span class="line"><span style="color:#E4F0FB">								&#x3C;</span><span style="color:#5DE4C7">ul</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">mb-4 bg-sky-800 p-4</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">									&#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">										&#x3C;</span><span style="color:#5DE4C7">h1</span><span style="color:#91B4D5;font-style:italic"> className</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">font-bold text-lg</span><span style="color:#A6ACCD">"</span><span style="color:#E4F0FB">>{anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime_name}&#x3C;/</span><span style="color:#5DE4C7">h1</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">									&#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">									&#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">>ID: {anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">id}&#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">									&#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">>Anime ID: {anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime_id}&#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">									&#x3C;</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">>Anime Release Year: {anime</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">anime_release}&#x3C;/</span><span style="color:#5DE4C7">li</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">								&#x3C;/</span><span style="color:#5DE4C7">ul</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">							&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">						))</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">					&#x3C;</span><span style="color:#5DE4C7">Chart</span><span style="color:#E4F0FB"> /></span></span>
<span class="line"><span style="color:#E4F0FB">				&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;/</span><span style="color:#5DE4C7">div</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#E4F0FB">		&#x3C;/></span></span>
<span class="line"><span style="color:#A6ACCD">	);</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Хорошо! У нас должен быть рабочий график с полным CRUD-функционалом, с обновлениями в реальном времени и другой формой для фильтрации аниме по датам, а данные отображаются на странице. Возможно, вам придется перезагрузить страницу, чтобы она обновилась с учетом внесенных нами изменений, прежде чем она начнет работать должным образом. Все 3 теста должны быть пройдены, и вот как выглядит окончательный дизайн:</p>
<figure class="igorlov-figure"><img  src="/_astro/dashboard-app_ckgxzs.CP0aklAe_Z1DANGV.webp" alt="dashboard-app_ckgxzs.jpg" width="800" height="422" loading="lazy" decoding="async"><figcaption>dashboard-app_ckgxzs.jpg</figcaption></figure>
<p>Поздравляем, вы только что создали полнофункциональное приложение для приборной панели и завершили этот проект 🎉.</p>
<h4 id="заключение"><a href="#conclusion"></a>Заключение<a aria-hidden="true" tabindex="-1" href="#заключение"><span class="icon icon-link"></span></a></h4>
<p>Итак, сегодня мы рассказали о том, как это - работать разработчиком. У нас было краткое введение в Agile и работу с Jira. Нам удалось создать два бэкенда: один с помощью Node.js и Express, а другой - с помощью Python и Django. Мы использовали наш инструмент тестирования API (в данном случае Postman) для выполнения CRUD-запросов (Create, Read, Update, Delete). Затем мы подключили бэкенды к нашему фронтенду, который мы создали с помощью Next.js. Это позволило нам увидеть, как работает CRUD-функциональность на фронтенде. Наконец, мы реализовали диаграмму, которая отображает данные в нашей базе данных, дополняя наше приложение приборной панелью.</p>
<p>Создание программного обеспечения может потребовать много работы и этапов, и то, что мы видели сегодня, - лишь небольшой снимок рабочего процесса разработчика. Существует множество других областей, которые необходимо учитывать, например, частые собрания команды, обзоры кода при каждом внесении изменений и т. д.. Чтобы еще больше улучшить свои знания в этой области, вы можете попробовать настроить Jira или альтернативный рабочий процесс с полным конвейером CI/CD, поскольку это может быть хорошей практикой для новичков, которым еще только предстоит профессионально работать в команде компании. В заключение хочу сказать, что существует бесконечное множество способов работы разработчиков и команд, и это лишь один из примеров.</p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Создание приложения для контрольной панели с помощью SQL, Node.js, Django и Next.js&#38;url=https://igorlov.ru/blog/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js&#38;title=Создание приложения для контрольной панели с помощью SQL, Node.js, Django и Next.js&#38;summary=Сегодня мы получим краткое представление о том, что такое работа над проектами в качестве разработчика в составе команды внутри компании. Мы будем создавать пр&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/sozdanye-prylozhenyia-dlia-kontrolnoi-panely-s-pomoschiu-sql-node-js-django-y-next-js&#38;media=&#38;description=Сегодня мы получим краткое представление о том, что такое работа над проектами в качестве разработчика в составе команды внутри компании. Мы будем создавать пр" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/rukovodstvo-po-vkliuchenyiu-chastychnoho-predvarytelnoho-renderynha-v-next-js" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> Руководство по включению частичного предварительного рендеринга в Next.js </a> <a href="/blog/8-rasprostranennyh-problem-i-uyazvimostej-word-press-i-kak-ih-ispravit" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> 8 распространенных проблем и уязвимостей WordPress (и как их исправить) </a> </nav>  </div> </article> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.svLg6TOn.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> <astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.BwogX8bT.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  </div> <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ФCВР</a>  <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>