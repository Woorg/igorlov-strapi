<!DOCTYPE html><html lang="ru"> <head><title>Создание карт React Native с помощью Mapbox - Фул Фронт Дев</title><link rel="canonical" href="https://igorlov.ru/blog/sozdanie-kart-react-native-s-pomoshhyu-mapbox"><meta name="description" content="В современном цифровом мире карты стали неотъемлемой частью мобильных приложений. Интеграция карт в приложение, будь то навигация, определение местоположения..."><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.10.0"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_regular_.Dg72Zwgc.css">
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#0d52a1;color:rgba(13,82,161,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw)}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.container[data-astro-cid-vcbh62el]{padding:min(2rem,1.2125rem + 1.05vw)}.list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.link[data-astro-cid-vcbh62el]{font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;padding:.125rem .75rem;font-size:min(1.5rem,1.1625rem + .45vw);line-height:var(--tw-lh)}
</style>
<link rel="stylesheet" href="/_astro/_single_.CzD8Xhhr.css">
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#27292d;border-color:rgba(39,41,45,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.comments[data-v-f9c4118f]{margin:auto;margin-top:1.25rem;width:100%;--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.comments:where([class=dark][data-v-f9c4118f],[class=dark] *[data-v-f9c4118f]){--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.giscus-frame[data-v-f9c4118f]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#27292d;color:rgba(39,41,45,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-f9c4118f],[class=dark] *[data-v-f9c4118f]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
</style><script type="module" src="/_astro/hoisted.CUFolni_.js"></script><style>[data-astro-transition-scope="astro-xdjatz7t-1"] { view-transition-name: blog-image-sozdanie-kart-react-native-s-pomoshhyu-mapbox; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-16 font-inter text-blue fluid:text-lg lg:pt-24 dark:bg-black dark:text-white"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-medium lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-blue dark:text-white" aria-label="logo" data-astro-cid-ijoll5s5> <svg width="1.44em" height="1em" viewBox="0 0 5660 3931" class="icon" data-astro-cid-ijoll5s5 data-icon="logo-one">  <symbol id="ai:local:logo-one"><g fill="currentColor"><path d="M1198.57 596.749c0 329.575-267.171 596.751-596.747 596.751-329.575 0-596.749-267.176-596.749-596.751S272.248 0 601.823 0c329.576 0 596.747 267.174 596.747 596.749Z"/><circle cx="3035.75" cy="617.751" r="596.749" transform="rotate(-90 3035.75 617.751)"/><path d="M3035.75 2736.81c329.57 0 596.75 267.18 596.75 596.75 0 329.58-267.18 596.75-596.75 596.75-329.58 0-596.75-267.17-596.75-596.75 0-329.57 267.17-596.75 596.75-596.75Z"/><circle cx="596.749" cy="1964.8" r="596.749"/><path d="M1193.5 3332.87c0 329.57-267.176 596.75-596.751 596.75S0 3662.44 0 3332.87c0-329.58 267.174-596.75 596.749-596.75 329.575 0 596.751 267.17 596.751 596.75Z"/><circle cx="5062.46" cy="617.751" r="596.749" transform="rotate(-90 5062.46 617.751)"/><circle cx="5062.46" cy="3333.56" r="596.749" transform="rotate(-90 5062.46 3333.56)"/></g></symbol><use xlink:href="#ai:local:logo-one"></use>  </svg>  </a> <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> Меню</button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> Закрыть</button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты </a> </li> </ul> </nav> </div>   <!-- <ThemeToggle client:only /> --> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <div class="container" data-astro-cid-vcbh62el> <ol class="list" role="list" data-astro-cid-vcbh62el> <li class="item" role="listitem" data-astro-cid-vcbh62el> <a class="link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="item" role="listitem" data-astro-cid-vcbh62el> <a class="link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </div> </nav>  <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <article data-astro-cid-axzg2cw6> <figure class="article__image" data-astro-cid-axzg2cw6> <picture data-astro-cid-axzg2cw6> <source srcset="/_astro/undefined-Aug-19-2023.CZWYLyFA_Z2djEpW.avif" type="image/avif"><source srcset="/_astro/undefined-Aug-19-2023.CZWYLyFA_Z19wSdi.webp" type="image/webp"> <img src="/_astro/undefined-Aug-19-2023.CZWYLyFA_Zd4zFh.png" alt="Создание карт React Native с помощью Mapbox" class="aspect-video h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-xdjatz7t-1" width="1120" height="580" decoding="async"> </picture> </figure> </article> <div class="container" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/учебник" class="categories__link" data-astro-cid-axzg2cw6> Учебник  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Создание карт React Native с помощью Mapbox </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/react-native" data-astro-cid-axzg2cw6> React Native </a> </li><li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/mapbox" data-astro-cid-axzg2cw6> Mapbox </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 19 авг., 2023 by Igor Gorlov </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div> <div class="article__content prose prose-zinc max-w-full break-words text-blue dark:prose-invert prose-headings:text-blue prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <!-- <TextAds /> --> <!-- <AdfoxTocAds blockId="adfox_17062261612859555" /> --> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/sozdanie-kart-react-native-s-pomoshhyu-mapbox" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/sozdanie-kart-react-native-s-pomoshhyu-mapbox" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Создание карт React Native с помощью Mapbox&url=https://igorlov.ru/blog/sozdanie-kart-react-native-s-pomoshhyu-mapbox" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&url=https://igorlov.ru/blog/sozdanie-kart-react-native-s-pomoshhyu-mapbox&title=Создание карт React Native с помощью Mapbox&summary=В современном цифровом мире карты стали неотъемлемой частью мобильных приложений. Интеграция карт в приложение, будь то навигация, определение местоположения...&source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/sozdanie-kart-react-native-s-pomoshhyu-mapbox&media=&description=В современном цифровом мире карты стали неотъемлемой частью мобильных приложений. Интеграция карт в приложение, будь то навигация, определение местоположения..." target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <p>В современном цифровом мире карты стали неотъемлемой частью мобильных приложений. Интеграция карт в приложение, будь то навигация, определение местоположения близлежащих объектов или предоставление услуг на основе местоположения, может значительно повысить удобство работы пользователя. React Native, популярный фреймворк для создания кроссплатформенных мобильных приложений, предоставляет возможность создания интерактивных карт с использованием различных картографических платформ. В этой статье мы расскажем о том, как создать карту в приложении React Native с помощью библиотеки Mapbox.</p>
<p>Mapbox - популярная картографическая платформа, предлагающая разработчикам мощные инструменты и сервисы. Благодаря обширному набору API и SDK Mapbox позволяет разработчикам создавать потрясающие и многофункциональные карты в своих React Native-приложениях. От отображения вида карты до интеграции местоположения пользователя и добавления пользовательских маркеров - Mapbox предоставляет все инструменты для создания захватывающего и интересного картографического опыта.</p>
<p>В этой статье мы рассмотрим шаги, необходимые для настройки Mapbox в проекте, отображения вида карты, получения местоположения пользователя и добавления пользовательских маркеров для расширения функциональности карты.</p>
<!-- wp:rank-math/toc-block {"title":"Оглавление","headings":[{"key":"2d3af192-d18b-4d75-80cc-24acd6352b24","content":"Предварительные условия","level":2,"link":"#предварительные-условия","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"c2db12e8-49e4-4370-ac34-459d2b903ccd","content":"Настройка приложения","level":2,"link":"#настройка-приложения","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"df8c3b9c-e344-4a2c-b89f-3d068b0f56a4","content":"Установка и настройка Mapbox","level":2,"link":"#установка-и-настройка-mapbox","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"113233d0-8cef-4299-a448-fa6d1957e62a","content":"Построение приложения с использованием EAS","level":2,"link":"#построение-приложения-с-использованием-eas","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"8216628c-686b-4dca-beaa-80065d5012fe","content":"Получение местоположения пользователя","level":2,"link":"#получение-местоположения-пользователя","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"623287b0-ab7d-48cc-959e-712d4422195b","content":"Добавление маркера к местоположению пользователя","level":2,"link":"#добавление-маркера-к-местоположению-пользователя","disable":false,"isUpdated":false,"isGeneratedLink":true},{"key":"1fc9dac4-372a-4ded-a084-57f5dcec9a26","content":"Заключение","level":2,"link":"#заключение","disable":false,"isUpdated":false,"isGeneratedLink":true}],"listStyle":"ul"} -->
<div class="wp-block-rank-math-toc-block" id="rank-math-toc"><h2>Оглавление</h2><nav><ul><li class=""><a href="#предварительные-условия">Предварительные условия</a></li><li class=""><a href="#настройка-приложения">Настройка приложения</a></li><li class=""><a href="#установка-и-настройка-mapbox">Установка и настройка Mapbox</a></li><li class=""><a href="#построение-приложения-с-использованием-eas">Построение приложения с использованием EAS</a></li><li class=""><a href="#получение-местоположения-пользователя">Получение местоположения пользователя</a></li><li class=""><a href="#добавление-маркера-к-местоположению-пользователя">Добавление маркера к местоположению пользователя</a></li><li class=""><a href="#заключение">Заключение</a></li></ul></nav></div>
<!-- /wp:rank-math/toc-block -->
<h2 class="wp-block-heading" id="предварительные-условия">Предварительные условия</h2>
<p>Прежде чем мы начнем, убедитесь, что у вас есть следующие предварительные условия:</p>
<!-- wp:list -->
<ul><!-- wp:list-item -->
<li>На вашем компьютере установлены Node.js и npm.</li>
<!-- /wp:list-item -->
<!-- wp:list-item -->
<li>Expo CLI.</li>
<!-- /wp:list-item -->
<!-- wp:list-item -->
<li>Учетная запись Mapbox. Бесплатный аккаунт можно зарегистрировать на сайте mapbox.com.</li>
<!-- /wp:list-item -->
<!-- wp:list-item -->
<li>Требуется учетная запись EAS (Expo Application Services).</li>
<!-- /wp:list-item -->
<!-- wp:list-item -->
<li>Если вы разрабатываете под iOS, вам потребуется учетная запись разработчика Apple, за которую необходимо платить около 100 долл. в год.</li>
<!-- /wp:list-item -->
<!-- wp:list-item -->
<li>Кроме того, если вы разрабатываете приложение для Android, вам потребуется симулятор Android или физический телефон с Android.</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->
<h2 class="wp-block-heading" id="настройка-приложения">Настройка приложения</h2>
<p>Чтобы создать новое приложение React с помощью Expo CLI, откройте терминал, перейдите в каталог, в который вы хотите установить проект, и выполните следующую команду:</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">npx create-expo-app mapbox_app
cd mapbox_app</code></pre>
<!-- /wp:code -->
<h2 class="wp-block-heading" id="установка-и-настройка-mapbox">Установка и настройка Mapbox</h2>
<p>Чтобы установить пакет Mapbox в папку проекта, выполните приведенную ниже команду:</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">npm i @rnmapbox/maps</code></pre>
<!-- /wp:code -->
<p>Для того чтобы @rnmapbox/maps работал на платформе IOS, необходимо добавить в файл ios/Podfile следующие конфигурации.</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">pre_install do |installer|
   $RNMapboxMaps.pre_install(installer)
   ... other pre install hooks
   end
post_install do |installer|
   $RNMapboxMaps.post_install(installer)
   ... other post install hooks
   end</code></pre>
<!-- /wp:code -->
<p>Теперь давайте установим зависимость Mapbox для iOS. В папке ios вашего проекта выполните в терминале следующую команду:</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">pod install</code></pre>
<!-- /wp:code -->
<p>Затем войдите на свою страницу панели Mapbox, чтобы сгенерировать токен Mapbox API. На приборной панели нажмите на кнопку Create a Token.</p>
<!-- wp:image -->
<figure class="wp-block-image"><img src="https://blog.openreplay.com/images/create-a-react-native-map-using-mapbox/images/image1.png" alt="-"></figure>
<!-- /wp:image -->
<p>На странице Create an Access Token введите имя приложения, отметьте опцию DOWNLOAD:READ и нажмите на кнопку Create Token, как показано на рисунке ниже:</p>
<!-- wp:image -->
<figure class="wp-block-image"><img src="https://blog.openreplay.com/images/create-a-react-native-map-using-mapbox/images/image2.png" alt="-"></figure>
<!-- /wp:image -->
<p>Далее вы будете перенаправлены обратно на страницу приборной панели, где можно получить доступ к публичному токену API и секретному токену, как показано ниже:</p>
<!-- wp:image -->
<figure class="wp-block-image"><img src="https://blog.openreplay.com/images/create-a-react-native-map-using-mapbox/images/image3.png" alt="-"></figure>
<!-- /wp:image -->
<p>Отображение вида карты</p>
<p>Чтобы отобразить вид карты в нашем приложении React Native, мы должны сначала импортировать пакет Mapbox в наш код. Откройте файл app.js и добавьте следующий код.</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">import React from "react";
import { StyleSheet, View } from "react-native";
import Mapbox from "@rnmapbox/maps";
// . .  .</code></pre>
<!-- /wp:code -->
<p>Далее мы должны установить маркер доступа Mapbox и создать переменную defaultStyle. Переменная defaultStyle содержит сведения о том, как будет загружаться и настраиваться карта, такие как источник, минимальный и максимальный уровни масштабирования, цвет фона карты и тип карты.</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">// . . .
// Mapbox.setWellKnownTileServer("Mapbox");
Mapbox.setAccessToken("Your Access  Token here");
const defaultStyle = {
 version: 8,
 name: "Land",
 sources: {
   map: {
     type: "raster",
     tiles: ["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],
     tileSize: 256,
     minzoom: 1,
     maxzoom: 19,
   },
 },
 layers: [
   {
     id: "background",
     type: "background",
     paint: {
       "background-color": "#f2efea",
     },
   },
   {
     id: "map",
     type: "raster",
     source: "map",
     paint: {
       "raster-fade-duration": 100,
     },
   },
 ],
};
// . . .</code></pre>
<!-- /wp:code -->
<p>В приведенном выше коде обновите токен доступа на свой токен доступа из панели Mapbox.<br>Теперь мы будем использовать компонент Mapbox MapView для отображения карты в нашем приложении, передав переменную defaultStyle в атрибут styleJSON с помощью кода, приведенного ниже.</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">// . . .
const App = () => {
 return (
   &#x3C;View style={styles.page}>
     &#x3C;View style={styles.container}>
       &#x3C;Mapbox.MapView
         style={styles.map}
         styleJSON={JSON.stringify(defaultStyle)}
       />
     &#x3C;/View>
   &#x3C;/View>
 );
};
export default App;
const styles = StyleSheet.create({
 page: {
   flex: 1,
   justifyContent: "center",
   alignItems: "center",
 },
 container: {
   height: 700,
   width: 390,
 },
 map: {
   flex: 1,
 },
});</code></pre>
<!-- /wp:code -->
<h2 class="wp-block-heading" id="построение-приложения-с-использованием-eas">Построение приложения с использованием EAS</h2>
<p>EAS (Expo Application Services) - это набор инструментов и сервисов, предоставляемых Expo, популярной платформой для создания и развертывания React Native-приложений. EAS предлагает ряд функций и сервисов для оптимизации процесса разработки, тестирования и развертывания Expo-проектов.<br>Мы не можем протестировать приложение с помощью Expo, поскольку Mapbox не поддерживает Expo. Чтобы протестировать приложение для работы с картами, необходимо собрать его с помощью EAS.<br>Чтобы установить EAS в каталог проекта, выполните в терминале следующие команды.</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">npm install -g eas-cli
npx expo install expo-dev-client expo-location</code></pre>
<!-- /wp:code -->
<p>Чтобы настроить приложение для сборки, создайте в корневой папке проекта файл eas.json и добавьте в него следующие конфигурации для Android и iOS.</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">{
 "build": {
   "development-simulator": {
     "developmentClient": true,
     "distribution": "internal",
     "android": {
       "simulator": true
     },
     "ios": {
       "simulator": true
     }
   }
 }
}</code></pre>
<!-- /wp:code -->
<p>Далее выполните приведенный ниже код для создания приложения на выбранной вами платформе.</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">eas build --profile development-simulator --platform android
# OR
eas build --profile development-simulator --platform ios</code></pre>
<!-- /wp:code -->
<p>Выполнение приведенной выше команды сборки может занять некоторое время. Подождите, пока процесс не завершится.</p>
<!-- wp:image -->
<figure class="wp-block-image"><img src="https://blog.openreplay.com/images/create-a-react-native-map-using-mapbox/images/image4.png" alt="-"></figure>
<!-- /wp:image -->
<p>После завершения сборки воспользуйтесь ссылкой на сборку для загрузки и установки приложения на устройство.<br>Нам необходимо запустить проект Expo с помощью команды сервера разработки. Выполните приведенную ниже команду в терминале.</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">npx expo start --dev-client</code></pre>
<!-- /wp:code -->
<p>Теперь откройте установленное приложение, и оно должно отобразить карту, как показано на рисунке ниже.</p>
<!-- wp:image -->
<figure class="wp-block-image"><img src="https://blog.openreplay.com/images/create-a-react-native-map-using-mapbox/images/image5.png" alt="-"></figure>
<!-- /wp:image -->
<h2 class="wp-block-heading" id="получение-местоположения-пользователя">Получение местоположения пользователя</h2>
<p>Одной из распространенных функций картографического приложения является определение местоположения пользователя по его координатам и отображение их на карте. expo-location - это пакет для определения местоположения пользователя.<br>Установите пакет expo-location с помощью следующей команды.</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">npx expo install expo-location</code></pre>
<!-- /wp:code -->
<p>Чтобы получить координаты пользователя, откройте файл app.js и замените в нем код на следующий.</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">import React, { useState, useEffect } from "react";
import { Platform, Text, View, StyleSheet } from "react-native";
import Mapbox from "@rnmapbox/maps";
import * as Location from "expo-location";
Mapbox.setWellKnownTileServer("Mapbox");
Mapbox.setAccessToken(
 "Access Token Here"
);
export default function App() {
 const [location, setLocation] = useState(null);
 useEffect(() => {
   (async () => {
     let { status } = await Location.requestForegroundPermissionsAsync();
     if (status !== "granted") {
       setErrorMsg("Permission to access location was denied");
       return;
     }
     let location = await Location.getCurrentPositionAsync({});
     setLocation(location);
   })();
 }, []);
// . . .</code></pre>
<!-- /wp:code -->
<p>В приведенном выше коде мы сначала запрашиваем у пользователей разрешение на доступ приложения к данным об их местоположении с помощью функции Location.requestForegroundPermissionsAsync().<br>После получения разрешения на определение местоположения мы используем Location.getLastKnownPositionAsync() для получения координат пользователя и сохранения их в переменной location.</p>
<h2 class="wp-block-heading" id="добавление-маркера-к-местоположению-пользователя">Добавление маркера к местоположению пользователя</h2>
<p>Добавление пользовательского маркера к местоположению пользователя полезно для выделения его местоположения на карте. Mapbox предоставляет API для добавления маркеров на карту с помощью компонента Mapbox’s PointAnnotation.<br>Чтобы указать местоположение пользователя с помощью маркера на карте, добавьте следующий код в файл app.js.</p>
<!-- wp:code -->
<pre class="wp-block-code"><code lang="javascript" class="language-javascript">return (
 &#x3C;Mapbox.MapView style={{ flex: 1 }}>
   {location &#x26;&#x26; (
     &#x3C;Mapbox.PointAnnotation
       id="userLocation"
       coordinate={[location.coords.longitude, location.coords.latitude]}
     >
       &#x3C;Mapbox.Callout title="You are here!" />
     &#x3C;/Mapbox.PointAnnotation>
   )}
 &#x3C;/Mapbox.MapView>
)};</code></pre>
<!-- /wp:code -->
<p>Теперь перезагрузите приложение, и вам будет предложено разрешить приложению доступ к вашему местоположению. После получения разрешения на карте появятся маркеры местоположения, указывающие на текущее местоположение, как показано на рисунке ниже.</p>
<!-- wp:image -->
<figure class="wp-block-image"><img src="https://blog.openreplay.com/images/create-a-react-native-map-using-mapbox/images/image6.png" alt="-"></figure>
<!-- /wp:image -->
<h2 class="wp-block-heading" id="заключение">Заключение</h2>
<p>В этой статье мы рассмотрели создание карты React Native с использованием Mapbox. Мы рассмотрели процесс установки и настройки, отображение вида карты на платформах iOS и Android, отображение местоположения пользователя и добавление маркера к местоположению пользователя.</p>
<p>Выполнив эти шаги, вы сможете усовершенствовать свои приложения React Native, интегрировав в них мощные картографические возможности с помощью Mapbox. Экспериментируйте с различными функциями и API, предоставляемыми Mapbox, для создания интересных и интерактивных приложений на основе карт.</p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/sozdanie-kart-react-native-s-pomoshhyu-mapbox" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/sozdanie-kart-react-native-s-pomoshhyu-mapbox" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Создание карт React Native с помощью Mapbox&url=https://igorlov.ru/blog/sozdanie-kart-react-native-s-pomoshhyu-mapbox" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&url=https://igorlov.ru/blog/sozdanie-kart-react-native-s-pomoshhyu-mapbox&title=Создание карт React Native с помощью Mapbox&summary=В современном цифровом мире карты стали неотъемлемой частью мобильных приложений. Интеграция карт в приложение, будь то навигация, определение местоположения...&source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/sozdanie-kart-react-native-s-pomoshhyu-mapbox&media=&description=В современном цифровом мире карты стали неотъемлемой частью мобильных приложений. Интеграция карт в приложение, будь то навигация, определение местоположения..." target="_blank" rel="noreferrer noopener nofollow" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/sozdanie-rolika-dlya-igry-v-kosti-s-pomoshhyu-three-js-i-cannon-es" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> Создание ролика для игры в кости с помощью Three.js и Cannon-es </a> <a href="/blog/sozdanie-igry-minesweeper-v-solidjs-igrovaya-doska" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> Создание игры Minesweeper в SolidJS - Игровая доска </a> </nav>  </div> </div> </article> <div class="container" data-astro-cid-axzg2cw6> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.D-6fTqBY.js" component-export="default" renderer-url="/_astro/client.Bd2Qst3j.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> </div> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.ChJFdf82.js" component-export="default" renderer-url="/_astro/client.44T8euMP.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-medium lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-blue dark:text-white" aria-label="logo" data-astro-cid-ijoll5s5> <svg width="1.44em" height="1em" viewBox="0 0 5660 3931" class="icon" data-astro-cid-ijoll5s5 data-icon="logo-one">  <use xlink:href="#ai:local:logo-one"></use>  </svg>  </a> <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>