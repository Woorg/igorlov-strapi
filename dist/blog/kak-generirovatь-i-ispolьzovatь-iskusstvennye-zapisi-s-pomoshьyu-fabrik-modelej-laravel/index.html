<!DOCTYPE html><html lang="ru"> <head><title>Как Генерировать И Использовать Искусственные Записи С...
</title><link rel="canonical" href="https://igorlov.ru/blog/kak-generirovat%D1%8C-i-ispol%D1%8Czovat%D1%8C-iskusstvennye-zapisi-s-pomosh%D1%8Cyu-fabrik-modelej-laravel"><meta name="description" content="Тестирование является неотъемлемой частью веб-разработки. Фабрики моделей Laravel определяют записи в базе данных предсказуемым и легко воспроизводимым...
"><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.5.1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_regular_.uIaUWrkB.css" />
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw);padding-left:min(2rem,1.2125rem + 1.05vw);padding-right:min(2rem,1.2125rem + 1.05vw);padding-top:1rem;padding-bottom:1rem}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.breadcrumbs__link[data-astro-cid-vcbh62el]{border-radius:9999px;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover{--tw-bg-opacity: 1;background-color:#fce4e1;background-color:rgba(252,228,225,var(--tw-bg-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]{padding:.125rem .75rem}.breadcrumbs__link[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#6a6a6a;background-color:rgba(106,106,106,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#8a8a93;background-color:rgba(138,138,147,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}
</style>
<link rel="stylesheet" href="/_astro/_single_.CyWP_2Jq.css" />
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#020202;border-color:rgba(2,2,2,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.theme-toggle[data-v-8d8d9c54]{width:1.25rem;height:1.25rem}
.comments[data-v-533071ec]{margin:auto;margin-top:1.25rem;max-width:42rem;--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.comments:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame[data-v-533071ec]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
</style><script type="module" src="/_astro/hoisted.DYPnEDpO.js"></script><style>[data-astro-transition-scope="astro-vgmtzcrq-1"] { view-transition-name: blog-image-kak-generirovat\44C-i-ispol\44Czovat\44C-iskusstvennye-zapisi-s-pomosh\44Cyu-fabrik-modelej-laravel; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-14 font-inter text-dark fluid:text-lg dark:bg-black dark:text-white"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ИГ ФCВР</a>  <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> </button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> </button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/projects" class="nav__link" data-astro-cid-7wkmezxd> Работы. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты. </a> </li> </ul> </nav> </div>   <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="IJ3dh" component-url="/_astro/ThemeToggle.kpN4JrWQ.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-rq644orq&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;ThemeToggle&quot;,&quot;value&quot;:true}"></astro-island> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <div class="blocks__container container"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <ol class="breadcrumbs__list" role="list" data-astro-cid-vcbh62el> <li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </nav>  </div> <div class="blocks__container container"> <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/как-закодить" class="categories__link" data-astro-cid-axzg2cw6> Как закодить  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Как генерировать и использовать искусственные записи с помощью фабрик моделей Laravel </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/laravel" data-astro-cid-axzg2cw6> Laravel </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 06 нояб., 2023 by Igor Gorlov </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div>  <figure class="article__image" data-astro-cid-axzg2cw6> <picture> <source srcset="/_astro/kak-generirovat%D1%8C-i-ispol%D1%8Czovat%D1%8C-iskusstvennye-zapisi-s-pomosh%D1%8Cyu-fabrik-modelej-laravel-Nov-06-2023.B5s0jdhe_ZNrLNf.avif" type="image/avif"><source srcset="/_astro/kak-generirovat%D1%8C-i-ispol%D1%8Czovat%D1%8C-iskusstvennye-zapisi-s-pomosh%D1%8Cyu-fabrik-modelej-laravel-Nov-06-2023.B5s0jdhe_10gTL0.webp" type="image/webp"> <img src="/_astro/kak-generirovat%D1%8C-i-ispol%D1%8Czovat%D1%8C-iskusstvennye-zapisi-s-pomosh%D1%8Cyu-fabrik-modelej-laravel-Nov-06-2023.B5s0jdhe_ZxbbyN.png" alt="Как генерировать и использовать искусственные записи с помощью фабрик моделей Laravel" class="aspect-auto h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-vgmtzcrq-1" width="1200" height="500" decoding="async"> </picture> </figure>  <div class="article__content prose prose-zinc max-w-full dark:prose-invert prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:-mx-12 prose-figure:w-screen prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <div id="adfox_17062261612859555"></div> <script>(function(){const blockId = "adfox_17062261612859555";

	window.yaContextCb = window.yaContextCb || [];
	window.yaContextCb.push(() => {
		Ya.adfoxCode.createAdaptive(
			{
				ownerId: 1493338,
				containerId: blockId,
				params: {
					p1: 'dawgg',
					p2: 'p',
				},
			},
			['desktop', 'tablet', 'phone'],
			{
				tabletWidth: 830,
				phoneWidth: 480,
				isAutoReloads: true,
			},
		);
	});
})();</script> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/kak-generirovatь-i-ispolьzovatь-iskusstvennye-zapisi-s-pomoshьyu-fabrik-modelej-laravel" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/kak-generirovatь-i-ispolьzovatь-iskusstvennye-zapisi-s-pomoshьyu-fabrik-modelej-laravel" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Как генерировать и использовать искусственные записи с помощью фабрик моделей Laravel&#38;url=https://igorlov.ru/blog/kak-generirovatь-i-ispolьzovatь-iskusstvennye-zapisi-s-pomoshьyu-fabrik-modelej-laravel" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/kak-generirovatь-i-ispolьzovatь-iskusstvennye-zapisi-s-pomoshьyu-fabrik-modelej-laravel&#38;title=Как генерировать и использовать искусственные записи с помощью фабрик моделей Laravel&#38;summary=Тестирование является неотъемлемой частью веб-разработки. Фабрики моделей Laravel определяют записи в базе данных предсказуемым и легко воспроизводимым...
&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/kak-generirovatь-i-ispolьzovatь-iskusstvennye-zapisi-s-pomoshьyu-fabrik-modelej-laravel&#38;media=&#38;description=Тестирование является неотъемлемой частью веб-разработки. Фабрики моделей Laravel определяют записи в базе данных предсказуемым и легко воспроизводимым...
" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <details open class="toc px-5 border border-gray-light lg:px-10 py-2 cursor-pointer"><summary class="toc__title text-xl font-medium">Содержание</summary><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#необходимые-условия">Необходимые условия</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#как-настроить-проект">Как настроить проект</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#установите-инсталлятор-laravel">Установите инсталлятор Laravel</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#создание-проекта-laravel">Создание проекта Laravel</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#создание-проекта-laravel-1">Создание проекта Laravel</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#запуск-приложения">Запуск приложения</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#создание-базы-данных">Создание базы данных</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#редактирование-файла-env">Редактирование файла .env</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#как-сгенерировать-фальшивые-данные">Как сгенерировать фальшивые данные</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#создание-модели-комментариев">Создание модели комментариев</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#создание-файла-миграции">Создание файла миграции</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#запуск-миграций">Запуск миграций</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#создание-файла-фабрики-commentfactory">Создание файла-фабрики CommentFactory</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#функция-определения">Функция определения</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#подключение-модели-comment-к-commentfactory">Подключение модели Comment к CommentFactory</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#как-засеять-базу-данных">Как засеять базу данных</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#создание-файла-commentseeder">Создание файла CommentSeeder</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#редактирование-функции-run">Редактирование функции Run</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#запуск-сеялки">Запуск сеялки</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#как-сбросить-базу-данных">Как сбросить базу данных</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#использование-refreshdatabase">Использование RefreshDatabase</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#запуск-теста">Запуск теста</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#успешное-тестирование-artisan">Успешное тестирование Artisan</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#резюме">Резюме</a></li></ol></details open><p>Тестирование является неотъемлемой частью веб-разработки. Фабрики моделей Laravel определяют записи в базе данных предсказуемым и легко воспроизводимым образом, что позволяет обеспечить последовательность и контроль при тестировании приложений. Фабрики моделей определяют набор атрибутов по умолчанию для каждой из ваших моделей Eloquent.</p>
<p>Например, если вы создаете приложение для ведения блогов, позволяющее авторам и модераторам утверждать комментарии до их публикации, вам необходимо проверить, правильно ли работает эта функция, прежде чем развернуть ее для пользователей. Для всего этого необходимы тестовые данные.</p>
<p>Для тестирования описанного выше приложения для ведения блога необходимы данные о комментариях для имитации и проверки работоспособности приложения. Laravel позволяет сделать это без получения комментариев от реальных пользователей, используя фабрики Laravel и Faker для генерации поддельных данных.</p>
<p>В этой статье рассказывается о том, как получить данные о комментариях без комментариев реальных пользователей.</p>
<h2 id="необходимые-условия">Необходимые условия<a aria-hidden="true" tabindex="-1" href="#необходимые-условия"><span class="icon icon-link"></span></a></h2>
<p>Для выполнения данного руководства необходимо знать следующее:</p>
<ul>
<li>XAMPP</li>
<li>Composer</li>
</ul>
<p>XAMPP - это бесплатный и простой в установке дистрибутив Apache, содержащий PHP, Perl и MariaDB - базу данных MySQL. В данном руководстве используется последняя версия, 8.1.10, которая устанавливает PHP 8.1.10. В данном руководстве используется XAMPP под Windows.</p>
<p>Composer - это инструмент, позволяющий определять, устанавливать и загружать пакеты, от которых зависит ваше веб-приложение в процессе разработки и производства. В данном руководстве используется версия Composer v2.4.4, для которой требуется PHP версии 7.2+. Для установки инсталлятора Laravel в этом руководстве используется Composer.</p>
<p>Вы также можете <a href="https://github.com/multi-Adams/laravel-factories-article" rel="noopener noreferrer nofollow" target="_blank">загрузить полный код проекта</a>, чтобы следовать за ним.</p>
<p>Тестирование приложения не должно быть чем-то второстепенным. В этом может помочь Laravel Model factories!</p>
<h2 id="как-настроить-проект">Как настроить проект<a aria-hidden="true" tabindex="-1" href="#как-настроить-проект"><span class="icon icon-link"></span></a></h2>
<p>В этом разделе вы создадите проект Laravel и подключите его к базе данных. Давайте рассмотрим, что из этого следует и как это сделать.</p>
<h3 id="установите-инсталлятор-laravel">Установите инсталлятор Laravel<a aria-hidden="true" tabindex="-1" href="#установите-инсталлятор-laravel"><span class="icon icon-link"></span></a></h3>
<p>Чтобы быстро создать проект Laravel, установите инсталлятор Laravel:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">composer</span><span style="color:#ADD7FF"> global</span><span style="color:#ADD7FF"> require</span><span style="color:#ADD7FF"> laravel/installer</span></span>
<span class="line"></span></code></pre>
<p>Этот код устанавливает инсталлятор Laravel глобально на вашу машину.</p>
<h3 id="создание-проекта-laravel">Создание проекта Laravel<a aria-hidden="true" tabindex="-1" href="#создание-проекта-laravel"><span class="icon icon-link"></span></a></h3>
<p>Далее создайте проект Laravel, выполнив следующие действия:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">laravel</span><span style="color:#ADD7FF"> new</span><span style="color:#ADD7FF"> app-name</span></span>
<span class="line"></span></code></pre>
<p>Этот код загружает новый проект Laravel и устанавливает все зависимости:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/creating-laravel-project.png" alt="Создание проекта Laravel"><figcaption>Создание проекта Laravel</figcaption></figure>
<h3 id="создание-проекта-laravel-1">Создание проекта Laravel<a aria-hidden="true" tabindex="-1" href="#создание-проекта-laravel-1"><span class="icon icon-link"></span></a></h3>
<p>Другой более простой способ установки Laravel - использовать Composer напрямую.</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">composer</span><span style="color:#ADD7FF"> create-project</span><span style="color:#ADD7FF"> laravel/laravel</span><span style="color:#ADD7FF"> app-name</span></span>
<span class="line"></span></code></pre>
<p>При использовании описанного выше способа установка инсталлятора Laravel не требуется.</p>
<h3 id="запуск-приложения">Запуск приложения<a aria-hidden="true" tabindex="-1" href="#запуск-приложения"><span class="icon icon-link"></span></a></h3>
<p>Теперь можно изменить каталог на app-name и запустить проект с помощью собственного инструмента интерфейса командной строки (CLI) Laravel, Artisan:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">php</span><span style="color:#ADD7FF"> artisan</span><span style="color:#ADD7FF"> serve</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<p>Этот код запускает проект и подключает его к localhost:8000 или любому другому доступному порту, если порт 8000 используется. На localhost:8000 вы должны увидеть нечто подобное:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/laravel-website-homepage.png" alt="Главная страница сайта Laravel"><figcaption>Главная страница сайта Laravel</figcaption></figure>
<h3 id="создание-базы-данных">Создание базы данных<a aria-hidden="true" tabindex="-1" href="#создание-базы-данных"><span class="icon icon-link"></span></a></h3>
<p>Для подключения приложения к базе данных необходимо создать новую базу данных с помощью графического интерфейса XAMPP PHPMyAdmin. Перейдите по адресу localhost/phpmyadmin и нажмите кнопку New на боковой панели:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/create-database-form.png" alt="Форма &#x22;Создание базы данных&#x22; в PHPMyAdmin"><figcaption>Форма "Создание базы данных" в PHPMyAdmin</figcaption></figure>
<p>На рисунке выше показана форма Create Database с именем базы данных app_name.</p>
<p>Нажмите кнопку Create для создания базы данных.</p>
<h3 id="редактирование-файла-env">Редактирование файла .env<a aria-hidden="true" tabindex="-1" href="#редактирование-файла-env"><span class="icon icon-link"></span></a></h3>
<p>Чтобы подключить приложение к базе данных, необходимо отредактировать часть DB файла .env:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span>DB_CONNECTION=mysql</span></span>
<span class="line"><span>DB_HOST=127.0.0.1</span></span>
<span class="line"><span>DB_PORT=3306</span></span>
<span class="line"><span>DB_DATABASE=app_name</span></span>
<span class="line"><span>DB_USERNAME=root</span></span>
<span class="line"><span>DB_PASSWORD=</span></span>
<span class="line"><span></span></span></code></pre>
<p>Этот код заполняет учетные данные базы данных именем базы данных, именем пользователя, портом, паролем и хостом. Теперь можно приступать к созданию фабрик и моделей.</p>
<p>Примечание: Замените значения на свои учетные данные базы данных. Кроме того, если вы столкнетесь с ошибкой ”Доступ запрещен для пользователя”, заключите значения DB_USERNAME и DB_PASSWORD в двойные кавычки.</p>
<h2 id="как-сгенерировать-фальшивые-данные">Как сгенерировать фальшивые данные<a aria-hidden="true" tabindex="-1" href="#как-сгенерировать-фальшивые-данные"><span class="icon icon-link"></span></a></h2>
<p>После создания приложения и подключения его к базе данных можно создать необходимые файлы для генерации фальшивых данных в базе.</p>
<h3 id="создание-модели-комментариев">Создание модели комментариев<a aria-hidden="true" tabindex="-1" href="#создание-модели-комментариев"><span class="icon icon-link"></span></a></h3>
<p>Создайте файл модели для взаимодействия с таблицами базы данных. Для создания модели используйте программу Artisan:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">php</span><span style="color:#ADD7FF"> artisan</span><span style="color:#ADD7FF"> make:model</span><span style="color:#ADD7FF"> Comment</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<p>Этот код создает файл Comment.php в папке app/Models с некоторым шаблонным кодом. Добавьте следующий код ниже строки use HasFactory;:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7"> protected</span><span style="color:#A6ACCD"> $</span><span style="color:#E4F0FB">fillable</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> [</span></span>
<span class="line"><span style="color:#A6ACCD">      '</span><span style="color:#5DE4C7">name</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">      '</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">      '</span><span style="color:#5DE4C7">body</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">      '</span><span style="color:#5DE4C7">approved</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">      '</span><span style="color:#5DE4C7">likes</span><span style="color:#A6ACCD">'</span></span>
<span class="line"><span style="color:#A6ACCD">    ];</span></span>
<span class="line"></span></code></pre>
<p>В этом коде перечислены поля, для которых необходимо разрешить массовые назначения, поскольку по умолчанию Laravel защищает базу данных от массовых назначений. Теперь файл модели Comment должен выглядеть следующим образом:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/carbon.png" alt="Файл модели комментария"><figcaption>Файл модели комментария</figcaption></figure>
<h3 id="создание-файла-миграции">Создание файла миграции<a aria-hidden="true" tabindex="-1" href="#создание-файла-миграции"><span class="icon icon-link"></span></a></h3>
<p>После создания файла модели и объявления массива $fillable необходимо создать файл миграции с помощью приведенной ниже команды:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">php</span><span style="color:#ADD7FF"> artisan</span><span style="color:#ADD7FF"> make:migration</span><span style="color:#ADD7FF"> create_comments_table</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<p>Примечание: Для создания миграций в Laravel обычно используется именование snake_case, также известное как underscore_case. Первое слово - это действие, второе слово - множественное число модели, а последнее слово - функция, которая создается внутри проекта. Это означает, что при создании миграции для модели Book вы напишете create_books_table.</p>
<p>Этот код создает файл с именем yyyy_mm_dd_hhmmss_create_comments_table внутри папки database/migrations.</p>
<p>Далее отредактируйте функцию up внутри yyyy_mm_dd_hhmmss_create_comments_table:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">public</span><span style="color:#91B4D5"> function</span><span style="color:#ADD7FF"> up</span><span style="color:#A6ACCD">()</span></span>
<span class="line"><span style="color:#A6ACCD">    {</span></span>
<span class="line"><span style="color:#ADD7FF">  Schema</span><span style="color:#91B4D5">::</span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">comments</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#91B4D5">function</span><span style="color:#A6ACCD"> (</span><span style="color:#ADD7FF">Blueprint</span><span style="color:#A6ACCD"> $</span><span style="color:#E4F0FB">table</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#A6ACCD">    $</span><span style="color:#E4F0FB">table</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">id</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#A6ACCD">    $</span><span style="color:#E4F0FB">table</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">string</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">name</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">    $</span><span style="color:#E4F0FB">table</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">string</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">    $</span><span style="color:#E4F0FB">table</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">longText</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">body</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">    $</span><span style="color:#E4F0FB">table</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">boolean</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">approved</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">    $</span><span style="color:#E4F0FB">table</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">integer</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">likes</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">default</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">0</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">    $</span><span style="color:#E4F0FB">table</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">timestamps</span><span style="color:#A6ACCD">();</span></span>
<span class="line"><span style="color:#A6ACCD">    });</span></span>
<span class="line"><span style="color:#A6ACCD">    }</span></span>
<span class="line"></span></code></pre>
<p>Этот код создает схему, в которой создается таблица со столбцами: id, name, email, body, approved, likes и timestamps.</p>
<h3 id="запуск-миграций">Запуск миграций<a aria-hidden="true" tabindex="-1" href="#запуск-миграций"><span class="icon icon-link"></span></a></h3>
<p>Создание и редактирование файла миграций ничего не даст, пока вы не запустите их с помощью командной строки. Если посмотреть на менеджер базы данных, то он по-прежнему пуст.</p>
<p>Запустите миграции с помощью программы Artisan:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">php</span><span style="color:#ADD7FF"> artisan</span><span style="color:#ADD7FF"> migrate</span></span>
<span class="line"></span></code></pre>
<p>Эта команда запускает все миграции внутри database/migrations, поскольку это первая миграция с момента создания приложения:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/successful-migrations.png" alt="Успешные миграции"><figcaption>Успешные миграции</figcaption></figure>
<p>На следующем изображении показаны все запущенные файлы миграции. Каждый из них представляет собой таблицу в базе данных:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/database-after-migrations.png" alt="База данных после миграции"><figcaption>База данных после миграции</figcaption></figure>
<h3 id="создание-файла-фабрики-commentfactory">Создание файла-фабрики CommentFactory<a aria-hidden="true" tabindex="-1" href="#создание-файла-фабрики-commentfactory"><span class="icon icon-link"></span></a></h3>
<p>Создайте файл-фабрику, содержащий вашу функцию определения. Для этой демонстрации вы создадите фабрику с помощью Artisan:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">php</span><span style="color:#ADD7FF"> artisan</span><span style="color:#ADD7FF"> make:factory</span><span style="color:#ADD7FF"> CommentFactory.php</span></span>
<span class="line"></span></code></pre>
<p>Этот код создает файл CommentFactory.php в папке database/factories.</p>
<h3 id="функция-определения">Функция определения<a aria-hidden="true" tabindex="-1" href="#функция-определения"><span class="icon icon-link"></span></a></h3>
<p>Функция внутри CommentFactory определяет, как Faker генерирует фальшивые данные. Отредактируйте ее так, чтобы она выглядела следующим образом:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">public</span><span style="color:#91B4D5"> function</span><span style="color:#ADD7FF"> definition</span><span style="color:#A6ACCD">()</span></span>
<span class="line"><span style="color:#A6ACCD">  {</span></span>
<span class="line"><span style="color:#A6ACCD">   return [</span></span>
<span class="line"><span style="color:#A6ACCD">     '</span><span style="color:#5DE4C7">name</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD;font-style:italic"> $</span><span style="color:#5DE4C7;font-style:italic">this</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FB">faker</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">name</span><span style="color:#A6ACCD">(),</span></span>
<span class="line"><span style="color:#A6ACCD">     '</span><span style="color:#5DE4C7">email</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD;font-style:italic"> $</span><span style="color:#5DE4C7;font-style:italic">this</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FB">faker</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">email</span><span style="color:#A6ACCD">(),</span></span>
<span class="line"><span style="color:#A6ACCD">     '</span><span style="color:#5DE4C7">body</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD;font-style:italic"> $</span><span style="color:#5DE4C7;font-style:italic">this</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FB">faker</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">sentence</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">45</span><span style="color:#A6ACCD">),</span></span>
<span class="line"><span style="color:#A6ACCD">     '</span><span style="color:#5DE4C7">approved</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD;font-style:italic"> $</span><span style="color:#5DE4C7;font-style:italic">this</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FB">faker</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">boolean</span><span style="color:#A6ACCD">(),</span></span>
<span class="line"><span style="color:#A6ACCD">     '</span><span style="color:#5DE4C7">likes</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> =></span><span style="color:#A6ACCD;font-style:italic"> $</span><span style="color:#5DE4C7;font-style:italic">this</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FB">faker</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">randomNumber</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">5</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">     ];</span></span>
<span class="line"><span style="color:#A6ACCD">    }</span></span>
<span class="line"></span></code></pre>
<p>Этот код указывает Faker’у на необходимость сгенерировать следующее:</p>
<p>Имя
Адрес электронной почты
Абзац, содержащий 45 предложений
Утверждаемое значение, которое может быть только истинным или ложным
Случайное число от 0 до 9999</p>
<h3 id="подключение-модели-comment-к-commentfactory">Подключение модели Comment к CommentFactory<a aria-hidden="true" tabindex="-1" href="#подключение-модели-comment-к-commentfactory"><span class="icon icon-link"></span></a></h3>
<p>Свяжите модель Comment с CommentFactory, объявив над определением защищенную переменную $model:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">protected</span><span style="color:#A6ACCD"> $</span><span style="color:#E4F0FB">model</span><span style="color:#91B4D5"> =</span><span style="color:#ADD7FF"> Comment</span><span style="color:#91B4D5">::</span><span style="color:#5DE4C7">class</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Также добавьте в зависимости от файла параметр use App\Models\Comment;. Теперь файл CommentFactory должен выглядеть следующим образом:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/comment-factory-file.png" alt="Файл CommentFactory"><figcaption>Файл CommentFactory</figcaption></figure>
<h2 id="как-засеять-базу-данных">Как засеять базу данных<a aria-hidden="true" tabindex="-1" href="#как-засеять-базу-данных"><span class="icon icon-link"></span></a></h2>
<p>Под посевом в программировании понимается генерация случайных поддельных данных для базы данных в целях тестирования.</p>
<p>Теперь, когда вы создали модель, запустили миграции и создали определение внутри CommentFactory, запустите сеялку с помощью файла DatabaseSeeder.</p>
<h3 id="создание-файла-commentseeder">Создание файла CommentSeeder<a aria-hidden="true" tabindex="-1" href="#создание-файла-commentseeder"><span class="icon icon-link"></span></a></h3>
<p>Создайте файл посевного материала, который использует фабрику для генерации данных:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">php</span><span style="color:#ADD7FF"> artisan</span><span style="color:#ADD7FF"> make:seeder</span><span style="color:#ADD7FF"> CommentSeeder.php</span></span>
<span class="line"></span></code></pre>
<p>Этот код создает файл CommentSeeder.php в папке database/seeders.</p>
<h3 id="редактирование-функции-run">Редактирование функции Run<a aria-hidden="true" tabindex="-1" href="#редактирование-функции-run"><span class="icon icon-link"></span></a></h3>
<p>Подключите модель Comment к CommentSeeder. Добавьте следующий код в функцию run:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#ADD7FF">Comment</span><span style="color:#91B4D5">::</span><span style="color:#E4F0FBD0">factory</span><span style="color:#A6ACCD">()</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">count</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">50</span><span style="color:#A6ACCD">)</span><span style="color:#91B4D5">-></span><span style="color:#E4F0FBD0">create</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span></code></pre>
<p>Этот код указывает CommentSeeder’у использовать модель Comment и функцию определения CommentFactory для генерации 50 комментариев в базе данных. Также добавьте в зависимости от файла параметр use App\Models\Comment;. Теперь файл CommentSeeder должен выглядеть следующим образом:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/comment-seeder-file.png" alt="Файл CommentSeeder"><figcaption>Файл CommentSeeder</figcaption></figure>
<p>Примечание: Вы можете настроить Faker на создание локальных данных. Например, можно настроить его на генерацию итальянских имен вместо случайных, задав в файле app/config.php параметр faker_locale равным it_IT. Подробнее о локалях Faker можно прочитать в этом руководстве.</p>
<h3 id="запуск-сеялки">Запуск сеялки<a aria-hidden="true" tabindex="-1" href="#запуск-сеялки"><span class="icon icon-link"></span></a></h3>
<p>Далее запустите файл сеялки с помощью Artisan:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">php</span><span style="color:#ADD7FF"> artisan</span><span style="color:#ADD7FF"> db:seed</span><span style="color:#ADD7FF"> --class=CommentSeeder</span></span>
<span class="line"></span></code></pre>
<p>Этот код запускает файл-сеялку и генерирует в базе данных 50 строк фальшивых данных.</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/database-seed-successful.png" alt="Успешное засеивание базы данных"><figcaption>Успешное засеивание базы данных</figcaption></figure>
<p>Теперь в базе данных должно быть 50 строк фальшивых данных, которые можно использовать для тестирования функций приложения:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/database-rows.png" alt="50 строк данных в базе данных"><figcaption>50 строк данных в базе данных</figcaption></figure>
<h2 id="как-сбросить-базу-данных">Как сбросить базу данных<a aria-hidden="true" tabindex="-1" href="#как-сбросить-базу-данных"><span class="icon icon-link"></span></a></h2>
<p>При использовании сгенерированных данных для тестирования необходимо сбрасывать базу данных при каждом запуске теста. Предположим, необходимо протестировать функцию переключения одобренных комментариев. Обновляйте базу данных после каждого теста, чтобы ранее сгенерированные данные не мешали проведению будущих тестов.</p>
<h3 id="использование-refreshdatabase">Использование RefreshDatabase<a aria-hidden="true" tabindex="-1" href="#использование-refreshdatabase"><span class="icon icon-link"></span></a></h3>
<p>Обновите базу данных с помощью свойства RefreshDatabase внутри тестового файла.</p>
<p>Перейдите в файл ExampleTest.php в папке tests/Feature к комментарию use Illuminate\Foundation\Testing\RefreshDatabase; и добавьте следующую строку кода над функцией test_the_application_returns_a_successful_response:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">use</span><span style="color:#ADD7FF"> RefreshDatabase</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span></code></pre>
<p>Теперь файл ExampleTest.php должен выглядеть следующим образом:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/example-test-file.png" alt="Файл ExampleTest"><figcaption>Файл ExampleTest</figcaption></figure>
<h3 id="запуск-теста">Запуск теста<a aria-hidden="true" tabindex="-1" href="#запуск-теста"><span class="icon icon-link"></span></a></h3>
<p>После добавления свойства RefreshDatabase в тестовый файл запустите тест с помощью Artisan:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">php</span><span style="color:#ADD7FF"> artisan</span><span style="color:#ADD7FF"> test</span></span>
<span class="line"></span></code></pre>
<p>Этот код запускает все тесты в приложении и обновляет базу данных после выполнения тестов, как показано на рисунке ниже:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/successful-test.png" alt="Успешное испытание ремесленника"><figcaption>Успешное испытание ремесленника</figcaption></figure>
<h2 id="успешное-тестирование-artisan">Успешное тестирование Artisan<a aria-hidden="true" tabindex="-1" href="#успешное-тестирование-artisan"><span class="icon icon-link"></span></a></h2>
<p>Теперь проверьте базу данных на наличие пустой таблицы комментариев:</p>
<figure class="igorlov-figure"><img src="https://kinsta.com/wp-content/uploads/2023/03/empty-comments-database.png" alt="Пустая база комментариев"><figcaption>Пустая база комментариев</figcaption></figure>
<p>Ручной ввод данных остался в прошлом! Автоматизируйте тестирование приложений с помощью фабрик моделей Laravel.</p>
<h2 id="резюме">Резюме<a aria-hidden="true" tabindex="-1" href="#резюме"><span class="icon icon-link"></span></a></h2>
<p>В этой статье мы рассмотрели, как создать проект Laravel, подключить его к базе данных, создать и настроить модели, миграцию, фабрику и файлы-сеялки для генерации случайных данных для базы данных. Также было рассмотрено, как сбросить базу данных после выполнения тестов.</p>
<p>Теперь вы убедились, что фабрики Laravel и Faker позволяют за считанные минуты сгенерировать любое количество тестовых данных для тестирования приложения или даже в качестве заполнителя - с минимальной конфигурацией.</p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/kak-generirovatь-i-ispolьzovatь-iskusstvennye-zapisi-s-pomoshьyu-fabrik-modelej-laravel" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/kak-generirovatь-i-ispolьzovatь-iskusstvennye-zapisi-s-pomoshьyu-fabrik-modelej-laravel" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Как генерировать и использовать искусственные записи с помощью фабрик моделей Laravel&#38;url=https://igorlov.ru/blog/kak-generirovatь-i-ispolьzovatь-iskusstvennye-zapisi-s-pomoshьyu-fabrik-modelej-laravel" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/kak-generirovatь-i-ispolьzovatь-iskusstvennye-zapisi-s-pomoshьyu-fabrik-modelej-laravel&#38;title=Как генерировать и использовать искусственные записи с помощью фабрик моделей Laravel&#38;summary=Тестирование является неотъемлемой частью веб-разработки. Фабрики моделей Laravel определяют записи в базе данных предсказуемым и легко воспроизводимым...
&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/kak-generirovatь-i-ispolьzovatь-iskusstvennye-zapisi-s-pomoshьyu-fabrik-modelej-laravel&#38;media=&#38;description=Тестирование является неотъемлемой частью веб-разработки. Фабрики моделей Laravel определяют записи в базе данных предсказуемым и легко воспроизводимым...
" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/java-iterator-hashmap-kak-iterirovatь-po-hashmap-s-pomoshьyu-cikla" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> Java Iterator Hashmap - Как итерировать по Hashmap с помощью цикла </a> <a href="/blog/chto-takoe-slug-i-kak-ego-sozdatь" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> Что такое slug и как его создать? </a> </nav>  </div> </article> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.svLg6TOn.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> <astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.BwogX8bT.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  </div> <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ИГ ФCВР</a>  <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>