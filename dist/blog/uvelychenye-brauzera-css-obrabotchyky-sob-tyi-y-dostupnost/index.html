<!DOCTYPE html><html lang="ru"> <head><title>Увеличение браузера, CSS, обработчики событий и доступность | Игорь Горлов - Fullstack Developer</title><link rel="canonical" href="https://igorlov.ru/blog/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost"><meta name="description" content="Несколько недель назад я работал над некоторыми функциями для своего сайта цветовых карт (https://paintmap.studio) и столкнулся с некоторыми очень странными ош"><meta name="robots" content="index, follow"><!-- favicon --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><!-- theme meta --><meta name="theme-name" content="igorlov.ru"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v4.5.1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><meta name="google-adsense-account" content="ca-pub-0634695143666394"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_regular_.uIaUWrkB.css" />
<style>.breadcrumbs[data-astro-cid-vcbh62el]{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));border-radius:min(1.5rem,1.1625rem + .45vw);padding-left:min(2rem,1.2125rem + 1.05vw);padding-right:min(2rem,1.2125rem + 1.05vw);padding-top:1rem;padding-bottom:1rem}.breadcrumbs[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__list[data-astro-cid-vcbh62el]{display:flex;align-items:center;gap:.125rem}.breadcrumbs__link[data-astro-cid-vcbh62el]{border-radius:9999px;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover{--tw-bg-opacity: 1;background-color:#fce4e1;background-color:rgba(252,228,225,var(--tw-bg-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]{padding:.125rem .75rem}.breadcrumbs__link[data-astro-cid-vcbh62el]:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#6a6a6a;background-color:rgba(106,106,106,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.breadcrumbs__link[data-astro-cid-vcbh62el]:hover:where([class=dark],[class=dark] *){--tw-bg-opacity: 1;background-color:#8a8a93;background-color:rgba(138,138,147,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}
</style>
<link rel="stylesheet" href="/_astro/_single_.CyWP_2Jq.css" />
<style>.circular-pagination[data-astro-cid-ihkjvfsn]{display:flex;width:100%;flex-wrap:wrap;align-items:center;justify-content:center;overflow:hidden;border-top-width:1px;--tw-border-opacity: 1;border-color:#020202;border-color:rgba(2,2,2,var(--tw-border-opacity));margin-top:min(1.25rem,1.1375rem + .15vw)}.circular-pagination__link[data-astro-cid-ihkjvfsn]{width:100%;--tw-bg-opacity: 1;background-color:#fef9f8;background-color:rgba(254,249,248,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity));text-decoration-line:none}.circular-pagination__link[data-astro-cid-ihkjvfsn]:hover{--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.circular-pagination__link[data-astro-cid-ihkjvfsn]{padding-left:min(1.5rem,1.1625rem + .45vw);padding-right:min(1.5rem,1.1625rem + .45vw);padding-top:.5rem;padding-bottom:.5rem}
.comments[data-v-533071ec]{margin:auto;margin-top:1.25rem;max-width:42rem;--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.comments:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame[data-v-533071ec]{width:100%;--tw-bg-opacity: 1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity));--tw-text-opacity: 1;color:#020202;color:rgba(2,2,2,var(--tw-text-opacity))}.giscus-frame:where([class=dark][data-v-533071ec],[class=dark] *[data-v-533071ec]){--tw-bg-opacity: 1;background-color:#131315;background-color:rgba(19,19,21,var(--tw-bg-opacity))}
.theme-toggle[data-v-8d8d9c54]{width:1.25rem;height:1.25rem}
</style><script type="module" src="/_astro/hoisted.DYPnEDpO.js"></script><style>[data-astro-transition-scope="astro-vgmtzcrq-1"] { view-transition-name: blog-image-uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost; }</style></head> <body class="flex min-h-screen flex-col bg-gray-light pt-14 font-inter text-dark fluid:text-lg dark:bg-black dark:text-white"> <header class="header" data-astro-cid-rq644orq> <div class="header__container container" data-astro-cid-rq644orq> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg header__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ИГ ФCВР</a>  <div class="nav header__nav" data-astro-cid-7wkmezxd> <button class="nav__open" title="Открыть меню" data-astro-cid-7wkmezxd> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> <span class="nav__open-line" data-astro-cid-7wkmezxd></span> </button> <nav class="nav__container" data-astro-cid-7wkmezxd> <button class="nav__close" title="Закрыть меню" data-astro-cid-7wkmezxd> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> <span class="nav__close-line" data-astro-cid-7wkmezxd></span> </button> <ul class="nav__list" data-astro-cid-7wkmezxd> <li class="nav__item" data-astro-cid-7wkmezxd> <a href="/projects" class="nav__link" data-astro-cid-7wkmezxd> Работы. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="/blog" class="nav__link nav__link--active" data-astro-cid-7wkmezxd> Блог. </a> </li><li class="nav__item" data-astro-cid-7wkmezxd> <a href="#cta" class="nav__link" data-astro-cid-7wkmezxd> Контакты. </a> </li> </ul> </nav> </div>   <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="IJ3dh" component-url="/_astro/ThemeToggle.kpN4JrWQ.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-rq644orq&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;ThemeToggle&quot;,&quot;value&quot;:true}"></astro-island> </div> </header>  <main id="main-content" class="main flex-1">  <div class="blocks"> <div class="blocks__container container"> <nav aria-label="Breadcrumbs" class="breadcrumbs" data-astro-cid-vcbh62el> <ol class="breadcrumbs__list" role="list" data-astro-cid-vcbh62el> <li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/" data-astro-cid-vcbh62el> Главная </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el> <a class="breadcrumbs__link" href="/blog" data-astro-cid-vcbh62el> Blog </a> </li><li class="breadcrumbs__item" role="listitem" data-astro-cid-vcbh62el>  </li> </ol> </nav>  </div> <div class="blocks__container container"> <!-- <TextAds class="fade-in-bottom fluid:my-2" style="--delay: .8s;" /> --><article class="article" data-astro-cid-axzg2cw6> <div class="article__header" data-astro-cid-axzg2cw6> <ul class="article__categories categories" data-astro-cid-axzg2cw6> <li class="categories__item" data-astro-cid-axzg2cw6> <a href="/category/учебник" class="categories__link" data-astro-cid-axzg2cw6> Учебник  </a> </li> </ul> <h1 class="article__title text-wrap" data-astro-cid-axzg2cw6> Увеличение браузера, CSS, обработчики событий и доступность </h1> <ul class="article__tags tags" data-astro-cid-axzg2cw6> <li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/a11y" data-astro-cid-axzg2cw6> A11y </a> </li><li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/javascript" data-astro-cid-axzg2cw6> JavaScript </a> </li><li class="tags__item" data-astro-cid-axzg2cw6> <a class="tags__link" href="/tag/доступность" data-astro-cid-axzg2cw6> Доступность </a> </li> </ul> <time class="article__date" data-astro-cid-axzg2cw6>
Опубликовано 18 дек., 2023 by Игорь Горлов </time> <time class="article__date" data-astro-cid-axzg2cw6> Последнее изменение: 21 мар., 2024 </time> </div>  <figure class="article__image" data-astro-cid-axzg2cw6> <picture> <source srcset="/_astro/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost-Dec-18-2023.CJRqkiT7_ZlhMsJ.avif" type="image/avif"><source srcset="/_astro/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost-Dec-18-2023.CJRqkiT7_2eW3uY.webp" type="image/webp"> <img src="/_astro/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost-Dec-18-2023.CJRqkiT7_1kY4EV.png" alt="Увеличение браузера, CSS, обработчики событий и доступность" class="aspect-auto h-full w-full object-cover object-center" loading="eager" data-astro-cid-axzg2cw6 data-astro-transition-scope="astro-vgmtzcrq-1" width="1200" height="500" decoding="async"> </picture> </figure>  <div class="article__content prose prose-zinc max-w-full dark:prose-invert prose-p:text-balance prose-a:no-underline hover:prose-a:underline prose-figure:-mx-12 prose-figure:w-screen prose-figure:bg-gray-light prose-figure:p-10 prose-figcaption:text-dark dark:prose-figure:bg-dark dark:prose-figcaption:text-white" data-astro-cid-axzg2cw6> <div id="adfox_17062261612859555"></div> <script>(function(){const blockId = "adfox_17062261612859555";

	window.yaContextCb = window.yaContextCb || [];
	window.yaContextCb.push(() => {
		Ya.adfoxCode.createAdaptive(
			{
				ownerId: 1493338,
				containerId: blockId,
				params: {
					p1: 'dawgg',
					p2: 'p',
				},
			},
			['desktop', 'tablet', 'phone'],
			{
				tabletWidth: 830,
				phoneWidth: 480,
				isAutoReloads: true,
			},
		);
	});
})();</script> <div class="article__meta" data-astro-cid-axzg2cw6> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Увеличение браузера, CSS, обработчики событий и доступность&#38;url=https://igorlov.ru/blog/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost&#38;title=Увеличение браузера, CSS, обработчики событий и доступность&#38;summary=Несколько недель назад я работал над некоторыми функциями для своего сайта цветовых карт (https://paintmap.studio) и столкнулся с некоторыми очень странными ош&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost&#38;media=&#38;description=Несколько недель назад я работал над некоторыми функциями для своего сайта цветовых карт (https://paintmap.studio) и столкнулся с некоторыми очень странными ош" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <a class="article__meta-section" href="#comments" data-astro-cid-axzg2cw6> Комментарии</a> </div> <details open class="toc px-5 border border-gray-light lg:px-10 py-2 cursor-pointer"><summary class="toc__title text-xl font-medium">Содержание</summary><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#добавление-кликабельных-элементов">Добавление кликабельных элементов</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#проблема-масштабирования">Проблема масштабирования</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#опасности-субпиксельного-рендеринга">Опасности субпиксельного рендеринга</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#исправление">Исправление</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#проблема-доступности">Проблема доступности</a></li></ol></details open><p>Несколько недель назад я работал над некоторыми функциями для своего сайта цветовых карт (<a href="https://paintmap.studio" rel="noopener noreferrer nofollow" target="_blank">https://paintmap.studio</a>) и столкнулся с некоторыми очень странными ошибками. Я обнаружил, что при использовании функции масштабирования в Chrome (которая есть и в любом другом современном браузере) мой, казалось бы, идеальный код ломался. В частности, свойства CSS и обработчики событий React/JavaScript просто исчезали, когда я просматривал приложение на разных уровнях масштабирования.</p>
<p>Вот точный сценарий (вместе с соответствующим исправлением):</p>
<p>Сначала пользователь выбирает изображение, а также ряд различных параметров, определяющих, как именно оно будет преобразовано. В результате вы получаете пикселизированное изображение, цвета которого соответствуют известному набору цветов из палитры красок. Результат выглядит следующим образом:</p>
<figure class="igorlov-figure"><img  src="/_astro/12gzlm0iprwnuiwzcpga.B41pnVLb_Z2x3YJy.webp" alt="Описание изображения" width="880" height="494" loading="lazy" decoding="async"><figcaption>Описание изображения</figcaption></figure>
<p>Теоретически приложение может обрабатывать изображения любого размера. Это могут быть небольшие изображения, которые легко просматриваются на экране. Но на практике почти все изображения, которые я прогоняю через приложение, довольно большие. Чаще всего они имеют размер 1440x1440 пикселей.</p>
<p>Это означает, что сгенерированное изображение может быть трудно рассмотреть целиком. Поэтому, когда я использую приложение, я обычно устанавливаю функцию масштабирования в браузере на 75 %. На моих 4k-мониторах это позволяет просматривать все изображение размером 1440x1440 на экране без необходимости прокрутки по горизонтали или вертикали.</p>
<p>Еще одна особенность приложения заключается в том, что оно преобразует преобразованное изображение в огромную “карту цветов”. Это массивная HTML-таблица, каждая ячейка которой соответствует одному из пиксельных блоков преобразованного изображения. Но на карте каждая из этих ячеек содержит номер, и каждый номер соответствует определенному цвету краски.</p>
<p>(Если вам интересно, смысл этой функции в том, что я могу скопировать и вставить всю HTML-таблицу в электронную таблицу. После того как она окажется в электронной таблице, я смогу использовать ее в качестве шаблона в стиле “рисование по номерам”).</p>
<p>К сожалению, преобразование изображения в массивную HTML-таблицу делает экранный вывод еще больше. Это необходимо, потому что если я попытаюсь придерживаться размера исходного изображения, вы никогда не сможете увидеть все числа в каждой отдельной ячейке.</p>
<p>Даже если в браузере установлен 75-процентный масштаб, результирующее изображение выглядит следующим образом:</p>
<figure class="igorlov-figure"><img  src="/_astro/9udnhdy6cd0oiuvhpg29.B_yHdTMG_Z1rqOOo.webp" alt="Описание изображения" width="880" height="443" loading="lazy" decoding="async"><figcaption>Описание изображения</figcaption></figure>
<p>Это может показаться несколько громоздким, потому что мне все равно придется прокручивать изображение по горизонтали и вертикали, чтобы увидеть его целиком. Но это не так важно, потому что все равно все это будет просто скопировано и вставлено в электронную таблицу. Кроме того, когда вы просматриваете изображение в таком формате, имеющее 144x144 ячейки таблицы, вы можете сделать очень многое, чтобы сделать его “презентабельным” на одном экране.</p>
<figure class="igorlov-figure"><img  src="/_astro/zy07yckogp94g2jpv4wm.CZ-UvHLg_Z1oCA7D.webp" alt="Описание изображения" width="880" height="367" loading="lazy" decoding="async"><figcaption>Описание изображения</figcaption></figure>
<h2 id="добавление-кликабельных-элементов">Добавление кликабельных элементов<a aria-hidden="true" tabindex="-1" href="#добавление-кликабельных-элементов"><span class="icon icon-link"></span></a></h2>
<p>Вот функция, которую мне нужно было добавить. Когда я смотрел на большую “карту цветов”, я задавался вопросом: “Сколько еще мест на карте используют тот же цвет, что и в этой конкретной ячейке?“.</p>
<p>Например, если посмотреть на следующий участок карты:</p>
<figure class="igorlov-figure"><img  src="/_astro/fsery7m63477fzcs8qb0.D3dRoJ0y_1UpQvH.webp" alt="Описание изображения" width="880" height="361" loading="lazy" decoding="async"><figcaption>Описание изображения</figcaption></figure>
<p>Я вижу, что есть определенные блоки, в которых используется цвет #920. Но я хотел иметь возможность быстро увидеть, где во всей цветовой карте встречается цвет #920. Поэтому я добавил немного новой логики в код, который рендерит ячейки таблицы. Это выглядело следующим образом:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> getTableCells</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">cells</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> [</span><span style="color:#E4F0FB">rgbModel</span><span style="color:#A6ACCD">], </span><span style="color:#E4F0FB">rowIndex</span><span style="color:#91B4D5"> =</span><span style="color:#91B4D5"> -</span><span style="color:#5DE4C7">1</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">	allow</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">anArrayOfInstances</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">cells</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">rgbModel</span><span style="color:#A6ACCD">).</span><span style="color:#E4F0FBD0">anInteger</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">rowIndex</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">is</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">not</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">negative</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">	const</span><span style="color:#A6ACCD"> { </span><span style="color:#E4F0FB">highlightedColor</span><span style="color:#A6ACCD"> } </span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB"> uiState</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#E4F0FB"> cells</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">map</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">cell</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">cellIndex</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#91B4D5">		const</span><span style="color:#E4F0FB"> paintIndex</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> colors</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">findIndex</span><span style="color:#A6ACCD">((</span><span style="color:#E4F0FB">color</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> color</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#91B4D5"> ===</span><span style="color:#E4F0FB"> cell</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#91B4D5">		const</span><span style="color:#E4F0FB"> darkness</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">cell</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">red</span><span style="color:#91B4D5"> +</span><span style="color:#E4F0FB"> cell</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">green</span><span style="color:#91B4D5"> +</span><span style="color:#E4F0FB"> cell</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">blue</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">/</span><span style="color:#5DE4C7"> 3</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#91B4D5">		let</span><span style="color:#E4F0FB"> color</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#91B4D5">		let</span><span style="color:#E4F0FB"> backgroundColor</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">		if (</span><span style="color:#E4F0FB">highlightedColor</span><span style="color:#91B4D5"> ===</span><span style="color:#E4F0FB"> cell</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#A6ACCD">) {</span></span>
<span class="line"><span style="color:#E4F0FB">			backgroundColor</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">#39ff14</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#E4F0FB">			color</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">red</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">		} else {</span></span>
<span class="line"><span style="color:#E4F0FB">			backgroundColor</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> `</span><span style="color:#5DE4C7">rgb(</span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">cell</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">red</span><span style="color:#A6ACCD">}</span><span style="color:#5DE4C7">, </span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">cell</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">green</span><span style="color:#A6ACCD">}</span><span style="color:#5DE4C7">, </span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">cell</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">blue</span><span style="color:#A6ACCD">}</span><span style="color:#5DE4C7">)</span><span style="color:#A6ACCD">`</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#E4F0FB">			color</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> darkness</span><span style="color:#91B4D5"> &#x3C;</span><span style="color:#5DE4C7"> 128</span><span style="color:#91B4D5"> ?</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">white</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> :</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">black</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7C0">		return</span><span style="color:#A6ACCD"> (</span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;</span><span style="color:#5DE4C7">td</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">				className</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">cell</span><span style="color:#A6ACCD">'</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">				id</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{cell</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">				key</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">`</span><span style="color:#5DE4C7">cell-</span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">rowIndex</span><span style="color:#A6ACCD">}</span><span style="color:#5DE4C7">-</span><span style="color:#A6ACCD">${</span><span style="color:#E4F0FB">cellIndex</span><span style="color:#A6ACCD">}`</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">				onClick</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{handleCellClick}</span></span>
<span class="line"><span style="color:#91B4D5;font-style:italic">				style</span><span style="color:#91B4D5">=</span><span style="color:#E4F0FB">{</span><span style="color:#A6ACCD">{</span></span>
<span class="line"><span style="color:#E4F0FB">					backgroundColor</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#ADD7FF">					borderWidth</span><span style="color:#A6ACCD">:</span><span style="color:#E4F0FB"> highlightedColor</span><span style="color:#91B4D5"> ===</span><span style="color:#E4F0FB"> cell</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#91B4D5"> ?</span><span style="color:#5DE4C7"> 5</span><span style="color:#91B4D5"> :</span><span style="color:#5DE4C7"> 0</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#E4F0FB">					color</span><span style="color:#A6ACCD">,</span></span>
<span class="line"><span style="color:#A6ACCD">				}</span><span style="color:#E4F0FB">}</span></span>
<span class="line"><span style="color:#E4F0FB">			></span></span>
<span class="line"><span style="color:#E4F0FB">				{paintIndex}</span></span>
<span class="line"><span style="color:#E4F0FB">			&#x3C;/</span><span style="color:#5DE4C7">td</span><span style="color:#E4F0FB">></span></span>
<span class="line"><span style="color:#A6ACCD">		);</span></span>
<span class="line"><span style="color:#A6ACCD">	});</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"></span></code></pre>
<p>Вот что происходит в этой функции:</p>
<p>Мы берем <code>highlightedColor</code> из <code>uiState</code>.</p>
<p>Затем для каждой ячейки, если она представляет собой <code>highlightedColor</code>, мы устанавливаем стиль, чтобы фон был неоново-зеленым, с красным номером и шириной границы 5. Если это не <code>highlightedColor</code>, то мы устанавливаем для ячейки “обычный” цвет фона, с черным номером и шириной границы 0.</p>
<p>Мы установили обработчик <code>onClick</code> для каждой ячейки, который будет обновлять <code>highlightedColor</code>.</p>
<p>Мы также установили <code>className</code> для каждой ячейки в <code>cell</code>.</p>
<p>CSS-класс <code>cell</code> выглядел следующим образом:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E4F0FBD0;font-style:italic">.</span><span style="color:#5FB3A1;font-style:italic">cell</span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#ADD7FF">	border-color</span><span style="color:#A6ACCD">: </span><span style="color:#ADD7FF">red</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	border-style</span><span style="color:#A6ACCD">: </span><span style="color:#ADD7FF">solid</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	cursor</span><span style="color:#A6ACCD">: </span><span style="color:#ADD7FF">pointer</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	font-weight</span><span style="color:#A6ACCD">: </span><span style="color:#ADD7FF">bold</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	height</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">50px</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	min-height</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">50px</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	min-width</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">50px</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	text-align</span><span style="color:#A6ACCD">: </span><span style="color:#ADD7FF">center</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	transform-origin</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">0</span><span style="color:#5DE4C7"> 0</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	vertical-align</span><span style="color:#A6ACCD">: </span><span style="color:#ADD7FF">middle</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#ADD7FF">	width</span><span style="color:#A6ACCD">: </span><span style="color:#5DE4C7">50px</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">}</span></span>
<span class="line"></span></code></pre>
<p>Обратите внимание, что я установил атрибут <code>cursor</code> в значение <code>pointer</code>, чтобы дать дополнительную визуальную подсказку, что каждая отдельная ячейка таблицы действительно является кликабельной.</p>
<p>А обработчик события <code>handleCellClick()</code> выглядел следующим образом:</p>
<pre class="astro-code poimandres" style="background-color:#1b1e28;color:#a6accd; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> handleCellClick</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">event</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> {}) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> {</span></span>
<span class="line"><span style="color:#E4F0FB">	allow</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">anObject</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">event</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">is</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">not</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">empty</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">	uiState</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">toggleHighlightedColor</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">event</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">target</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">id</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">};</span></span>
<span class="line"></span></code></pre>
<p>В результате, если я щелкну на любой ячейке, содержащей #920, предыдущий подраздел будет выглядеть следующим образом:</p>
<figure class="igorlov-figure"><img  src="/_astro/czqcgyi84fmw3us9eiri.Bg5vfOFn_1byc50.webp" alt="Описание изображения" width="880" height="355" loading="lazy" decoding="async"><figcaption>Описание изображения</figcaption></figure>
<p>А если я сильно уменьшу масштаб, то получу нечто похожее на это:</p>
<figure class="igorlov-figure"><img  src="/_astro/y42tyg8z12pppxnffl0q.UhMlehjP_ZcAY6t.webp" alt="Описание изображения" width="880" height="434" loading="lazy" decoding="async"><figcaption>Описание изображения</figcaption></figure>
<p>Это позволило мне быстро увидеть все остальные места на изображении, где использовался тот же цвет.</p>
<figure class="igorlov-figure"><img  src="/_astro/94pthq6i2rdw068evi7q.DdvG6_6z_1T0emu.webp" alt="Описание изображения" width="880" height="367" loading="lazy" decoding="async"><figcaption>Описание изображения</figcaption></figure>
<h2 id="проблема-масштабирования">Проблема масштабирования<a aria-hidden="true" tabindex="-1" href="#проблема-масштабирования"><span class="icon icon-link"></span></a></h2>
<p>Сначала я был очень доволен новой функцией выделения цветом. Но потом я заметил кое-что странное.</p>
<p>Когда я просматривал карту цветов без применения масштабирования в браузере, все работало отлично. Но просмотр без масштабирования означал, что я мог видеть только крошечную часть на экране. Но когда я вернулся к своим “нормальным” настройкам - браузерный зум = 75 % - произошло нечто очень странное.</p>
<p>Большинство обработчиков <code>onClick</code> работали просто отлично. Но в некоторых частях карты они вообще ничего не делали. Кроме того, для большинства ячеек таблицы был применен CSS-атрибут <code>cursor: pointer</code>. Но во всех ячейках, где обработчик <code>onClick</code> не срабатывал, курсор также возвращался к своему значению по умолчанию <code>pointer</code>.</p>
<p>Я не смог найти никакой причины, по которой значения событий/CSS не срабатывали в одних ячейках, но прекрасно работали в других. Более того, конкретные ячейки, которые не работали или работали, менялись в зависимости от конкретной настройки масштаба, которую я выбрал в браузере.</p>
<p>При 75% масштабировании определенная область ячеек потеряет свои настройки событий/CSS. Но при масштабировании 66 % совершенно разные области теряли настройки. Я также заметил, что при 50-процентном масштабировании все работало просто отлично. Это был критический ключ к разгадке происходящего.</p>
<figure class="igorlov-figure"><img  src="/_astro/080obsie3fl5zljmujie.CQ5qaNBl_Z2lWsME.webp" alt="Описание изображения" width="880" height="367" loading="lazy" decoding="async"><figcaption>Описание изображения</figcaption></figure>
<h2 id="опасности-субпиксельного-рендеринга">Опасности субпиксельного рендеринга<a aria-hidden="true" tabindex="-1" href="#опасности-субпиксельного-рендеринга"><span class="icon icon-link"></span></a></h2>
<p>Вы могли заметить, что в большинстве современных IDE, если вы попытаетесь вручную задать свойству CSS субпиксельное значение (например, <code>height: 50.33px</code>), вы получите какое-то предупреждение. Это происходит потому, что браузеры могут неадекватно реагировать, когда вы задаете значения пикселей, которые не являются целыми числами.</p>
<p>Конечно, в моем примере я не устанавливал вручную атрибуты стиля на субпиксельные значения. Все было настроено на красивые, чистые, целые числа. Но вот в чем загвоздка:</p>
<p>Когда пользователь вручную изменяет изображение с помощью функции масштабирования браузера, это заставляет все на экране перерисовываться. И эти повторные рендеринги часто превращают ваши красивые, чистые, целые числа в субпиксельные вычисления.</p>
<p>Например, я устанавливал для каждой ячейки таблицы <code>высоту: 50px</code> и <code>ширину: 50px</code>. В этом нет ничего плохого. Но если пользователь устанавливает коэффициент масштабирования 66%, то теперь высота и ширина каждой ячейки становится равной <code>33,33px</code>.</p>
<p>Буду честен. Я не до конца понимаю, что происходит в кишках самого браузера, из-за чего ячейка таблицы с <code>высотой: 33.33px</code> и <code>шириной: 33.33px</code> вдруг теряет свои CSS-свойства или обработчики событий. Но опытным путем мне удалось доказать, что эти субпиксельные вычисления действительно были источником моей проблемы.</p>
<p>Это объясняет, почему при разных уровнях масштабирования одни области карты цветов работают отлично, а другие - нет. Потому что, когда вы выстраиваете последовательные ячейки таблицы на экране при масштабе, скажем, 66 %, первая ячейка будет “выбиваться” из нормальной пиксельной сетки экрана (из-за этого надоедливого модификатора <code>.33px</code>). И вторая ячейка также будет “выключена” из пиксельной сетки (потому что теперь эта ячейка по сути смещена на <code>.66px</code>). Но третья ячейка сможет “вклиниться” в нормальную пиксельную сетку экрана. Потому что к моменту рендеринга третьей ячейки ее “смещение” составляет <code>1/3 + 1/3 + 1/3 = 1</code> - это означает, что она может “вклиниться” в “нормальное” отображение монитора.</p>
<p>Это также объясняет, почему мой код отлично работал при 100% масштабировании и 50% масштабировании, но не работал при масштабировании 66% или 75%. Потому что при 50-процентном масштабировании все мои ячейки <code>height: 50px; width: 50px;</code> становились… <code>высота: 25px; ширина: 25px;</code> ячейки - это означает, что при 50% масштабировании все по-прежнему отображалось с хорошими, чистыми, целыми числами пикселей.</p>
<figure class="igorlov-figure"><img  src="/_astro/jt0txsl3226vmn664jp9.DnSv4x5m_ZaUw7K.webp" alt="Описание изображения" width="880" height="367" loading="lazy" decoding="async"><figcaption>Описание изображения</figcaption></figure>
<h2 id="исправление">Исправление<a aria-hidden="true" tabindex="-1" href="#исправление"><span class="icon icon-link"></span></a></h2>
<p>К счастью, когда я понял, что происходит, и немного погуглил по CSS, я смог решить всю проблему с помощью одной строчки CSS. Я изменил свой CSS-класс <code>cell</code>, добавив следующее:</p>
<p><code>transform: scaleX(1) scaleY(1);</code></p>
<p>По сути, это означает, что каждая ячейка должна масштабироваться, чтобы занять 100% своих границ. Это, в свою очередь, похоже, устраняет проблему, которую CSS- и event-обработчики имели с элементами, стилизованными под субпиксели.</p>
<figure class="igorlov-figure"><img  src="/_astro/83l5pf5lena6d4piflpw.CR-bpw4J_i7pSe.webp" alt="Описание изображения" width="880" height="367" loading="lazy" decoding="async"><figcaption>Описание изображения</figcaption></figure>
<p>Но… кого это волнует?</p>
<p>Вполне разумно посмотреть на этот странный баг и задуматься, стоит ли вообще о нем беспокоиться. Поначалу я просто отбросил его как странный крайний случай, с которым я никогда раньше не сталкивался, и, вероятно, мне никогда больше не придется о нем беспокоиться.</p>
<p>Но… На самом деле я уверен, что уже сталкивался с этой проблемой. В прошлом бывали случаи, когда я работал над сайтом, и мне надоедало прокручивать экран, чтобы проверить функциональность. Поэтому я уменьшал экран, чтобы видеть все в одном кадре. Но потом, после нескольких дней или даже недель использования сайта таким образом, я обнаруживал странный сбой в приложении.</p>
<p>После дальнейшего расследования и осознания того, что никто из моих коллег не смог воспроизвести ошибку, я понял, что проблема возникла только у меня, потому что я был единственным, кто использовал сайт на уровне масштабирования не 100 %. Что же я сделал? Я просто вернул масштаб на 100 % и пошел по своим делам.</p>
<p>В конце концов, никто больше не сообщал об этой ошибке и никак не жаловался на нее. Поэтому я не хотел тратить циклы разработчиков на устранение проблемы, которая больше никого не волновала.</p>
<p>Единственная причина, по которой я чувствовал необходимость исправить ошибку в данном конкретном случае, заключалась в том, что она была важна для меня. В частности, это “важно” потому, что трудно просматривать большие цветные карты на экране, если я не уменьшаю их до приемлемого размера.</p>
<p>Кроме того, даже если бы кто-то в прошлом пожаловался на неработающие функции в форматах без 100-процентного увеличения, я уверен, что отнесся бы к этому довольно пренебрежительно. Не то чтобы я не заботился о пользовательском опыте. Но мои рассуждения были бы такими:</p>
<p>Мы тратим много времени на то, чтобы обеспечить оптимальную работу сайта в разрешении по умолчанию. Если вы считаете необходимым изменить это разрешение (по какой-то странной причине), я не могу беспокоиться о том, чтобы тестировать и устранять все крайние случаи, которые возникают из-за того, что люди используют сайт не по назначению.</p>
<p>Возможно, это звучит легкомысленно. Но в браузере можно сделать/использовать множество вещей, которые противоречат первоначальному замыслу разработчиков. И вряд ли можно ожидать, что мы будем уделять много времени устранению неполадок, связанных с вашим нестандартным способом использования приложения.</p>
<p>Например: Я получал заявки на “ошибку” от пользователей, которые говорили, что на сайте что-то сломалось. Когда я разбирался с этим, я не мог воссоздать ошибку. Не смогли и другие члены нашей команды. Когда я связался с пользователем напрямую, я понял, что “ошибка” была вызвана тем, что он использовал какой-то сторонний плагин для браузера. И он мешает нормальной работе сайта.</p>
<p>В таких случаях я всегда отвечал одно и то же: “Прекратите использовать этот сторонний плагин для браузера на нашем сайте”. Конечно, некоторые люди ныли по поводу такого ответа. Но я всегда получал поддержку в этом вопросе от своего руководства. Потому что пытаться обеспечить правильную работу приложения независимо от того, какой сторонний плагин кто-то решит использовать, - это ужасная кроличья нора, которая не приносит почти никакой ощутимой пользы.</p>
<p>Наконец, проблемы, вызванные функцией масштабирования в браузере, кажутся крайними случаями. Я имею в виду, что 99,99 % времени, когда я просматриваю/использую любой сайт, я просматриваю/использую его на стандартном уровне масштабирования 100 %. Для подавляющего большинства пользователей, вероятно, большинство/все сайты также используются при 100%-ном масштабировании.</p>
<figure class="igorlov-figure"><img  src="/_astro/j2h8gkldbgu5xvdjc85w.Zx-iYTFk_6O0ie.webp" alt="Описание изображения" width="880" height="367" loading="lazy" decoding="async"><figcaption>Описание изображения</figcaption></figure>
<h2 id="проблема-доступности">Проблема доступности<a aria-hidden="true" tabindex="-1" href="#проблема-доступности"><span class="icon icon-link"></span></a></h2>
<p>Но чем больше я думал об этом, тем больше понимал, что это проблема доступности. И я не думаю, что многие команды разработчиков задумываются об этом.</p>
<p>Я работал над приложениями, где доступность никого не волновала. У нас была ограниченная база пользователей, и руководство не придавало значения стандартам доступности. Поэтому мы с радостью создавали код, не заботясь о таких вещах, как соответствие A11Y.</p>
<p>Я также работал в командах, где доступность была критически важна. Там мы постоянно запускали инструменты аудита и проповедовали важность стандартов доступности во всем, что мы создавали.</p>
<p>Даже в тех “проснувшихся” средах я не помню, чтобы кто-то говорил, что нам нужно проверять возможности сайта при разных уровнях масштабирования. Но какая часть вашей пользовательской базы с наибольшей вероятностью будет использовать ваш сайт/приложение при разных уровнях масштабирования? Правильно. Люди с ослабленным зрением. И если ключевые функции вашего сайта просто ломаются, скажем, при 125%-ном увеличении, вы можете оттолкнуть этих пользователей.</p>
<p>Для ясности, я даже не уверен, как именно вы тестируете это. Например, если вы пишете модульные тесты Jest, вы не сможете проверить функциональность на разных уровнях масштабирования. Вам придется использовать решение для безголового браузера. И я не уверен, что инструменты быстрого аудита (например, Axe) вообще проверяют такие вещи? Мне придется изучить этот вопрос подробнее.</p>
<p>Во всяком случае, я не пытаюсь перечеркнуть ваши текущие методы обеспечения доступности. И если честно, возможно, в вашей мастерской это даже не стоит на повестке дня. Но я просто подчеркиваю, что это одна из потенциальных проблем, о которой вам, возможно, стоит помнить в будущем.</p>
<p>Будьте здоровы! И счастливого кодинга.</p> <div class="share article__share" data-astro-cid-g7nhfqu5> <h3 class="share__title" data-astro-cid-g7nhfqu5>Поделиться:</h3> <ul class="share__list" data-astro-cid-g7nhfqu5> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://vk.com/share.php?url=https://igorlov.ru/blog/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Vk
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="facebook share button" href="https://facebook.com/sharer/sharer.php?u=https://igorlov.ru/blog/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Fb
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="twitter share button" href="https://twitter.com/share?title=Увеличение браузера, CSS, обработчики событий и доступность&#38;url=https://igorlov.ru/blog/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
X
</a> </li><li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="linkedin share button" href="https://www.linkedin.com/shareArticle?mini=true&#38;url=https://igorlov.ru/blog/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost&#38;title=Увеличение браузера, CSS, обработчики событий и доступность&#38;summary=Несколько недель назад я работал над некоторыми функциями для своего сайта цветовых карт (https://paintmap.studio) и столкнулся с некоторыми очень странными ош&#38;source=https://igorlov.ru/" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Linkd
</a> </li> <li class="share__item" data-astro-cid-g7nhfqu5> <a class="share__link" aria-label="pinterest share button" href="https://pinterest.com/pin/create/button/?url=https://igorlov.ru/blog/uvelychenye-brauzera-css-obrabotchyky-sob-tyi-y-dostupnost&#38;media=&#38;description=Несколько недель назад я работал над некоторыми функциями для своего сайта цветовых карт (https://paintmap.studio) и столкнулся с некоторыми очень странными ош" target="_blank" rel="noreferrer noopener" data-astro-cid-g7nhfqu5>
Pint
</a> </li> </ul>  </div> <nav class="circular-pagination" aria-label="Circular Pagination" data-astro-cid-ihkjvfsn> <a href="/blog/sozdaite-chatbota-s-pomoschiu-novoho-api-openai-assistant-y-v-zova-funktsyi" class="circular-pagination__link circular-pagination__link--prev" data-astro-cid-ihkjvfsn> Создайте чатбота с помощью нового API OpenAI Assistant и вызова функций </a> <a href="/blog/kalkuliator-yndeksa-mass-tela-ymt-s-yspolzovanyem-byblyoteky-hrafycheskoho-ynterfeisa-polzovatelia-gui-tkinter" class="circular-pagination__link circular-pagination__link--next" data-astro-cid-ihkjvfsn> Калькулятор индекса массы тела (ИМТ) с использованием библиотеки графического интерфейса пользователя (GUI) Tkinter </a> </nav>  </div> </article> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Z1T5Wnr" prefix="r0" component-url="/_astro/YandexRelatedAds.svLg6TOn.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;YandexRelatedAds&quot;,&quot;value&quot;:true}" await-children=""><div id="yandex_rtb_C-A-2592503-2"></div><!--astro:end--></astro-island> <astro-island uid="Z2a8j9B" component-url="/_astro/CommentBlock.BwogX8bT.js" component-export="default" renderer-url="/_astro/client.DtEXyQF-.js" props="{&quot;data-astro-cid-axzg2cw6&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;CommentBlock&quot;,&quot;value&quot;:true}"></astro-island>  </div> <!-- <div class="blocks__container container">
			<CtaBlock id="cta" class=""
			/>
		</div> --> </div>    </main> <footer class="footer" data-astro-cid-dwelrhxs> <div class="footer__container container" data-astro-cid-dwelrhxs> <a href="/" class="logo font-extrabold lowercase transition-colors fluid:text-lg footer__logo dark:hover:text-light text-dark  dark:text-gray" aria-label="logo" data-astro-cid-ijoll5s5>ИГ ФCВР</a>  <small class="footer__copyright" data-astro-cid-dwelrhxs>все права защищены. © 2024</small> </div> </footer>  </body></html>